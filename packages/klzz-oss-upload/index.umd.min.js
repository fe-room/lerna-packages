!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("stream"),require("events"),require("timers"),require("util"),require("url"),require("http"),require("https"),require("constants"),require("path"),require("querystring"),require("assert"),require("os"),require("fs"),require("child_process")):"function"==typeof define&&define.amd?define(["exports","stream","events","timers","util","url","http","https","constants","path","querystring","assert","os","fs","child_process"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).axios={},e.require$$0,e.require$$1,e.require$$4,e.util$1,e.urlutil,e.http,e.https,e.require$$1$1,e.path,e.querystring$1,e.assert,e.os,e.fs$1,e.child)}(this,(function(exports,require$$0,require$$1,require$$4,util$1,urlutil,http,https,require$$1$1,path,querystring$1,assert,os,fs$1,child){"use strict";function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var require$$0__default=_interopDefaultLegacy(require$$0),require$$1__default=_interopDefaultLegacy(require$$1),require$$4__default=_interopDefaultLegacy(require$$4),util__default=_interopDefaultLegacy(util$1),urlutil__default=_interopDefaultLegacy(urlutil),http__default=_interopDefaultLegacy(http),https__default=_interopDefaultLegacy(https),require$$1__default$1=_interopDefaultLegacy(require$$1$1),path__default=_interopDefaultLegacy(path),querystring__default=_interopDefaultLegacy(querystring$1),assert__default=_interopDefaultLegacy(assert),os__default=_interopDefaultLegacy(os),fs__default=_interopDefaultLegacy(fs$1),child__default=_interopDefaultLegacy(child),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?r.path:t)}},r.exports),r.exports}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function commonjsRequire(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}for(var asyncToGenerator=createCommonjsModule((function(e){function t(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var s=e.apply(r,n);function a(e){t(s,o,i,a,c,"next",e)}function c(e){t(s,o,i,a,c,"throw",e)}a(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0})),_asyncToGenerator=getDefaultExportFromCjs(asyncToGenerator),runtime_1=createCommonjsModule((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=Object.create((t&&t.prototype instanceof y?t:y).prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n=d;return function(o,i){if(n===h)throw Error("Generator is already running");if(n===f){if("throw"===o)throw i;return R()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=w(s,r);if(a){if(a===m)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?f:p,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",h="executing",f="completed",m={};function y(){}function g(){}function b(){}var _={};_[i]=function(){return this};var v=Object.getPrototypeOf,C=v&&v(v(A([])));C&&C!==r&&n.call(C,i)&&(_=C);var T=b.prototype=y.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,s,a){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function w(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,w(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=T.constructor=b,b.constructor=g,g.displayName=c(b,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,a,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},E(k.prototype),k.prototype[s]=function(){return this},e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new k(u(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(T),c(T,a,"Generator"),T[i]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(this.prev>=s.tryLoc){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(s.catchLoc>this.prev)return o(s.catchLoc,!0);if(s.finallyLoc>this.prev)return o(s.finallyLoc)}else if(c){if(s.catchLoc>this.prev)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(s.finallyLoc>this.prev)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(this.prev>=o.tryLoc&&n.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}!i||"break"!==e&&"continue"!==e||i.tryLoc>t||t>i.finallyLoc||(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})),regenerator=runtime_1,debug$2=()=>()=>{},streamWormhole=(e,t)=>new Promise(((r,n)=>{if("function"!=typeof e.resume)return r();if(e.unpipe&&e.unpipe(),e.resume(),e._readableState&&e._readableState.ended)return r();if(!e.readable||e.destroyed)return r();function o(){e.removeListener("end",i),e.removeListener("close",i),e.removeListener("error",s)}function i(){o(),r()}function s(e){o(),t?n(e):r()}e.on("end",i),e.on("close",i),e.on("error",s)})),defaults=createCommonjsModule((function(e,t){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}})),Utility=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a,c=[].slice,u={}.hasOwnProperty;t=function(){var e,t,r,n,o,s;if(s=arguments[0],o=2>arguments.length?[]:c.call(arguments,1),i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,r=o.length;r>e;e++)if(null!=(n=o[e]))for(t in n)u.call(n,t)&&(s[t]=n[t]);return s},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},s=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},n=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){var t;if(n(e))return!e.length;for(t in e)if(u.call(e,t))return!1;return!0},a=function(e){var t,r;return s(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return i(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=s,e.exports.isArray=n,e.exports.isEmpty=o,e.exports.isPlainObject=a,e.exports.getValue=r}()})),XMLDOMImplementation=createCommonjsModule((function(e){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,r){throw Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,r){throw Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw Error("This DOM method is not implemented.")},e}()})),XMLDOMErrorHandler=createCommonjsModule((function(e){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw Error(e)},e}()})),XMLDOMStringList=createCommonjsModule((function(e){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()})),XMLDOMConfiguration=createCommonjsModule((function(e){var t,r;t=XMLDOMErrorHandler,r=XMLDOMStringList,e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()})),NodeType$1=createCommonjsModule((function(e){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}})),XMLAttribute=createCommonjsModule((function(e){!function(){var t;t=NodeType$1,e.exports=function(){function e(e,r,n){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&(e.prefix===this.prefix&&(e.localName===this.localName&&e.value===this.value))},e}()}()})),XMLNamedNodeMap=createCommonjsModule((function(e){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw Error("This DOM method is not implemented.")},e}()})),XMLElement=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a,c={}.hasOwnProperty;s=(a=Utility).isObject,i=a.isFunction,o=a.getValue,t=NodeType$1,r=XMLAttribute,n=XMLNamedNodeMap,e.exports=function(e){function a(e,r,n){var o,i,s,c;if(a.__super__.constructor.call(this,e),null==r)throw Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(i=0,s=(c=e.children).length;s>i;i++)if((o=c[i]).type===t.DocType){o.name=this.name;break}}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,e),Object.defineProperty(a.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(a.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(a.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(a.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(a.prototype,"id",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"className",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"classList",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new n(this.attribs)),this.attributeMap}}),a.prototype.clone=function(){var e,t,r;for(e in(t=Object.create(this)).isRoot&&(t.documentObject=null),t.attribs={},r=this.attribs)c.call(r,e)&&(t.attribs[e]=r[e].clone());return t.children=[],this.children.forEach((function(e){var r;return(r=e.clone()).parent=t,t.children.push(r)})),t},a.prototype.attribute=function(e,t){var n;if(null!=e&&(e=o(e)),s(e))for(n in e)c.call(e,n)&&this.attribute(n,e[n]);else i(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new r(this,e,""):null!=t&&(this.attribs[e]=new r(this,e,t));return this},a.prototype.removeAttribute=function(e){var t,r;if(null==e)throw Error("Missing attribute name. "+this.debugInfo());if(e=o(e),Array.isArray(e))for(t=0,r=e.length;r>t;t++)delete this.attribs[e[t]];else delete this.attribs[e];return this},a.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},a.prototype.att=function(e,t){return this.attribute(e,t)},a.prototype.a=function(e,t){return this.attribute(e,t)},a.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},a.prototype.setAttribute=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},a.prototype.setAttributeNode=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.removeAttributeNode=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagName=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getAttributeNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setAttributeNS=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.removeAttributeNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getAttributeNodeNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setAttributeNodeNS=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagNameNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},a.prototype.hasAttributeNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},a.prototype.setIdAttributeNS=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.setIdAttributeNode=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagName=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByTagNameNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.getElementsByClassName=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.isEqualNode=function(e){var t,r,n;if(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,n=this.attribs.length-1;0>n?r>=n:n>=r;t=0>n?--r:++r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},a}(XMLNode)}()})),XMLCharacterData=createCommonjsModule((function(e){var t;t={}.hasOwnProperty,e.exports=function(e){function r(e){r.__super__.constructor.call(this,e),this.value=""}return function(e,r){for(var n in r)t.call(r,n)&&(e[n]=r[n]);function o(){this.constructor=e}o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype}(r,e),Object.defineProperty(r.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.substringData=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.appendData=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.insertData=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.deleteData=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceData=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(e){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},r}(XMLNode)})),XMLCData=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},n}(XMLCharacterData)}()})),XMLComment=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},n}(XMLCharacterData)}()})),XMLDeclaration=createCommonjsModule((function(e){!function(){var t,r,n={}.hasOwnProperty;r=Utility.isObject,t=NodeType$1,e.exports=function(e){function o(e,n,i,s){var a;o.__super__.constructor.call(this,e),r(n)&&(n=(a=n).version,i=a.encoding,s=a.standalone),n||(n="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(n),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(o,e),o.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},o}(XMLNode)}()})),XMLDTDAttList=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r,o,i,s,a){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing DTD element name. "+this.debugInfo());if(null==o)throw Error("Missing DTD attribute name. "+this.debugInfo(r));if(!i)throw Error("Missing DTD attribute type. "+this.debugInfo(r));if(!s)throw Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(a&&!s.match(/^(#FIXED|#DEFAULT)$/))throw Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(i),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=s}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},n}(XMLNode)}()})),XMLDTDEntity=createCommonjsModule((function(e){!function(){var t,r,n={}.hasOwnProperty;r=Utility.isObject,t=NodeType$1,e.exports=function(e){function o(e,n,i,s){if(o.__super__.constructor.call(this,e),null==i)throw Error("Missing DTD entity name. "+this.debugInfo(i));if(null==s)throw Error("Missing DTD entity value. "+this.debugInfo(i));if(this.pe=!!n,this.name=this.stringify.name(i),this.type=t.EntityDeclaration,r(s)){if(!s.pubID&&!s.sysID)throw Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(i));if(s.pubID&&!s.sysID)throw Error("System identifier is required for a public external entity. "+this.debugInfo(i));if(this.internal=!1,null!=s.pubID&&(this.pubID=this.stringify.dtdPubID(s.pubID)),null!=s.sysID&&(this.sysID=this.stringify.dtdSysID(s.sysID)),null!=s.nData&&(this.nData=this.stringify.dtdNData(s.nData)),this.pe&&this.nData)throw Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(i))}else this.value=this.stringify.dtdEntityValue(s),this.internal=!0}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(o,e),Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(o.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(o.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlVersion",{get:function(){return null}}),o.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},o}(XMLNode)}()})),XMLDTDElement=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r,o){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},n}(XMLNode)}()})),XMLDTDNotation=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r,o){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing DTD notation name. "+this.debugInfo(r));if(!o.pubID&&!o.sysID)throw Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},n}(XMLNode)}()})),XMLDocType=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a,c={}.hasOwnProperty;a=Utility.isObject,t=NodeType$1,r=XMLDTDAttList,o=XMLDTDEntity,n=XMLDTDElement,i=XMLDTDNotation,s=XMLNamedNodeMap,e.exports=function(e){function u(e,r,n){var o,i,s,c,l,d;if(u.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(i=0,s=(c=e.children).length;s>i;i++)if((o=c[i]).type===t.Element){this.name=o.name;break}this.documentObject=e,a(r)&&(r=(l=r).pubID,n=l.sysID),null==n&&(n=(d=[r,n])[0],r=d[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(u,e),Object.defineProperty(u.prototype,"entities",{get:function(){var e,r,n,o,i;for(o={},r=0,n=(i=this.children).length;n>r;r++)(e=i[r]).type!==t.EntityDeclaration||e.pe||(o[e.name]=e);return new s(o)}}),Object.defineProperty(u.prototype,"notations",{get:function(){var e,r,n,o,i;for(o={},r=0,n=(i=this.children).length;n>r;r++)(e=i[r]).type===t.NotationDeclaration&&(o[e.name]=e);return new s(o)}}),Object.defineProperty(u.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(u.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(u.prototype,"internalSubset",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),u.prototype.element=function(e,t){var r;return r=new n(this,e,t),this.children.push(r),this},u.prototype.attList=function(e,t,n,o,i){var s;return s=new r(this,e,t,n,o,i),this.children.push(s),this},u.prototype.entity=function(e,t){var r;return r=new o(this,!1,e,t),this.children.push(r),this},u.prototype.pEntity=function(e,t){var r;return r=new o(this,!0,e,t),this.children.push(r),this},u.prototype.notation=function(e,t){var r;return r=new i(this,e,t),this.children.push(r),this},u.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},u.prototype.ele=function(e,t){return this.element(e,t)},u.prototype.att=function(e,t,r,n,o){return this.attList(e,t,r,n,o)},u.prototype.ent=function(e,t){return this.entity(e,t)},u.prototype.pent=function(e,t){return this.pEntity(e,t)},u.prototype.not=function(e,t){return this.notation(e,t)},u.prototype.up=function(){return this.root()||this.documentObject},u.prototype.isEqualNode=function(e){return!!u.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&(e.name===this.name&&(e.publicId===this.publicId&&e.systemId===this.systemId))},u}(XMLNode)}()})),XMLRaw=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},n}(XMLNode)}()})),XMLText=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var e,t,r;for(r="",t=this.previousSibling;t;)r=t.data+r,t=t.previousSibling;for(r+=this.data,e=this.nextSibling;e;)r+=e.data,e=e.nextSibling;return r}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},n.prototype.splitText=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},n}(XMLCharacterData)}()})),XMLProcessingInstruction=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e,r,o){if(n.__super__.constructor.call(this,e),null==r)throw Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},n}(XMLCharacterData)}()})),XMLDummy=createCommonjsModule((function(e){!function(){var t,r={}.hasOwnProperty;t=NodeType$1,e.exports=function(e){function n(e){n.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return""},n}(XMLNode)}()})),XMLNodeList=createCommonjsModule((function(e){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()})),DocumentPosition=createCommonjsModule((function(e){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}})),XMLNode=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a,c,u,l,d,p,h,f,m,y,g,b={}.hasOwnProperty;y=(g=Utility).isObject,m=g.isFunction,f=g.isEmpty,h=g.getValue,c=null,n=null,o=null,i=null,s=null,d=null,p=null,l=null,a=null,r=null,u=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,c||(c=XMLElement,n=XMLCData,o=XMLComment,i=XMLDeclaration,s=XMLDocType,d=XMLRaw,p=XMLText,l=XMLProcessingInstruction,a=XMLDummy,r=NodeType$1,u=XMLNodeList,t=DocumentPosition)}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,n,o,i;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(i="",t=0,n=(o=this.children).length;n>t;t++)(e=o[t]).textContent&&(i+=e.textContent);return i}return null},set:function(e){throw Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,r,n,o;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),o=[],t=0,r=(n=this.children).length;r>t;t++)o.push(n[t].setParent(this));return o},e.prototype.element=function(e,t,r){var n,o,i,s,a,c,u,l,d;if(a=null,null===t&&null==r&&(t=[{},null][0],r=null),null==t&&(t={}),t=h(t),y(t)||(r=(l=[t,r])[0],t=l[1]),null!=e&&(e=h(e)),Array.isArray(e))for(o=0,c=e.length;c>o;o++)a=this.element(e[o]);else if(m(e))a=this.element(e.apply());else if(y(e)){for(s in e)if(b.call(e,s))if(m(d=e[s])&&(d=d.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))a=this.attribute(s.substr(this.stringify.convertAttKey.length),d);else if(!this.options.separateArrayItems&&Array.isArray(d)&&f(d))a=this.dummy();else if(y(d)&&f(d))a=this.element(s);else if(this.options.keepNullNodes||null!=d)if(!this.options.separateArrayItems&&Array.isArray(d))for(i=0,u=d.length;u>i;i++)(n={})[s]=d[i],a=this.element(n);else y(d)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?a=this.element(d):(a=this.element(s)).element(d):a=this.element(s,d);else a=this.dummy()}else a=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r):this.dummy();if(null==a)throw Error("Could not create any elements with: "+e+". "+this.debugInfo());return a},e.prototype.insertBefore=function(e,t,r){var n,o,i,s,a;if(null!=e?e.type:void 0)return s=t,(i=e).setParent(this),s?(o=children.indexOf(s),a=children.splice(o),children.push(i),Array.prototype.push.apply(children,a)):children.push(i),i;if(this.isRoot)throw Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),a=this.parent.children.splice(o),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,a),n},e.prototype.insertAfter=function(e,t,r){var n,o,i;if(this.isRoot)throw Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),i=this.parent.children.splice(o+1),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,i),n},e.prototype.remove=function(){var e;if(this.isRoot)throw Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,r){var n,o;return null!=e&&(e=h(e)),t||(t={}),t=h(t),y(t)||(r=(o=[t,r])[0],t=o[1]),n=new c(this,e,t),null!=r&&n.text(r),this.children.push(n),n},e.prototype.text=function(e){var t;return y(e)&&this.element(e),t=new p(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new o(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.commentAfter=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.raw=function(e){var t;return t=new d(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new a(this)},e.prototype.instruction=function(e,t){var r,n,o,i;if(null!=e&&(e=h(e)),null!=t&&(t=h(t)),Array.isArray(e))for(o=0,i=e.length;i>o;o++)this.instruction(r=e[o]);else if(y(e))for(r in e)b.call(e,r)&&this.instruction(r,e[r]);else m(t)&&(t=t.apply()),n=new l(this,e,t),this.children.push(n);return this},e.prototype.instructionBefore=function(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.instructionAfter=function(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.declaration=function(e,t,n){var o,s;return o=this.document(),s=new i(o,e,t,n),0===o.children.length?o.children.unshift(s):o.children[0].type===r.Declaration?o.children[0]=s:o.children.unshift(s),o.root()||o},e.prototype.dtd=function(e,t){var n,o,i,a,c,u,l,d,p;for(n=this.document(),o=new s(n,e,t),i=a=0,u=(d=n.children).length;u>a;i=++a)if(d[i].type===r.DocType)return n.children[i]=o,o;for(i=c=0,l=(p=n.children).length;l>c;i=++c)if(p[i].isRoot)return n.children.splice(i,0,o),o;return n.children.push(o),o},e.prototype.up=function(){if(this.isRoot)throw Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===r.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===r.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if(1>(e=this.parent.children.indexOf(this)))throw Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,r;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,r){return this.element(e,t,r)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var r,n;return(r=this)===e?0:this.document()!==e.document()?(n=t.Disconnected|t.ImplementationSpecific,.5>Math.random()?n|=t.Preceding:n|=t.Following,n):r.isAncestor(e)?t.Contains|t.Preceding:r.isDescendant(e)?t.Contains|t.Following:r.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,r,n;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=r=0,n=this.children.length-1;0>n?r>=n:n>=r;t=0>n?--r:++r)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,r,n,o;for(r=0,n=(o=this.children).length;n>r;r++){if(e===(t=o[r]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&r>t},e.prototype.isFollowing=function(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t>r},e.prototype.treePosition=function(e){var t,r;return r=0,t=!1,this.foreachTreeNode(this.document(),(function(n){if(r++,!t&&n===e)return t=!0})),t?r:-1},e.prototype.foreachTreeNode=function(e,t){var r,n,o,i,s;for(e||(e=this.document()),n=0,o=(i=e.children).length;o>n;n++){if(s=t(r=i[n]))return s;if(s=this.foreachTreeNode(r,t))return s}},e}()}()})),XMLStringifier=createCommonjsModule((function(e){var t,r;t=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty,e.exports=function(){function e(e){var n,o;for(n in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),o=e.stringify||{})r.call(o,n)&&(this[n]=o[n])}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t;if(this.options.noValidation)return e;if("1.0"===this.options.version){if(t=e.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw Error("Invalid character in string: "+e+" at index "+t.index)}else if("1.1"===this.options.version&&(t=e.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw Error("Invalid character in string: "+e+" at index "+t.index);return e},e.prototype.assertLegalName=function(e){if(this.options.noValidation)return e;if(this.assertLegalChar(e),!e.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw Error("Invalid character in name");return e},e.prototype.textEscape=function(e){return this.options.noValidation?e:e.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},e.prototype.attEscape=function(e){return this.options.noValidation?e:e.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},e}()})),WriterState=createCommonjsModule((function(e){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}})),XMLWriterBase=createCommonjsModule((function(e){!function(){var t,r,n,o={}.hasOwnProperty;n=Utility.assign,t=NodeType$1,r=WriterState,e.exports=function(){function e(e){var t,r,n;for(t in e||(e={}),this.options=e,r=e.writer||{})o.call(r,t)&&(n=r[t],this["_"+t]=this[t],this[t]=n)}return e.prototype.filterOptions=function(e){var t,o,i,s,a,c,u,l;return e||(e={}),e=n({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(o=e.indent)?o:"  ",t.newline=null!=(i=e.newline)?i:"\n",t.offset=null!=(s=e.offset)?s:0,t.dontPrettyTextNodes=null!=(a=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?a:0,t.spaceBeforeSlash=null!=(u=null!=(l=e.spaceBeforeSlash)?l:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=r.None,t},e.prototype.indent=function(e,t,r){var n;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(n=(r||0)+t.offset+1)>0?Array(n).join(t.indent):""},e.prototype.endline=function(e,t,r){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,r){var n;return this.openAttribute(e,t,r),n=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,r),n},e.prototype.cdata=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<![CDATA[",t.state=r.InsideTag,o+=e.value,t.state=r.CloseTag,o+="]]>"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.comment=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"\x3c!-- ",t.state=r.InsideTag,o+=e.value,t.state=r.CloseTag,o+=" --\x3e"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.declaration=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<?xml",t.state=r.InsideTag,o+=' version="'+e.version+'"',null!=e.encoding&&(o+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(o+=' standalone="'+e.standalone+'"'),t.state=r.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.docType=function(e,t,n){var o,i,s,a;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,s=this.indent(e,t,n),s+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?s+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(s+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(s+=" [",s+=this.endline(e,t,n),t.state=r.InsideTag,o=0,i=(a=e.children).length;i>o;o++)s+=this.writeChildNode(a[o],t,n+1);t.state=r.CloseTag,s+="]"}return t.state=r.CloseTag,s+=t.spaceBeforeSlash+">",s+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),s},e.prototype.element=function(e,n,i){var s,a,c,u,l,d,p,h,f,m,y,g,b;for(h in i||(i=0),f=!1,m="",this.openNode(e,n,i),n.state=r.OpenTag,m+=this.indent(e,n,i)+"<"+e.name,y=e.attribs)o.call(y,h)&&(m+=this.attribute(y[h],n,i));if(c=0===(a=e.children.length)?null:e.children[0],0===a||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(m+=">",n.state=r.CloseTag,m+="</"+e.name+">"+this.endline(e,n,i)):(n.state=r.CloseTag,m+=n.spaceBeforeSlash+"/>"+this.endline(e,n,i));else if(!n.pretty||1!==a||c.type!==t.Text&&c.type!==t.Raw||null==c.value){if(n.dontPrettyTextNodes)for(u=0,d=(g=e.children).length;d>u;u++)if(((s=g[u]).type===t.Text||s.type===t.Raw)&&null!=s.value){n.suppressPrettyCount++,f=!0;break}for(m+=">"+this.endline(e,n,i),n.state=r.InsideTag,l=0,p=(b=e.children).length;p>l;l++)m+=this.writeChildNode(s=b[l],n,i+1);n.state=r.CloseTag,m+=this.indent(e,n,i)+"</"+e.name+">",f&&n.suppressPrettyCount--,m+=this.endline(e,n,i),n.state=r.None}else m+=">",n.state=r.InsideTag,n.suppressPrettyCount++,f=!0,m+=this.writeChildNode(c,n,i+1),n.suppressPrettyCount--,f=!1,n.state=r.CloseTag,m+="</"+e.name+">"+this.endline(e,n,i);return this.closeNode(e,n,i),m},e.prototype.writeChildNode=function(e,r,n){switch(e.type){case t.CData:return this.cdata(e,r,n);case t.Comment:return this.comment(e,r,n);case t.Element:return this.element(e,r,n);case t.Raw:return this.raw(e,r,n);case t.Text:return this.text(e,r,n);case t.ProcessingInstruction:return this.processingInstruction(e,r,n);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,n);case t.DocType:return this.docType(e,r,n);case t.AttributeDeclaration:return this.dtdAttList(e,r,n);case t.ElementDeclaration:return this.dtdElement(e,r,n);case t.EntityDeclaration:return this.dtdEntity(e,r,n);case t.NotationDeclaration:return this.dtdNotation(e,r,n);default:throw Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<?",t.state=r.InsideTag,o+=e.target,e.value&&(o+=" "+e.value),t.state=r.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.raw=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n),t.state=r.InsideTag,o+=e.value,t.state=r.CloseTag,o+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.text=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n),t.state=r.InsideTag,o+=e.value,t.state=r.CloseTag,o+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.dtdAttList=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<!ATTLIST",t.state=r.InsideTag,o+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(o+=" "+e.defaultValueType),e.defaultValue&&(o+=' "'+e.defaultValue+'"'),t.state=r.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.dtdElement=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<!ELEMENT",t.state=r.InsideTag,o+=" "+e.name+" "+e.value,t.state=r.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.dtdEntity=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<!ENTITY",t.state=r.InsideTag,e.pe&&(o+=" %"),o+=" "+e.name,e.value?o+=' "'+e.value+'"':(e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.nData&&(o+=" NDATA "+e.nData)),t.state=r.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.dtdNotation=function(e,t,n){var o;return this.openNode(e,t,n),t.state=r.OpenTag,o=this.indent(e,t,n)+"<!NOTATION",t.state=r.InsideTag,o+=" "+e.name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?o+=' PUBLIC "'+e.pubID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),t.state=r.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),o},e.prototype.openNode=function(e,t,r){},e.prototype.closeNode=function(e,t,r){},e.prototype.openAttribute=function(e,t,r){},e.prototype.closeAttribute=function(e,t,r){},e}()}()})),XMLStringWriter=createCommonjsModule((function(e){var t;t={}.hasOwnProperty,e.exports=function(e){function r(e){r.__super__.constructor.call(this,e)}return function(e,r){for(var n in r)t.call(r,n)&&(e[n]=r[n]);function o(){this.constructor=e}o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype}(r,e),r.prototype.document=function(e,t){var r,n,o,i;for(t=this.filterOptions(t),o="",r=0,n=(i=e.children).length;n>r;r++)o+=this.writeChildNode(i[r],t,0);return t.pretty&&o.slice(-t.newline.length)===t.newline&&(o=o.slice(0,-t.newline.length)),o},r}(XMLWriterBase)})),XMLDocument=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a={}.hasOwnProperty;s=Utility.isPlainObject,n=XMLDOMImplementation,r=XMLDOMConfiguration,t=NodeType$1,i=XMLStringifier,o=XMLStringWriter,e.exports=function(e){function c(e){c.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new r,e||(e={}),e.writer||(e.writer=new o),this.options=e,this.stringify=new i(e)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(c,e),Object.defineProperty(c.prototype,"implementation",{value:new n}),Object.defineProperty(c.prototype,"doctype",{get:function(){var e,r,n,o;for(r=0,n=(o=this.children).length;n>r;r++)if((e=o[r]).type===t.DocType)return e;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(e){var t;return t={},e?s(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},c.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},c.prototype.createElement=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(e,t){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(e){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(e,t,r){throw Error("This DOM method is not implemented."+this.debugInfo())},c}(XMLNode)}()})),XMLDocumentCB=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a,c,u,l,d,p,h,f,m,y,g,b,_,v,C,T,E,k={}.hasOwnProperty;C=(E=Utility).isObject,v=E.isFunction,T=E.isPlainObject,_=E.getValue,t=NodeType$1,p=XMLDocument,h=XMLElement,o=XMLCData,i=XMLComment,m=XMLRaw,b=XMLText,f=XMLProcessingInstruction,l=XMLDeclaration,d=XMLDocType,s=XMLDTDAttList,c=XMLDTDEntity,a=XMLDTDElement,u=XMLDTDNotation,n=XMLAttribute,g=XMLStringifier,y=XMLStringWriter,r=WriterState,e.exports=function(){function e(e,r,n){var o;this.name="?xml",this.type=t.Document,e||(e={}),o={},e.writer?T(e.writer)&&(o=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new g(e),this.onDataCallback=r||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var r,n,o,i,s,a,c;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(r in n={},a=e.attribs)k.call(a,r)&&(n[r]=a[r].value);this.node(e.name,n);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(i=0,s=(c=e.children).length;s>i;i++)this.createChildNode(o=c[i]),o.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,r){var n;if(null==e)throw Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=_(e),null==t&&(t={}),t=_(t),C(t)||(r=(n=[t,r])[0],t=n[1]),this.currentNode=new h(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},e.prototype.element=function(e,r,n){var o,i,s,a,c,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||C(e)||v(e))for(a=this.options.noValidation,this.options.noValidation=!0,(u=new p(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=a,i=0,s=(c=u.children).length;s>i;i++)this.createChildNode(o=c[i]),o.type===t.Element&&this.up();else this.node(e,r,n);return this},e.prototype.attribute=function(e,t){var r;if(!this.currentNode||this.currentNode.children)throw Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=_(e)),C(e))for(r in e)k.call(e,r)&&this.attribute(r,e[r]);else v(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new n(this,e,""):null!=t&&(this.currentNode.attribs[e]=new n(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new b(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new m(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var r,n,o,i;if(this.openCurrent(),null!=e&&(e=_(e)),null!=t&&(t=_(t)),Array.isArray(e))for(r=0,o=e.length;o>r;r++)this.instruction(n=e[r]);else if(C(e))for(n in e)k.call(e,n)&&this.instruction(n,e[n]);else v(t)&&(t=t.apply()),i=new f(this,e,t),this.onData(this.writer.processingInstruction(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,r){var n;if(this.openCurrent(),this.documentStarted)throw Error("declaration() must be the first node.");return n=new l(this,e,t,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,r){if(this.openCurrent(),null==e)throw Error("Missing root node name.");if(this.root)throw Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var r;return this.openCurrent(),r=new a(this,e,t),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,r,n,o){var i;return this.openCurrent(),i=new s(this,e,t,r,n,o),this.onData(this.writer.dtdAttList(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var r;return this.openCurrent(),r=new c(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var r;return this.openCurrent(),r=new c(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var r;return this.openCurrent(),r=new u(this,e,t),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(0>this.currentLevel)throw Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var n,o,i;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),n="",e.type===t.Element){for(o in this.writerOptions.state=r.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,i=e.attribs)k.call(i,o)&&(n+=this.writer.attribute(i[o],this.writerOptions,this.currentLevel));n+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.children?(n+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,n+=">"),n+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(n,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var n;if(!e.isClosed)return n="",this.writerOptions.state=r.CloseTag,n=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(n,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.dtd=function(e,t,r){return this.doctype(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}()})),XMLStreamWriter=createCommonjsModule((function(e){!function(){var t,r,n={}.hasOwnProperty;t=NodeType$1,r=WriterState,e.exports=function(e){function o(e,t){this.stream=e,o.__super__.constructor.call(this,t)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(o,e),o.prototype.endline=function(e,t,n){return e.isLastRootNode&&t.state===r.CloseTag?"":o.__super__.endline.call(this,e,t,n)},o.prototype.document=function(e,t){var r,n,o,i,s,a,c,u;for(r=n=0,i=(a=e.children).length;i>n;r=++n)a[r].isLastRootNode=r===e.children.length-1;for(t=this.filterOptions(t),u=[],o=0,s=(c=e.children).length;s>o;o++)u.push(this.writeChildNode(c[o],t,0));return u},o.prototype.attribute=function(e,t,r){return this.stream.write(o.__super__.attribute.call(this,e,t,r))},o.prototype.cdata=function(e,t,r){return this.stream.write(o.__super__.cdata.call(this,e,t,r))},o.prototype.comment=function(e,t,r){return this.stream.write(o.__super__.comment.call(this,e,t,r))},o.prototype.declaration=function(e,t,r){return this.stream.write(o.__super__.declaration.call(this,e,t,r))},o.prototype.docType=function(e,t,n){var o,i,s;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,this.stream.write(this.indent(e,t,n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,n)),t.state=r.InsideTag,o=0,i=(s=e.children).length;i>o;o++)this.writeChildNode(s[o],t,n+1);t.state=r.CloseTag,this.stream.write("]")}return t.state=r.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,n)),t.state=r.None,this.closeNode(e,t,n)},o.prototype.element=function(e,o,i){var s,a,c,u,l,d,p;for(l in i||(i=0),this.openNode(e,o,i),o.state=r.OpenTag,this.stream.write(this.indent(e,o,i)+"<"+e.name),d=e.attribs)n.call(d,l)&&this.attribute(d[l],o,i);if(a=0===(s=e.children.length)?null:e.children[0],0===s||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))o.allowEmpty?(this.stream.write(">"),o.state=r.CloseTag,this.stream.write("</"+e.name+">")):(o.state=r.CloseTag,this.stream.write(o.spaceBeforeSlash+"/>"));else if(!o.pretty||1!==s||a.type!==t.Text&&a.type!==t.Raw||null==a.value){for(this.stream.write(">"+this.endline(e,o,i)),o.state=r.InsideTag,c=0,u=(p=e.children).length;u>c;c++)this.writeChildNode(p[c],o,i+1);o.state=r.CloseTag,this.stream.write(this.indent(e,o,i)+"</"+e.name+">")}else this.stream.write(">"),o.state=r.InsideTag,o.suppressPrettyCount++,this.writeChildNode(a,o,i+1),o.suppressPrettyCount--,o.state=r.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,o,i)),o.state=r.None,this.closeNode(e,o,i)},o.prototype.processingInstruction=function(e,t,r){return this.stream.write(o.__super__.processingInstruction.call(this,e,t,r))},o.prototype.raw=function(e,t,r){return this.stream.write(o.__super__.raw.call(this,e,t,r))},o.prototype.text=function(e,t,r){return this.stream.write(o.__super__.text.call(this,e,t,r))},o.prototype.dtdAttList=function(e,t,r){return this.stream.write(o.__super__.dtdAttList.call(this,e,t,r))},o.prototype.dtdElement=function(e,t,r){return this.stream.write(o.__super__.dtdElement.call(this,e,t,r))},o.prototype.dtdEntity=function(e,t,r){return this.stream.write(o.__super__.dtdEntity.call(this,e,t,r))},o.prototype.dtdNotation=function(e,t,r){return this.stream.write(o.__super__.dtdNotation.call(this,e,t,r))},o}(XMLWriterBase)}()})),lib=createCommonjsModule((function(e){!function(){var t,r,n,o,i,s,a,c,u,l;c=(l=Utility).assign,u=l.isFunction,n=XMLDOMImplementation,o=XMLDocument,i=XMLDocumentCB,a=XMLStringWriter,s=XMLStreamWriter,t=NodeType$1,r=WriterState,e.exports.create=function(e,t,r,n){var i,s;if(null==e)throw Error("Root element needs a name.");return n=c({},t,r,n),s=(i=new o(n)).element(e),n.headless||(i.declaration(n),null==n.pubID&&null==n.sysID||i.dtd(n)),s},e.exports.begin=function(e,t,r){var n;return u(e)&&(t=(n=[e,t])[0],r=n[1],e={}),t?new i(e,t,r):new o(e)},e.exports.stringWriter=function(e){return new a(e)},e.exports.streamWriter=function(e,t){return new s(e,t)},e.exports.implementation=new n,e.exports.nodeType=t,e.exports.writerState=r}()})),builder=createCommonjsModule((function(e,t){!function(){var e,r,n,o,i,s={}.hasOwnProperty;e=lib,r=defaults.defaults,o=function(e){return!("string"!=typeof e||0>e.indexOf("&")&&0>e.indexOf(">")&&0>e.indexOf("<"))},i=function(e){return"<![CDATA["+n(e)+"]]>"},n=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,n;for(t in this.options={},n=r[.2])s.call(n,t)&&(this.options[t]=n[t]);for(t in e)s.call(e,t)&&(this.options[t]=e[t])}return t.prototype.buildObject=function(t){var n,a,c,u,l,d;return n=this.options.attrkey,a=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===r[.2].rootName?t=t[l=Object.keys(t)[0]]:l=this.options.rootName,d=this,c=function(e,t){var r,u,l,p,h;if("object"!=typeof t)d.options.cdata&&o(t)?e.raw(i(t)):e.txt(t);else if(Array.isArray(t)){for(p in t)if(s.call(t,p))for(h in u=t[p])l=u[h],e=c(e.ele(h),l).up()}else for(h in t)if(s.call(t,h))if(u=t[h],h===n){if("object"==typeof u)for(r in u)e=e.att(r,u[r])}else if(h===a)e=d.options.cdata&&o(u)?e.raw(i(u)):e.txt(u);else if(Array.isArray(u))for(p in u)s.call(u,p)&&(e="string"==typeof(l=u[p])?d.options.cdata&&o(l)?e.ele(h).raw(i(l)).up():e.ele(h,l).up():c(e.ele(h),l).up());else"object"==typeof u?e=c(e.ele(h),u).up():"string"==typeof u&&d.options.cdata&&o(u)?e=e.ele(h).raw(i(u)).up():(null==u&&(u=""),e=e.ele(h,""+u).up());return e},u=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(u,t).end(this.options.renderOpts)},t}()}()})),byteLength_1=byteLength,toByteArray_1=toByteArray,fromByteArray_1=fromByteArray,lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;len>i;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[1];return 3*(t[0]+r)/4-r}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){var t,r,n=getLens(e),o=n[0],i=n[1],s=new Arr(_byteLength(e,o,i)),a=0,c=i>0?o-4:o;for(r=0;c>r;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===i&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,s[a++]=255&t),1===i&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n=[],o=t;r>o;o+=3)n.push(tripletToBase64((e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2])));return n.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,o=[],i=16383,s=0,a=r-n;a>s;s+=i)o.push(encodeChunk(e,s,s+i>a?a:s+i));return 1===n?o.push(lookup[(t=e[r-1])>>2]+lookup[t<<4&63]+"=="):2===n&&o.push(lookup[(t=(e[r-2]<<8)+e[r-1])>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"="),o.join("")}revLookup[45]=62,revLookup[95]=63;var base64Js={byteLength:byteLength_1,toByteArray:toByteArray_1,fromByteArray:fromByteArray_1},read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?o-1:0,p=r?-1:1,h=e[t+d];for(d+=p,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=256*i+e[t+d],d+=p,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=p,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=u}return(h?-1:1)*s*Math.pow(2,i-n)},write=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,p=23===o?5.960464477539062e-8:0,h=n?0:i-1,f=n?1:-1,m=0>t||0===t&&0>1/t?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,s=l):(1>t*(c=Math.pow(2,-(s=Math.floor(Math.log(t)/Math.LN2))))&&(s--,c*=2),2>(t+=1>s+d?p*Math.pow(2,1-d):p/c)*c||(s++,c/=2),l>s+d?1>s+d?(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0):(a=(t*c-1)*Math.pow(2,o),s+=d):(a=0,s=l));o>=8;e[r+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+h]=255&s,h+=f,s/=256,u-=8);e[r+h-f]|=128*m},ieee754={read:read,write:write},buffer$1=createCommonjsModule((function(e,t){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=i,t.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},t.INSPECT_MAX_BYTES=50;var n=2147483647;function o(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,i.prototype),t}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=o(r),s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(L(e,Uint8Array)){var t=new Uint8Array(e);return l(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer))return l(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return l(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return i.from(n,t,r);var s=function(e){if(i.isBuffer(e)){var t=0|d(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||U(e.length)?o(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return a(e),o(0>e?0:0|d(e))}function u(e){for(var t=0>e.length?0:0|d(e.length),r=o(t),n=0;t>n;n+=1)r[n]=255&e[n];return r}function l(e,t,r){if(0>t||t>e.byteLength)throw new RangeError('"offset" is outside of buffer bounds');if(t+(r||0)>e.byteLength)throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,i.prototype),n}function d(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(e).length;default:if(o)return n?-1:M(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,r){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if((t>>>=0)>=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return w(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function f(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:-2147483648>r&&(r=-2147483648),U(r=+r)&&(r=o?0:e.length-1),0>r&&(r=e.length+r),e.length>r){if(0>r){if(!o)return-1;r=0}}else{if(o)return-1;r=e.length-1}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,o){var i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(i=r;a>i;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){for(var d=!0,p=0;c>p;p++)if(u(e,i+p)!==u(t,p)){d=!1;break}if(d)return i}return-1}function g(e,t,r,n){var o=e.length-(r=Number(r)||0);n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var s=0;n>s;++s){var a=parseInt(t.substr(2*s,2),16);if(U(a))return s;e[r+s]=a}return s}function b(e,t,r,n){return j(M(t,e.length-r),e,r,n)}function _(e,t,r,n){return j(function(e){for(var t=[],r=0;e.length>r;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r,n){return j(P(t),e,r,n)}function C(e,t,r,n){return j(function(e,t){for(var r,n,o=[],i=0;e.length>i&&0<=(t-=2);++i)n=(r=e.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return base64Js.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;r>o;){var i,s,a,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(r>=o+d)switch(d){case 1:128>u&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:s=e[o+2],128==(192&(i=e[o+1]))&&128==(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s)>2047&&(55296>c||c>57343)&&(l=c);break;case 4:s=e[o+2],a=e[o+3],128==(192&(i=e[o+1]))&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&1114112>c&&(l=c)}null===l?(l=65533,d=1):l>65535&&(n.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=d}return function(e){var t=e.length;if(k>=t)return String.fromCharCode.apply(String,e);var r="",n=0;for(;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}t.kMaxLength=n,(i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||void 0===console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,t,r){return function(e,t,r){return a(e),e>0&&void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},i.allocUnsafe=function(e){return c(e)},i.allocUnsafeSlow=function(e){return c(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(L(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);s>o;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return n>r?-1:r>n?1:0},i.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;e.length>r;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;e.length>r;++r){var s=e[r];if(L(s,Uint8Array))o+s.length>n.length?i.from(s).copy(n,o):Uint8Array.prototype.set.call(n,s,o);else{if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o)}o+=s.length}return n},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)f(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):h.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(e,t,r,n,o){if(L(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),0>t||r>e.length||0>n||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),c=Math.min(s,a),u=this.slice(n,o),l=e.slice(t,r),d=0;c>d;++d)if(u[d]!==l[d]){s=u[d],a=l[d];break}return a>s?-1:s>a?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return v(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function w(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;++o)n+=String.fromCharCode(127&e[o]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;++o)n+=String.fromCharCode(e[o]);return n}function S(e,t,r){var n=e.length;t&&t>=0||(t=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=t;r>i;++i)o+=q[e[i]];return o}function O(e,t,r){for(var n=e.slice(t,r),o="",i=0;n.length-1>i;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function A(e,t,r){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||s>t)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function B(e,t,r,n,o){return t=+t,r>>>=0,o||N(e,0,r,4),ieee754.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||N(e,0,r,8),ieee754.write(e,t,r,n,52,8),r+8}i.prototype.slice=function(e,t){var r=this.length;0>(e=~~e)?0>(e+=r)&&(e=0):e>r&&(e=r),0>(t=void 0===t?r:~~t)?0>(t+=r)&&(t=0):t>r&&(t=r),e>t&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return(o*=128)>n||(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return(o*=128)>i||(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),ieee754.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),ieee754.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),ieee754.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),ieee754.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)0>e&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)0>e&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e.length>t||(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),n-r>e.length-t&&(n=e.length-t+r);var o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&128>o||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(0>t||t>this.length||r>this.length)throw new RangeError("Out of range index");if(t>=r)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;r>s;++s)this[s]=e;else{var a=i.isBuffer(e)?e:i.from(e,n),c=a.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;r-t>s;++s)this[s+t]=a[s%c]}return this};var I=/[^+/0-9A-Za-z-_]/g;function M(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;n>s;++s){if((r=e.charCodeAt(s))>55295&&57344>r){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(56320>r){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,128>r){if(0>(t-=1))break;i.push(r)}else if(2048>r){if(0>(t-=2))break;i.push(r>>6|192,63&r|128)}else if(65536>r){if(0>(t-=3))break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(r>=1114112)throw Error("Invalid code point");if(0>(t-=4))break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function P(e){return base64Js.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(I,"")).length)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){for(var o=0;n>o&&(o+r<t.length&&o<e.length);++o)t[o+r]=e[o];return o}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}var q=function(){for(var e="0123456789abcdef",t=Array(256),r=0;16>r;++r)for(var n=16*r,o=0;16>o;++o)t[n+o]=e[r]+e[o];return t}()})),safeBuffer=createCommonjsModule((function(e,t){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=buffer$1.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=buffer$1:(n(buffer$1,t),t.Buffer=o),o.prototype=Object.create(r.prototype),n(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=r(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return buffer$1.SlowBuffer(e)}})),Buffer$3=safeBuffer.Buffer,isEncoding=Buffer$3.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(Buffer$3.isEncoding===isEncoding||!isEncoding(e)))throw Error("Unknown encoding: "+e);return t||e}var StringDecoder_1=StringDecoder;function StringDecoder(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$3.allocUnsafe(t)}function utf8CheckByte(e){return e>127?e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2:0}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(r>n)return 0;var o=utf8CheckByte(t[n]);return 0>o?--n<r||-2===o?0:0>(o=utf8CheckByte(t[n]))?--n<r||-2===o||0>(o=utf8CheckByte(t[n]))?0:(o>0&&(2===o?o=0:e.lastNeed=o-3),o):(o>0&&(e.lastNeed=o-2),o):(o>0&&(e.lastNeed=o-1),o)}function utf8CheckExtraBytes(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e);return void 0!==r?r:this.lastNeed>e.length?(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal))}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&56319>=n)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}StringDecoder.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return e.length>r?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(e.length>=this.lastNeed)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var string_decoder={StringDecoder:StringDecoder_1},sax$1=createCommonjsModule((function(e,t){!function(e){e.parser=function(e,t){return new n(e,t)},e.SAXParser=n,e.SAXStream=i,e.createStream=function(e,t){return new i(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function n(t,o){if(!(this instanceof n))return new n(t,o);var i=this;!function(e){for(var t=0,n=12;n>t;t++)e[r[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=o||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=C.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=Object.create(i.strictEntities?e.XML_ENTITIES:e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(c)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),E(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),n.prototype={end:function(){O(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return S(n,"Cannot write after close. Assign an onready handler.");if(null===t)return O(n);"object"==typeof t&&(t=""+t);var o=0,i="";for(;i=j(t,o++),n.c=i,i;)switch(n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++),n.state){case C.BEGIN:if(n.state=C.BEGIN_WHITESPACE,"\ufeff"===i)continue;P(n,i);continue;case C.BEGIN_WHITESPACE:P(n,i);continue;case C.TEXT:if(n.sawRoot&&!n.closedRoot){for(var s=o-1;i&&"<"!==i&&"&"!==i;)(i=j(t,o++))&&n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(s,o-1)}"<"!==i||n.sawRoot&&n.closedRoot&&!n.strict?(h(i)||n.sawRoot&&!n.closedRoot||A(n,"Text data outside of root node."),"&"===i?n.state=C.TEXT_ENTITY:n.textNode+=i):(n.state=C.OPEN_WAKA,n.startTagPosition=n.position);continue;case C.SCRIPT:"<"===i?n.state=C.SCRIPT_ENDING:n.script+=i;continue;case C.SCRIPT_ENDING:"/"===i?n.state=C.CLOSE_TAG:(n.script+="<"+i,n.state=C.SCRIPT);continue;case C.OPEN_WAKA:if("!"===i)n.state=C.SGML_DECL,n.sgmlDecl="";else if(h(i));else if(y(u,i))n.state=C.OPEN_TAG,n.tagName=i;else if("/"===i)n.state=C.CLOSE_TAG,n.tagName="";else if("?"===i)n.state=C.PROC_INST,n.procInstName=n.procInstBody="";else{if(A(n,"Unencoded <"),n.position>n.startTagPosition+1)i=Array(n.position-n.startTagPosition).join(" ")+i;n.textNode+="<"+i,n.state=C.TEXT}continue;case C.SGML_DECL:"[CDATA["===(n.sgmlDecl+i).toUpperCase()?(k(n,"onopencdata"),n.state=C.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+i==="--"?(n.state=C.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+i).toUpperCase()?(n.state=C.DOCTYPE,(n.doctype||n.sawRoot)&&A(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===i?(k(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=C.TEXT):f(i)?(n.state=C.SGML_DECL_QUOTED,n.sgmlDecl+=i):n.sgmlDecl+=i;continue;case C.SGML_DECL_QUOTED:i===n.q&&(n.state=C.SGML_DECL,n.q=""),n.sgmlDecl+=i;continue;case C.DOCTYPE:">"===i?(n.state=C.TEXT,k(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=i,"["===i?n.state=C.DOCTYPE_DTD:f(i)&&(n.state=C.DOCTYPE_QUOTED,n.q=i));continue;case C.DOCTYPE_QUOTED:n.doctype+=i,i===n.q&&(n.q="",n.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:n.doctype+=i,"]"===i?n.state=C.DOCTYPE:f(i)&&(n.state=C.DOCTYPE_DTD_QUOTED,n.q=i);continue;case C.DOCTYPE_DTD_QUOTED:n.doctype+=i,i===n.q&&(n.state=C.DOCTYPE_DTD,n.q="");continue;case C.COMMENT:"-"===i?n.state=C.COMMENT_ENDING:n.comment+=i;continue;case C.COMMENT_ENDING:"-"===i?(n.state=C.COMMENT_ENDED,n.comment=x(n.opt,n.comment),n.comment&&k(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+i,n.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==i?(A(n,"Malformed comment"),n.comment+="--"+i,n.state=C.COMMENT):n.state=C.TEXT;continue;case C.CDATA:"]"===i?n.state=C.CDATA_ENDING:n.cdata+=i;continue;case C.CDATA_ENDING:"]"===i?n.state=C.CDATA_ENDING_2:(n.cdata+="]"+i,n.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===i?(n.cdata&&k(n,"oncdata",n.cdata),k(n,"onclosecdata"),n.cdata="",n.state=C.TEXT):"]"===i?n.cdata+="]":(n.cdata+="]]"+i,n.state=C.CDATA);continue;case C.PROC_INST:"?"===i?n.state=C.PROC_INST_ENDING:h(i)?n.state=C.PROC_INST_BODY:n.procInstName+=i;continue;case C.PROC_INST_BODY:if(!n.procInstBody&&h(i))continue;"?"===i?n.state=C.PROC_INST_ENDING:n.procInstBody+=i;continue;case C.PROC_INST_ENDING:">"===i?(k(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=C.TEXT):(n.procInstBody+="?"+i,n.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:y(l,i)?n.tagName+=i:(R(n),">"===i?D(n):"/"===i?n.state=C.OPEN_TAG_SLASH:(h(i)||A(n,"Invalid character in tag name"),n.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===i?(D(n,!0),I(n)):(A(n,"Forward-slash in opening tag not followed by >"),n.state=C.ATTRIB);continue;case C.ATTRIB:if(h(i))continue;">"===i?D(n):"/"===i?n.state=C.OPEN_TAG_SLASH:y(u,i)?(n.attribName=i,n.attribValue="",n.state=C.ATTRIB_NAME):A(n,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===i?n.state=C.ATTRIB_VALUE:">"===i?(A(n,"Attribute without value"),n.attribValue=n.attribName,B(n),D(n)):h(i)?n.state=C.ATTRIB_NAME_SAW_WHITE:y(l,i)?n.attribName+=i:A(n,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===i)n.state=C.ATTRIB_VALUE;else{if(h(i))continue;A(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",k(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===i?D(n):y(u,i)?(n.attribName=i,n.state=C.ATTRIB_NAME):(A(n,"Invalid attribute name"),n.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(h(i))continue;f(i)?(n.q=i,n.state=C.ATTRIB_VALUE_QUOTED):(A(n,"Unquoted attribute value"),n.state=C.ATTRIB_VALUE_UNQUOTED,n.attribValue=i);continue;case C.ATTRIB_VALUE_QUOTED:if(i!==n.q){"&"===i?n.state=C.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=i;continue}B(n),n.q="",n.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:h(i)?n.state=C.ATTRIB:">"===i?D(n):"/"===i?n.state=C.OPEN_TAG_SLASH:y(u,i)?(A(n,"No whitespace between attributes"),n.attribName=i,n.attribValue="",n.state=C.ATTRIB_NAME):A(n,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!m(i)){"&"===i?n.state=C.ATTRIB_VALUE_ENTITY_U:n.attribValue+=i;continue}B(n),">"===i?D(n):n.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(n.tagName)">"===i?I(n):y(l,i)?n.tagName+=i:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=C.SCRIPT):(h(i)||A(n,"Invalid tagname in closing tag"),n.state=C.CLOSE_TAG_SAW_WHITE);else{if(h(i))continue;g(u,i)?n.script?(n.script+="</"+i,n.state=C.SCRIPT):A(n,"Invalid tagname in closing tag."):n.tagName=i}continue;case C.CLOSE_TAG_SAW_WHITE:if(h(i))continue;">"===i?I(n):A(n,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var a,c;switch(n.state){case C.TEXT_ENTITY:a=C.TEXT,c="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:a=C.ATTRIB_VALUE_QUOTED,c="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:a=C.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===i?(n[c]+=M(n),n.entity="",n.state=a):y(n.entity.length?p:d,i)?n.entity+=i:(A(n,"Invalid character in entity name"),n[c]+="&"+n.entity+i,n.entity="",n.state=a);continue;default:throw Error(n,"Unknown state: "+n.state)}n.bufferCheckPosition>n.position||function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),o=0,i=0;12>i;i++){var s=t[r[i]].length;if(s>n)switch(r[i]){case"textNode":w(t);break;case"cdata":k(t,"oncdata",t.cdata),t.cdata="";break;case"script":k(t,"onscript",t.script),t.script="";break;default:S(t,"Max buffer length exceeded: "+r[i])}o=Math.max(o,s)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-o+t.position}(n);return n}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(e){w(e),""!==e.cdata&&(k(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(k(e,"onscript",e.script),e.script="")}(this)}};try{t=require$$0__default.default.Stream}catch(e){t=function(){}}var o=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function i(e,r){if(!(this instanceof i))return new i(e,r);t.apply(this),this._parser=new n(e,r),this.writable=!0,this.readable=!0;var s=this;this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(e){s.emit("error",e),s._parser.error=null},this._decoder=null,o.forEach((function(e){Object.defineProperty(s,"on"+e,{get:function(){return s._parser["on"+e]},set:function(t){if(!t)return s.removeAllListeners(e),s._parser["on"+e]=t,t;s.on(e,t)},enumerable:!0,configurable:!1})}))}(i.prototype=Object.create(t.prototype,{constructor:{value:i}})).write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder)this._decoder=new(0,string_decoder.StringDecoder)("utf8");e=this._decoder.write(e)}return this._parser.write(""+e),this.emit("data",e),!0},i.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},i.prototype.on=function(e,r){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),t.prototype.on.call(n,e,r)};var s="http://www.w3.org/XML/1998/namespace",a="http://www.w3.org/2000/xmlns/",c={xml:s,xmlns:a},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function h(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function f(e){return'"'===e||"'"===e}function m(e){return">"===e||h(e)}function y(e,t){return e.test(t)}function g(e,t){return!y(e,t)}var b,_,v,C=0;for(var T in e.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t];e.ENTITIES[t]="number"==typeof r?String.fromCharCode(r):r})),e.STATE)e.STATE[e.STATE[T]]=T;function E(e,t,r){e[t]&&e[t](r)}function k(e,t,r){e.textNode&&w(e),E(e,t,r)}function w(e){e.textNode=x(e.opt,e.textNode),e.textNode&&E(e,"ontext",e.textNode),e.textNode=""}function x(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function S(e,t){return w(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),e.error=t=Error(t),E(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&A(e,"Unclosed root tag"),e.state!==C.BEGIN&&e.state!==C.BEGIN_WHITESPACE&&e.state!==C.TEXT&&S(e,"Unexpected end"),w(e),e.c="",e.closed=!0,E(e,"onend"),n.call(e,e.strict,e.opt),e}function A(e,t){if("object"!=typeof e||!(e instanceof n))throw Error("bad call to strictFail");e.strict&&S(e,t)}function R(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,k(e,"onopentagstart",r)}function N(e,t){var r=0>e.indexOf(":")?["",e]:e.split(":"),n=r[0],o=r[1];return t&&"xmlns"===e&&(n="xmlns",o=""),{prefix:n,local:o}}function B(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=N(e.attribName,!0),r=t.local;if("xmlns"===t.prefix)if("xml"===r&&e.attribValue!==s)A(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==a)A(e,"xmlns: prefix must be bound to "+a+"\nActual: "+e.attribValue);else{var n=e.tag,o=e.tags[e.tags.length-1]||e;n.ns===o.ns&&(n.ns=Object.create(o.ns)),n.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,k(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function D(e,t){if(e.opt.xmlns){var r=e.tag,n=N(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(A(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix),r.ns&&(e.tags[e.tags.length-1]||e).ns!==r.ns&&Object.keys(r.ns).forEach((function(t){k(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var o=0,i=e.attribList.length;i>o;o++){var s=e.attribList[o],a=s[0],c=s[1],u=N(a,!0),l=u.prefix,d=""===l?"":r.ns[l]||"",p={name:a,value:c,prefix:l,local:u.local,uri:d};l&&"xmlns"!==l&&!d&&(A(e,"Unbound namespace prefix: "+JSON.stringify(l)),p.uri=l),e.tag.attributes[a]=p,k(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),k(e,"onopentag",e.tag),t||(e.state=e.noscript||"script"!==e.tagName.toLowerCase()?C.TEXT:C.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function I(e){if(!e.tagName)return A(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=C.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=C.SCRIPT);k(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;){if(e.tags[t].name===n)break;A(e,"Unexpected close tag")}if(0>t)return A(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=C.TEXT);e.tagName=r;for(var o=e.tags.length;o-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,k(e,"onclosetag",e.tagName);var s={};for(var a in i.ns)s[a]=i.ns[a];e.opt.xmlns&&i.ns!==(e.tags[e.tags.length-1]||e).ns&&Object.keys(i.ns).forEach((function(t){k(e,"onclosenamespace",{prefix:t,uri:i.ns[t]})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=C.TEXT}function M(e){var t,r=e.entity,n=r.toLowerCase(),o="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),o=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),o=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||o.toLowerCase()!==r?(A(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function P(e,t){"<"===t?(e.state=C.OPEN_WAKA,e.startTagPosition=e.position):h(t)||(A(e,"Non-whitespace before first tag."),e.textNode=t,e.state=C.TEXT)}function j(e,t){var r="";return e.length>t&&(r=e.charAt(t)),r}C=e.STATE,String.fromCodePoint||(b=String.fromCharCode,_=Math.floor,v=function(){var e=16384,t=[],r=-1,n=arguments.length;if(!n)return"";for(var o="";++r<n;){var i=Number(arguments[r]);if(!isFinite(i)||0>i||i>1114111||_(i)!==i)throw RangeError("Invalid code point: "+i);i>65535?t.push(55296+((i-=65536)>>10),i%1024+56320):t.push(i),(r+1===n||t.length>e)&&(o+=b.apply(null,t),t.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:v,configurable:!0,writable:!0}):String.fromCodePoint=v)}(t)})),bom=createCommonjsModule((function(e,t){t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}})),processors=createCommonjsModule((function(e,t){var r;r=/(?!xmlns)^.*:/,t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(e){return e.replace(r,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}})),parser=createCommonjsModule((function(e,t){!function(){var e,r,n,o,i,s,a,c=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;s=sax$1,e=bom,i=processors,a=require$$4__default.default.setImmediate,r=defaults.defaults,n=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},o=function(e,t,r){var n,o;for(n=0,o=e.length;o>n;n++)t=(0,e[n])(t,r);return t},t.Parser=function(l){function d(e){var n,o;if(this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(n in this.options={},o=r[.2])u.call(o,n)&&(this.options[n]=o[n]);for(n in e)u.call(e,n)&&(this.options[n]=e[n]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(i.normalize)),this.reset()}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(d,l),d.prototype.processAsync=function(){var e,t;try{return this.remaining.length>this.options.chunkSize?(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),a(this.processAsync)):(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close())}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},d.prototype.assignOrPush=function(e,t,r){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(r)):e[t]=this.options.explicitArray?[r]:r},d.prototype.reset=function(){var e,t,r,i,a;return this.removeAllListeners(),this.saxParser=s.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(a=this,function(e){if(a.saxParser.resume(),!a.saxParser.errThrown)return a.saxParser.errThrown=!0,a.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,i=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(r){return function(n){var s,a,c,l,d;if((c={})[t]="",!r.options.ignoreAttrs)for(s in d=n.attributes)u.call(d,s)&&(e in c||r.options.mergeAttrs||(c[e]={}),a=r.options.attrValueProcessors?o(r.options.attrValueProcessors,n.attributes[s],s):n.attributes[s],l=r.options.attrNameProcessors?o(r.options.attrNameProcessors,s):s,r.options.mergeAttrs?r.assignOrPush(c,l,a):c[e][l]=a);return c["#name"]=r.options.tagNameProcessors?o(r.options.tagNameProcessors,n.name):n.name,r.options.xmlns&&(c[r.options.xmlnskey]={uri:n.uri,local:n.local}),i.push(c)}}(this),this.saxParser.onclosetag=function(e){return function(){var r,s,a,c,l,d,p,h,f,m;if(d=i.pop(),l=d["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete d["#name"],!0===d.cdata&&(r=d.cdata,delete d.cdata),f=i[i.length-1],d[t].match(/^\s*$/)&&!r?(s=d[t],delete d[t]):(e.options.trim&&(d[t]=d[t].trim()),e.options.normalize&&(d[t]=d[t].replace(/\s{2,}/g," ").trim()),d[t]=e.options.valueProcessors?o(e.options.valueProcessors,d[t],l):d[t],1===Object.keys(d).length&&t in d&&!e.EXPLICIT_CHARKEY&&(d=d[t])),n(d)&&(d=""!==e.options.emptyTag?e.options.emptyTag:s),null!=e.options.validator&&(m="/"+function(){var e,t,r;for(r=[],e=0,t=i.length;t>e;e++)r.push((c=i[e])["#name"]);return r}().concat(l).join("/"),function(){try{d=e.options.validator(m,f&&f[l],d)}catch(t){return e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof d)if(e.options.preserveChildrenOrder){if(f){for(a in f[e.options.childkey]=f[e.options.childkey]||[],p={},d)u.call(d,a)&&(p[a]=d[a]);f[e.options.childkey].push(p),delete d["#name"],1===Object.keys(d).length&&t in d&&!e.EXPLICIT_CHARKEY&&(d=d[t])}}else c={},e.options.attrkey in d&&(c[e.options.attrkey]=d[e.options.attrkey],delete d[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in d&&(c[e.options.charkey]=d[e.options.charkey],delete d[e.options.charkey]),Object.getOwnPropertyNames(d).length>0&&(c[e.options.childkey]=d),d=c;return i.length>0?e.assignOrPush(f,l,d):(e.options.explicitRoot&&(h=d,(d={})[l]=h),e.resultObject=d,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),r=function(e){return function(r){var n,o;if(o=i[i.length-1])return o[t]+=r,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(o[e.options.childkey]=o[e.options.childkey]||[],(n={"#name":"__text__"})[t]=r,e.options.normalize&&(n[t]=n[t].replace(/\s{2,}/g," ").trim()),o[e.options.childkey].push(n)),o}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(e){var t;if(t=r(e))return t.cdata=!0}},d.prototype.parseString=function(t,r){var n;null!=r&&"function"==typeof r&&(this.on("end",(function(e){return this.reset(),r(null,e)})),this.on("error",(function(e){return this.reset(),r(e)})));try{return""===(t=""+t).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,a(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(n=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",n),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw n}},d.prototype.parseStringPromise=function(e){return new Promise((t=this,function(r,n){return t.parseString(e,(function(e,t){return e?n(e):r(t)}))}));var t},d}(require$$1__default.default),t.parseString=function(e,r,n){var o,i;return null!=n?("function"==typeof n&&(o=n),"object"==typeof r&&(i=r)):("function"==typeof r&&(o=r),i={}),new t.Parser(i).parseString(e,o)},t.parseStringPromise=function(e,r){var n;return"object"==typeof r&&(n=r),new t.Parser(n).parseStringPromise(e)}}()})),xml2js=createCommonjsModule((function(e,t){var r,n,o,i;i={}.hasOwnProperty,r=builder,n=parser,o=processors,t.defaults=defaults.defaults,t.processors=o,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,Error),t}(),t.Builder=r.Builder,t.Parser=n.Parser,t.parseString=n.parseString,t.parseStringPromise=n.parseStringPromise})),browser$1=noop$3,HttpsAgent=noop$3;function noop$3(){}browser$1.HttpsAgent=HttpsAgent;
/*!
	 * merge-descriptors
	 * Copyright(c) 2014 Jonathan Ong
	 * Copyright(c) 2015 Douglas Christopher Wilson
	 * MIT Licensed
	 */
var mergeDescriptors=merge,hasOwnProperty=Object.prototype.hasOwnProperty;function merge(e,t,r){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===r&&(r=!0),Object.getOwnPropertyNames(t).forEach((function(n){!r&&hasOwnProperty.call(e,n)||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var platform=createCommonjsModule((function(e,t){(function(){var r={function:!0,object:!0},n=r[typeof window]&&window||this,o=r.object&&t,i=r.object&&e&&!e.nodeType&&e,s=o&&i&&"object"==typeof commonjsGlobal&&commonjsGlobal;!s||s.global!==s&&s.window!==s&&s.self!==s||(n=s);var a=/\bOpera/,c=Object.prototype,u=c.hasOwnProperty,l=c.toString;function d(e){return(e+="").charAt(0).toUpperCase()+e.slice(1)}function p(e){return e=g(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:d(e)}function h(e,t){for(var r in e)u.call(e,r)&&t(e[r],r,e)}function f(e){return null==e?d(e):l.call(e).slice(8,-1)}function m(e){return(e+"").replace(/([ -])(?!$)/g,"$1?")}function y(e,t){var r=null;return function(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&9007199254740991>=n)for(;++r<n;)t(e[r],r,e);else h(e,t)}(e,(function(n,o){r=t(r,n,o,e)})),r}function g(e){return(e+"").replace(/^ +| +$/g,"")}var b=function e(t){var r=n,o=t&&"object"==typeof t&&"String"!=f(t);o&&(r=t,t=null);var i=r.navigator||{},s=i.userAgent||"";t||(t=s);var c,u,d=o?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(""+l),b="Object",_=o?b:"ScriptBridgingProxyObject",v=o?b:"Environment",C=o&&r.java?"JavaPackage":f(r.java),T=o?b:"RuntimeObject",E=/\bJava/.test(C)&&r.java,k=E&&f(r.environment)==v,w=E?"a":"",x=E?"b":"",S=r.document||{},O=r.operamini||r.opera,A=a.test(A=o&&O?O["[[Class]]"]:f(O))?A:O=null,R=t,N=[],B=null,D=t==s,I=D&&O&&"function"==typeof O.version&&O.version(),M=y([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,r){return e||RegExp("\\b"+(r.pattern||m(r))+"\\b","i").exec(t)&&(r.label||r)})),P=function(e){return y(e,(function(e,r){return e||RegExp("\\b"+(r.pattern||m(r))+"\\b","i").exec(t)&&(r.label||r)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),j=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),L=function(e){return y(e,(function(e,r,n){return e||(r[j]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(j)]||RegExp("\\b"+m(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),U=function(e){return y(e,(function(e,r){var n=r.pattern||m(r);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,r){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e+="",t&&r&&(e=e.replace(RegExp(t,"i"),r)),p(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,r.label||r)),e}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function q(e){return y(e,(function(e,r){var n=r.pattern||m(r);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=((r.label&&!RegExp(n,"i").test(r.label)?r.label:e)+"").split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=p(e[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function F(e){return y(e,(function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(M&&(M=[M]),/\bAndroid\b/.test(U)&&!j&&(c=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(j=g(c[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),L&&!j?j=q([L]):L&&j&&(j=j.replace(RegExp("^("+m(L)+")[-_.\\s]","i"),L+" ").replace(RegExp("^("+m(L)+")[-_.]?(\\w)","i"),L+" $2")),(c=/\bGoogle TV\b/.exec(j))&&(j=c[0]),/\bSimulator\b/i.test(t)&&(j=(j?j+" ":"")+"Simulator"),"Opera Mini"==P&&/\bOPiOS\b/.test(t)&&N.push("running in Turbo/Uncompressed mode"),"IE"==P&&/\blike iPhone OS\b/.test(t)?(L=(c=e(t.replace(/like iPhone OS/,""))).manufacturer,j=c.product):/^iP/.test(j)?(P||(P="Safari"),U="iOS"+((c=/ OS ([\d_]+)/i.exec(t))?" "+c[1].replace(/_/g,"."):"")):"Konqueror"==P&&/^Linux\b/i.test(U)?U="Kubuntu":L&&"Google"!=L&&(/Chrome/.test(P)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(j))||/\bAndroid\b/.test(U)&&/^Chrome/.test(P)&&/\bVersion\//i.test(t)?(P="Android Browser",U=/\bAndroid\b/.test(U)?U:"Android"):"Silk"==P?(/\bMobi/i.test(t)||(U="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&N.unshift("accelerated")):"UC Browser"==P&&/\bUCWEB\b/.test(t)?N.push("speed mode"):"PaleMoon"==P&&(c=/\bFirefox\/([\d.]+)\b/.exec(t))?N.push("identifying as Firefox "+c[1]):"Firefox"==P&&(c=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(U||(U="Firefox OS"),j||(j=c[1])):!P||(c=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(P))?(P&&!j&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(c+"/")+8))&&(P=null),(c=j||L||U)&&(j||L||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(U))&&(P=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(U)?U:c)+" Browser")):"Electron"==P&&(c=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&N.push("Chromium "+c),I||(I=F(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",m(P),"(?:Firefox|Minefield|NetFront)"])),(c=("iCab"==M&&parseFloat(I)>3?"WebKit":/\bOpera\b/.test(P)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(t)&&("Mac OS"==U?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(P)&&"NetFront")&&(M=[c]),"IE"==P&&(c=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(P+=" Mobile",U="Windows Phone "+(/\+$/.test(c)?c:c+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(P="IE Mobile",U="Windows Phone 8.x",N.unshift("desktop mode"),I||(I=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=P&&"Trident"==M&&(c=/\brv:([\d.]+)/.exec(t))&&(P&&N.push("identifying as "+P+(I?" "+I:"")),P="IE",I=c[1]),D){if(function(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}(r,"global"))if(E&&(R=(c=E.lang.System).getProperty("os.arch"),U=U||c.getProperty("os.name")+" "+c.getProperty("os.version")),k){try{I=r.require("ringo/engine").version.join("."),P="RingoJS"}catch(e){(c=r.system)&&c.global.system==r.system&&(P="Narwhal",U||(U=c[0].os||null))}P||(P="Rhino")}else"object"==typeof r.process&&!r.process.browser&&(c=r.process)&&("object"==typeof c.versions&&("string"==typeof c.versions.electron?(N.push("Node "+c.versions.node),P="Electron",I=c.versions.electron):"string"==typeof c.versions.nw&&(N.push("Chromium "+I,"Node "+c.versions.node),P="NW.js",I=c.versions.nw)),P||(P="Node.js",R=c.arch,U=c.platform,I=(I=/[\d.]+/.exec(c.version))?I[0]:null));else f(c=r.runtime)==_?(P="Adobe AIR",U=c.flash.system.Capabilities.os):f(c=r.phantom)==T?(P="PhantomJS",I=(c=c.version||null)&&c.major+"."+c.minor+"."+c.patch):"number"==typeof S.documentMode&&(c=/\bTrident\/(\d+)/i.exec(t))?((c=+c[1]+4)!=(I=[I,S.documentMode])[1]&&(N.push("IE "+I[1]+" mode"),M&&(M[1]=""),I[1]=c),I="IE"==P?I[1].toFixed(1)+"":I[0]):"number"==typeof S.documentMode&&/^(?:Chrome|Firefox)\b/.test(P)&&(N.push("masking as "+P+" "+I),P="IE",I="11.0",M=["Trident"],U="Windows");U=U&&p(U)}if(I&&(c=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(I)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(D&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(B=/b/i.test(c)?"beta":"alpha",I=I.replace(RegExp(c+"\\+?$"),"")+("beta"==B?x:w)+(/\d+\+?/.exec(c)||"")),"Fennec"==P||"Firefox"==P&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(U))P="Firefox Mobile";else if("Maxthon"==P&&I)I=I.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(j))"Xbox 360"==j&&(U=null),"Xbox 360"==j&&/\bIEMobile\b/.test(t)&&N.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(P)&&(!P||j||/Browser|Mobi/.test(P))||"Windows CE"!=U&&!/Mobi/i.test(t))if("IE"==P&&D)try{null===r.external&&N.unshift("platform preview")}catch(e){N.unshift("embedded")}else(/\bBlackBerry\b/.test(j)||/\bBB10\b/.test(t))&&(c=(RegExp(j.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||I)?(U=((c=[c,/BB10/.test(t)])[1]?(j=null,L="BlackBerry"):"Device Software")+" "+c[0],I=null):this!=h&&"Wii"!=j&&(D&&O||/Opera/.test(P)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==P&&/\bOS X (?:\d+\.){2,}/.test(U)||"IE"==P&&(U&&!/^Win/.test(U)&&I>5.5||/\bWindows XP\b/.test(U)&&I>8||8==I&&!/\bTrident\b/.test(t)))&&!a.test(c=e.call(h,t.replace(a,"")+";"))&&c.name&&(c="ing as "+c.name+((c=c.version)?" "+c:""),a.test(P)?(/\bIE\b/.test(c)&&"Mac OS"==U&&(U=null),c="identify"+c):(c="mask"+c,P=A?p(A.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(c)&&(U=null),D||(I=null)),M=["Presto"],N.push(c));else P+=" Mobile";(c=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(c=[parseFloat(c.replace(/\.(\d)$/,".0$1")),c],"Safari"==P&&"+"==c[1].slice(-1)?(P="WebKit Nightly",B="alpha",I=c[1].slice(0,-1)):I!=c[1]&&I!=(c[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(I=null),c[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36!=c[0]||537.36!=c[2]||28>parseFloat(c[1])||"WebKit"!=M||(M=["Blink"]),D&&(d||c[1])?(M&&(M[1]="like Chrome"),c=c[1]||(530>(c=c[0])?1:532>c?2:532.05>c?3:533>c?4:534.03>c?5:534.07>c?6:534.1>c?7:534.13>c?8:534.16>c?9:534.24>c?10:534.3>c?11:535.01>c?12:535.02>c?"13+":535.07>c?15:535.11>c?16:535.19>c?17:536.05>c?18:536.1>c?19:537.01>c?20:537.11>c?"21+":537.13>c?23:537.18>c?24:537.24>c?25:537.36>c?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),c=400>(c=c[0])?1:500>c?2:526>c?3:533>c?4:534>c?"4+":535>c?5:537>c?6:538>c?7:601>c?8:602>c?9:604>c?10:606>c?11:608>c?12:"12"),M&&(M[1]+=" "+(c+="number"==typeof c?".x":/[.+]/.test(c)?"":"+")),"Safari"!=P||I&&45>=parseInt(I)?"Chrome"==P&&/\bHeadlessChrome/i.test(t)&&N.unshift("headless"):I=c),"Opera"==P&&(c=/\bzbov|zvav$/.exec(U))?(P+=" ",N.unshift("desktop mode"),"zvav"==c?(P+="Mini",I=null):P+="Mobile",U=U.replace(RegExp(" *"+c+"$"),"")):"Safari"==P&&/\bChrome\b/.exec(M&&M[1])?(N.unshift("desktop mode"),P="Chrome Mobile",I=null,/\bOS X\b/.test(U)?(L="Apple",U="iOS 4.3+"):U=null):/\bSRWare Iron\b/.test(P)&&!I&&(I=F("Chrome")),I&&0==I.indexOf(c=/[\d.]+$/.exec(U))&&t.indexOf("/"+c+"-")>-1&&(U=g(U.replace(c,""))),U&&-1!=U.indexOf(P)&&!RegExp(P+" OS").test(U)&&(U=U.replace(RegExp(" *"+m(P)+" *"),"")),M&&!/\b(?:Avant|Nook)\b/.test(P)&&(/Browser|Lunascape|Maxthon/.test(P)||"Safari"!=P&&/^iOS/.test(U)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(P)&&M[1])&&(c=M[M.length-1])&&N.push(c),N.length&&(N=["("+N.join("; ")+")"]),L&&j&&0>j.indexOf(L)&&N.push("on "+L),j&&N.push((/^on /.test(N[N.length-1])?"":"on ")+j),U&&(c=/ ([\d.+]+)$/.exec(U),u=c&&"/"==U.charAt(U.length-c[0].length-1),U={architecture:32,family:c&&!u?U.replace(c[0],""):U,version:c?c[1]:null,toString:function(){var e=this.version;return this.family+(e&&!u?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(c=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(U&&(U.architecture=64,U.family=U.family.replace(RegExp(" *"+c),"")),P&&(/\bWOW64\b/i.test(t)||D&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&N.unshift("32-bit")):U&&/^OS X/.test(U.family)&&"Chrome"==P&&parseFloat(I)>=39&&(U.architecture=64),t||(t=null);var $={};return $.description=t,$.layout=M&&M[0],$.manufacturer=L,$.name=P,$.prerelease=B,$.product=j,$.ua=t,$.version=P&&I,$.os=U||{architecture:null,family:null,version:null,toString:function(){return"null"}},$.parse=e,$.toString=function(){return this.description||""},$.version&&N.unshift(I),$.name&&N.unshift(P),U&&P&&(U!=(U+"").split(" ")[0]||U!=P.split(" ")[0]&&!j)&&N.push(j?"("+U+")":"on "+U),N.length&&($.description=N.join(" ")),$}();o&&i?h(b,(function(e,t){o[t]=e})):n.platform=b}).call(commonjsGlobal)})),matchHtmlRegExp=/["'&<>]/,escapeHtml_1=escapeHtml;
/*!
	 * escape-html
	 * Copyright(c) 2012-2013 TJ Holowaychuk
	 * Copyright(c) 2015 Andreas Lubbe
	 * Copyright(c) 2015 Tiancheng "Timothy" Gu
	 * MIT Licensed
	 */function escapeHtml(e){var t,r=""+e,n=matchHtmlRegExp.exec(r);if(!n)return r;var o="",i=0,s=0;for(i=n.index;r.length>i;i++){switch(r.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}s!==i&&(o+=r.substring(s,i)),s=i+1,o+=t}return s!==i?o+r.substring(s,i):o}var _encodeURIComponent=function(e){try{return encodeURIComponent(e)}catch(t){return e}},_escape=escapeHtml_1,timestamp=function(e){if(e){var t=e;return"string"==typeof t&&(t=Number(t)),10===(e+"").length&&(t*=1e3),new Date(t)}return Math.round(Date.now()/1e3)},utility={encodeURIComponent:_encodeURIComponent,escape:_escape,timestamp:timestamp},s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d,ms=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse$1(e);if("number"===r&&isFinite(e))return t.long?fmtLong(e):fmtShort(e);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$1(e){if(100>=(e+="").length){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(e){var t=Math.abs(e);return d>t?h>t?m>t?s>t?e+"ms":Math.round(e/s)+"s":Math.round(e/m)+"m":Math.round(e/h)+"h":Math.round(e/d)+"d"}function fmtLong(e){var t=Math.abs(e);return d>t?h>t?m>t?s>t?e+" ms":plural(e,t,s,"second"):plural(e,t,m,"minute"):plural(e,t,h,"hour"):plural(e,t,d,"day")}function plural(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}var humanizeMs=function(e){if("number"==typeof e)return e;var t=ms(e);if(void 0===t){var r=Error(util__default.default.format("humanize-ms(%j) result undefined",e));console.warn(r.stack)}return t},xhr=createCommonjsModule((function(e,t){var r=debug$2(),n=0,o=2147483638,i=/^https?:\/\//i;function s(e,t){return void 0===e?t:e}function a(e,t){return function(r,n,o){if(r)return t(r);e({data:n,status:o.statusCode,headers:o.headers,res:o})}}t.TIMEOUTS=[humanizeMs("300s"),humanizeMs("300s")];var c=["json","text"];t.request=function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),"function"==typeof n?t.requestWithCallback(e,r,n):new Promise((function(n,o){t.requestWithCallback(e,r,a(n,o))}))},t.requestWithCallback=function(e,a,u){if(!e||"string"!=typeof e&&"object"!=typeof e){var l=util__default.default.format("expect request url to be a string or a http request options, but got %j",e);throw Error(l)}2===arguments.length&&"function"==typeof a&&(u=a,a=null),o>n||(n=0);var d=++n;(a=a||{}).requestUrls=a.requestUrls||[];var p={requestId:d,url:e,args:a,ctx:a.ctx};a.emitter&&a.emitter.emit("request",p),a.timeout=a.timeout||t.TIMEOUTS,a.maxRedirects=a.maxRedirects||10,a.streaming=a.streaming||a.customResponse;var h,f=Date.now();"string"==typeof e?(i.test(e)||(e="http://"+e),h=urlutil__default.default.parse(e)):h=e;var m=(a.type||a.method||h.method||"GET").toUpperCase(),y=h.port||80,g=http__default.default,b=s(a.agent,t.agent),_=a.fixJSONCtlChars;"https:"===h.protocol&&(g=https__default.default,b=s(a.httpsAgent,t.httpsAgent),h.port||(y=443));var v={host:h.hostname||h.host||"localhost",path:h.path||"/",method:m,port:y,agent:b,headers:a.headers||{},lookup:a.lookup};Array.isArray(a.timeout)?v.requestTimeout=a.timeout[a.timeout.length-1]:void 0!==a.timeout&&(v.requestTimeout=a.timeout);for(var C=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","secureOptions"],T=0;C.length>T;T++){var E=C[T];a.hasOwnProperty(E)&&(v[E]=a[E])}!1!==v.rejectUnauthorized||v.hasOwnProperty("secureOptions")||(v.secureOptions=require$$1__default$1.default.SSL_OP_NO_TLSv1_2);var k=a.auth||h.auth;k&&(v.auth=k);var w=a.content||a.data,x="GET"===m||"HEAD"===m||a.dataAsQueryString;if(!a.content&&w&&"string"!=typeof w&&!Buffer.isBuffer(w))if(x)w=a.nestedQuerystring?qs.stringify(w):querystring.stringify(w);else{var S=v.headers["Content-Type"]||v.headers["content-type"];S||(v.headers["Content-Type"]=S="json"===a.contentType?"application/json":"application/x-www-form-urlencoded"),w="application/json"===parseContentType(S).type?JSON.stringify(w):a.nestedQuerystring?qs.stringify(w):querystring.stringify(w)}x&&w&&(v.path+=(h.query?"&":"?")+w,w=null);var O=0;if(w){var A=w.length;Buffer.isBuffer(w)||(A=Buffer.byteLength(w)),O=v.headers["Content-Length"]=A}"json"===a.dataType&&(v.headers.Accept="application/json"),"function"==typeof a.beforeRequest&&a.beforeRequest(v);var R=null,N=null,B=null,D=!1,I=!1,M=0,P=-1,j=!1,L="",U="",q=null;function F(){R&&(clearTimeout(R),R=null)}function $(){N&&(clearTimeout(N),N=null)}function H(n,o,i){if($(),!u)return console.warn("[urllib:warn] [%s] [%s] [worker:%s] %s %s callback twice!!!",Date(),d,process.pid,v.method,e),void(n&&console.warn("[urllib:warn] [%s] [%s] [worker:%s] %s: %s\nstack: %s",Date(),d,process.pid,n.name,n.message,n.stack));var s=u;u=null;var c={};if(i&&(P=i.statusCode,c=i.headers),401===P&&c["www-authenticate"]&&(!a.headers||!a.headers.Authorization)&&a.digestAuth){var l=c["www-authenticate"];if(l.indexOf("Digest ")>=0)return a.headers=a.headers||{},a.headers.Authorization=digestAuthHeader(v.method,v.path,l,a.digestAuth),r("Request#%d %s: auth with digest header: %s",d,e,a.headers.Authorization),i.headers["set-cookie"]&&(a.headers.Cookie=i.headers["set-cookie"].join(";")),t.requestWithCallback(e,a,s)}var h=Date.now()-f;q&&(q.contentDownload=h);var m={status:P,statusCode:P,headers:c,size:M,aborted:j,rt:h,keepAliveSocket:I,data:o,requestUrls:a.requestUrls,timing:q,remoteAddress:L,remotePort:U};if(n){var y="";b&&"function"==typeof b.getCurrentStatus&&(y=", agent status: "+JSON.stringify(b.getCurrentStatus())),n.message+=", "+v.method+" "+e+" "+P+" (connected: "+D+", keepalive socket: "+I+y+")\nheaders: "+JSON.stringify(c),n.data=o,n.path=v.path,n.status=P,n.headers=c,n.res=m}s(n,o,a.streaming?i:m),a.emitter&&(p.url=e,p.socket=X&&X.connection,p.options=v,p.size=O,a.emitter.emit("response",{requestId:d,error:n,ctx:a.ctx,req:p,res:m}))}function z(r){var n=null;if(a.followRedirect&&statuses.redirect[r.statusCode]){a._followRedirectCount=(a._followRedirectCount||0)+1;var o=r.headers.location;if(o){if(a.maxRedirects>=a._followRedirectCount){var s=a.formatRedirectUrl?a.formatRedirectUrl(e,o):urlutil__default.default.resolve(e,o);$(),a.headers&&a.headers.Host&&i.test(o)&&(a.headers.Host=null);var c=u;return u=null,t.requestWithCallback(s,a,c),{redirect:!0,error:null}}(n=Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+e)).name="MaxRedirectError"}else(n=Error("Got statusCode "+r.statusCode+" but cannot resolve next location from headers")).name="FollowRedirectError"}return{redirect:!1,error:n}}function K(e,t,r){return r(null,t,e.headers["content-encoding"])}a.timing&&(q={queuing:0,dnslookup:0,connected:0,requestSent:0,waiting:0,contentDownload:0}),a.gzip&&(v.headers["Accept-Encoding"]||v.headers["accept-encoding"]||(v.headers["Accept-Encoding"]="gzip"));var G,V,X,W=a.writeStream;function Y(t){var n;if(q&&(q.waiting=Date.now()-f),r("Request#%d %s `req response` event emit: status %d, headers: %j",d,e,t.statusCode,t.headers),a.streaming)return(n=z(t)).redirect?void t.resume():n.error?(t.resume(),H(n.error,null,t)):H(null,null,t);if(t.on("close",(function(){})),t.on("error",(function(){})),t.on("aborted",(function(){j=!0})),W)return(n=z(t)).redirect?void t.resume():n.error?(t.resume(),W.end(),H(n.error,null,t)):(!1===a.consumeWriteStream?t.on("end",H.bind(null,null,null,t)):isNode010||isNode012?first([[W,"close"],[t,"aborted"]],(function(e,r,n){H(B||null,null,t)})):W.on("close",(function(){H(B||null,null,t)})),t.pipe(W));var o=[];t.on("data",(function(t){r("Request#%d %s: `res data` event emit, size %d",d,e,t.length),M+=t.length,o.push(t)})),t.on("end",(function(){var n=Buffer.concat(o,M);if(r("Request#%d %s: `res end` event emit, total size %d, _dumped: %s",d,e,M,t._dumped),B)return H(B,n,t);var i=z(t);if(i.error)return H(i.error,n,t);i.redirect||K(t,n,(function(e,r,o){if(e)return H(e,n,t);if(!o&&c.indexOf(a.dataType)>=0){try{r=decodeBodyByCharset(r,t)}catch(e){return H(null,r,t)}if("json"===a.dataType)if(0===M)r=null;else{var i=parseJSON(r,_);i.error?e=i.error:r=i.data}}H(e,r,t)}))}))}function Q(){R=setTimeout((function(){R=null,-1===P&&(P=-2);var t="Connect timeout for "+G+"ms",n="ConnectionTimeoutError";X.socket||(n="SocketAssignTimeoutError",t+=", working sockets is full"),(B=Error(t)).name=n,B.requestId=d,r("ConnectTimeout: Request#%d %s %s: %s, connected: %s",d,e,B.name,t,D),Z()}),G)}function J(){N=setTimeout((function(){N=null;var t="Response timeout for "+V+"ms";(B=Error(t)).name="ResponseTimeoutError",B.requestId=d,r("ResponseTimeout: Request#%d %s %s: %s, connected: %s",d,e,B.name,t,D),Z()}),V)}a.requestUrls.push(e),Array.isArray(a.timeout)?(G=humanizeMs(a.timeout[0]),V=humanizeMs(a.timeout[1])):G=V=humanizeMs(a.timeout),v.mode=a.mode?a.mode:"";try{X=g.request(v,Y)}catch(e){return H(e)}function Z(){X.socket||(B.noSocket=!0,H(B)),X.abort()}return"undefined"==typeof window?Q():X.on("requestTimeout",(function(){-1===P&&(P=-2);(B=Error("Connect timeout for "+G+"ms")).name="ConnectionTimeoutError",B.requestId=d,Z()})),q&&X.on("finish",(function(){q.requestSent=Date.now()-f})),X.once("socket",(function(e){if(q&&(q.queuing=Date.now()-f),isNode010&&e.socket&&(e=e.socket),"opening"===e.readyState)return e.once("lookup",(function(e,t,r){q&&(q.dnslookup=Date.now()-f),t&&(L=t)})),void e.once("connect",(function(){q&&(q.connected=Date.now()-f),F(),J(),D=!0,L||(L=e.remoteAddress),U=e.remotePort}));D=!0,I=!0,L||(L=e.remoteAddress),U=e.remotePort,F(),J()})),X.on("error",(function(t){"Error"!==t.name&&"TypeError"!==t.name||(t.name=D?"ResponseError":"RequestError"),t.message+=' (req "error")',r("Request#%d %s `req error` event emit, %s: %s",d,e,t.name,t.message),H(B||t)})),W&&W.once("error",(function(t){t.message+=' (writeStream "error")',B=t,r("Request#%d %s `writeStream error` event emit, %s: %s",d,e,t.name,t.message),Z()})),a.stream?(a.stream.pipe(X),a.stream.once("error",(function(t){t.message+=' (stream "error")',B=t,r("Request#%d %s `readStream error` event emit, %s: %s",d,e,t.name,t.message),Z()}))):X.end(w),X.requestId=d,X}})),_from="ali-oss",_id="ali-oss@6.15.0",_inBundle=!1,_integrity="sha1-FUonGfCh4uWjChoPWA+5koGRH6M=",_location="/ali-oss",_phantomChildren={},_requested={type:"tag",registry:!0,raw:"ali-oss",name:"ali-oss",escapedName:"ali-oss",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy=["#USER","/"],_resolved="http://nexus-op.vipthink.cn/repository/npm-group/ali-oss/-/ali-oss-6.15.0.tgz",_shasum="154a2719f0a1e2e5a30a1a0f580fb99281911fa3",_spec="ali-oss",_where="/Users/chen/doc/wandou/tslib-template",author={name:"dead_horse"},browser={"lib/client.js":"./dist/aliyun-oss-sdk.js",mime:"mime/lite",urllib:"./shims/xhr.js",utility:"./shims/utility.js",crypto:"./shims/crypto/crypto.js",debug:"./shims/debug",fs:!1,child_process:!1,"is-type-of":"./shims/is-type-of.js"},bugs={url:"https://github.com/aliyun/oss-nodejs-sdk/issues"},bundleDependencies=!1,dependencies={address:"^1.0.0",agentkeepalive:"^3.4.1",bowser:"^1.6.0","co-defer":"^1.0.0","copy-to":"^2.0.1",dateformat:"^2.0.0",debug:"^2.2.0",destroy:"^1.0.4","end-or-error":"^1.0.1","get-ready":"^1.0.0","humanize-ms":"^1.2.0","is-type-of":"^1.0.0","js-base64":"^2.5.2",jstoxml:"^0.2.3","merge-descriptors":"^1.0.1",mime:"^2.4.5","mz-modules":"^2.1.0",platform:"^1.3.1",pump:"^3.0.0","sdk-base":"^2.0.1","stream-http":"2.8.2","stream-wormhole":"^1.0.4",urllib:"^2.33.1",utility:"^1.8.0",xml2js:"^0.4.16"},deprecated=!1,description="aliyun oss(object storage service) node client",devDependencies={"@babel/core":"^7.11.6","@babel/plugin-transform-regenerator":"^7.10.4","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.5","@babel/runtime":"^7.11.2","@types/node":"^14.0.12","@typescript-eslint/eslint-plugin":"^2.34.0","@typescript-eslint/parser":"^2.34.0",aliasify:"^2.0.0",autod:"^2.6.1",babelify:"^10.0.0","beautify-benchmark":"^0.2.4",benchmark:"^2.1.1",bluebird:"^3.1.5",browserify:"^16.5.2","co-fs":"^1.2.0","co-mocha":"^1.2.1","core-js":"^3.6.5","crypto-js":"^3.1.9-1",dotenv:"^8.2.0",eslint:"^6.8.0","eslint-config-airbnb":"^16.1.0","eslint-config-ali":"^9.0.2","eslint-plugin-import":"^2.21.1","eslint-plugin-jsx-a11y":"^6.0.3","eslint-plugin-react":"^7.7.0",filereader:"^0.10.3","git-pre-hooks":"^1.2.0",immediate:"^3.3.0",karma:"^1.7.1","karma-browserify":"^5.1.1","karma-chrome-launcher":"^2.2.0","karma-firefox-launcher":"^1.0.1","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","lint-staged":"^9.5.0",mm:"^2.0.0",mocha:"^3.5.3",nyc:"^13.3.0","promise-polyfill":"^6.0.2",request:"^2.88.0",should:"^11.0.0",sinon:"^1.17.7",snyk:"1.454.0","standard-version":"^8.0.1","stream-equal":"^1.1.0","thunk-mocha":"^1.0.3",timemachine:"^0.3.0",typescript:"^3.9.5","uglify-js":"^2.8.29",watchify:"^3.9.0"},engines={node:">=8"},files=["lib","shims","dist"],homepage="https://github.com/aliyun/oss-nodejs-sdk",keywords=["oss","client","file","aliyun"],license="MIT",main="lib/client.js",name="ali-oss",repository={type:"git",url:"git://github.com/aliyun/oss-nodejs-sdk.git"},scripts={autod:"autod","browser-test":"npm run build-test && karma start","build-change-log":"standard-version","build-dist":"npm run tsc && node browser-build.js > dist/aliyun-oss-sdk.js && MINIFY=1 node browser-build.js > dist/aliyun-oss-sdk.min.js","build-test":"MINIFY=1 node browser-build.js > test/browser/build/aliyun-oss-sdk.min.js && node -r dotenv/config task/browser-test-build.js > test/browser/build/tests.js","detect-secrets":"node task/detect-secrets",jshint:"jshint .","lint-staged":"lint-staged",prepublish:"npm run snyk-protect","publish-to-cdn":"node publish.js","publish-to-npm":"node publish-npm-check.js && npm publish","snyk-protect":"snyk protect",test:"mocha -t 60000 -r thunk-mocha -r should -r dotenv/config test/node/*.test.js test/node/**/*.test.js","test-cov":"nyc --reporter=lcov node_modules/.bin/_mocha -t 60000 -r thunk-mocha -r should test/node/*.test.js test/node/**/*.test.js",tsc:"npm run tsc:clean && npm run tsc:build","tsc:build":"tsc -b tsconfig.json tsconfig-cjs.json","tsc:clean":"tsc -b tsconfig.json tsconfig-cjs.json --clean ","tsc:watch":"tsc -b tsconfig.json tsconfig-cjs.json --watch"},snyk=!0,version="6.15.0",pkg={_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_shasum:_shasum,_spec:_spec,_where:_where,author:author,browser:browser,bugs:bugs,bundleDependencies:bundleDependencies,dependencies:dependencies,deprecated:deprecated,description:description,devDependencies:devDependencies,engines:engines,files:files,"git-pre-hooks":{"pre-release":"npm run build-dist","post-release":["npm run publish-to-npm","npm run publish-to-cdn"],"pre-commit":"npm run lint-staged"},homepage:homepage,keywords:keywords,license:license,"lint-staged":{"**/!(dist)/*":["npm run detect-secrets --"]},main:main,name:name,repository:repository,scripts:scripts,snyk:snyk,version:version},bowser=createCommonjsModule((function(e){var t,r;t=commonjsGlobal,r=function(){var e=!0;function t(t){function r(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function n(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var o,s=r(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(t)&&/android/i.test(t),c=/nexus\s*[0-6]\s*/i.test(t),u=!c&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),d=/silk/i.test(t),p=/sailfish/i.test(t),h=/tizen/i.test(t),f=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),y=!m&&/windows/i.test(t),g=!s&&!d&&/macintosh/i.test(t),b=!a&&!p&&!h&&!f&&/linux/i.test(t),_=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),v=r(/version\/(\d+(\.\d+)?)/i),C=/tablet/i.test(t)&&!/tablet pc/i.test(t),T=!C&&/[^-]mobi/i.test(t),E=/xbox/i.test(t);/opera/i.test(t)?o={name:"Opera",opera:e,version:v||r(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?o={name:"Opera",opera:e,version:r(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||v}:/SamsungBrowser/i.test(t)?o={name:"Samsung Internet for Android",samsungBrowser:e,version:v||r(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?o={name:"NAVER Whale browser",whale:e,version:r(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?o={name:"MZ Browser",mzbrowser:e,version:r(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?o={name:"Opera Coast",coast:e,version:v||r(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?o={name:"Focus",focus:e,version:r(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?o={name:"Yandex Browser",yandexbrowser:e,version:v||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?o={name:"UC Browser",ucbrowser:e,version:r(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?o={name:"Maxthon",maxthon:e,version:r(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?o={name:"Epiphany",epiphany:e,version:r(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?o={name:"Puffin",puffin:e,version:r(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?o={name:"Sleipnir",sleipnir:e,version:r(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?o={name:"K-Meleon",kMeleon:e,version:r(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(o={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},_?(o.msedge=e,o.version=_):(o.msie=e,o.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:e,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?o={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?o={name:"Microsoft Edge",msedge:e,version:_}:/vivaldi/i.test(t)?o={name:"Vivaldi",vivaldi:e,version:r(/vivaldi\/(\d+(\.\d+)?)/i)||v}:p?o={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:e,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(o={name:"Firefox",firefox:e,version:r(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=e,o.osname="Firefox OS")):d?o={name:"Amazon Silk",silk:e,version:r(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:e,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?o={name:"SlimerJS",slimer:e,version:r(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:v||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(o={name:"WebOS",osname:"WebOS",webos:e,version:v||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=e)):/bada/i.test(t)?o={name:"Bada",osname:"Bada",bada:e,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:h?o={name:"Tizen",osname:"Tizen",tizen:e,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/qupzilla/i.test(t)?o={name:"QupZilla",qupzilla:e,version:r(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||v}:/chromium/i.test(t)?o={name:"Chromium",chromium:e,version:r(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||v}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?o={name:"Android",version:v}:/safari|applewebkit/i.test(t)?(o={name:"Safari",safari:e},v&&(o.version=v)):s?(o={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},v&&(o.version=v)):o=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:r(/googlebot\/(\d+(\.\d+))/i)||v}:{name:r(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(o.name=o.name||"Blink",o.blink=e):(o.name=o.name||"Webkit",o.webkit=e),!o.version&&v&&(o.version=v)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=e,o.version=o.version||r(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||!a&&!o.silk?!o.windowsphone&&s?(o[s]=e,o.ios=e,o.osname="iOS"):g?(o.mac=e,o.osname="macOS"):E?(o.xbox=e,o.osname="Xbox"):y?(o.windows=e,o.osname="Windows"):b&&(o.linux=e,o.osname="Linux"):(o.android=e,o.osname="Android");var k="";o.windows?k=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(r(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?k=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?k=(k=r(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?k=(k=r(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?k=r(/android[ \/-](\d+(\.\d+)*)/i):o.webos?k=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?k=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?k=r(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(k=r(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(o.osversion=k);var w=!o.windows&&k.split(".")[0];return C||u||"ipad"==s||a&&(3==w||w>=4&&!T)||o.silk?o.tablet=e:(T||"iphone"==s||"ipod"==s||a||c||o.blackberry||o.webos||o.bada)&&(o.mobile=e),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.vivaldi&&o.version>=1||o.chrome&&o.version>=20||o.samsungBrowser&&o.version>=4||o.whale&&1===i([o.version,"1.0"])||o.mzbrowser&&1===i([o.version,"6.0"])||o.focus&&1===i([o.version,"1.0"])||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1||o.chromium&&o.version>=20?o.a=e:o.msie&&10>o.version||o.chrome&&20>o.version||o.firefox&&20>o.version||o.safari&&6>o.version||o.opera&&10>o.version||o.ios&&o.osversion&&6>o.osversion.split(".")[0]||o.chromium&&20>o.version?o.c=e:o.x=e,o}var r=t("undefined"!=typeof navigator&&navigator.userAgent||"");function n(e){return e.split(".").length}function o(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;e.length>r;r++)n.push(t(e[r]));return n}function i(e){for(var t=Math.max(n(e[0]),n(e[1])),r=o(e,(function(e){var r=t-n(e);return o((e+=Array(r+1).join(".0")).split("."),(function(e){return Array(20-e.length).join("0")+e})).reverse()}));--t>=0;){if(r[0][t]>r[1][t])return 1;if(r[0][t]!==r[1][t])return-1;if(0===t)return 0}}function s(e,n,o){var s=r;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(s=t(o));var a=""+s.version;for(var c in e)if(e.hasOwnProperty(c)&&s[c]){if("string"!=typeof e[c])throw Error("Browser version in the minVersion map should be a string: "+c+": "+e);return 0>i([a,e[c]])}return n}return r.test=function(e){for(var t=0;e.length>t;++t){var n=e[t];if("string"==typeof n&&n in r)return!0}return!1},r.isUnsupportedBrowser=s,r.compareVersions=i,r.check=function(e,t,r){return!s(e,t,r)},r._detect=t,r.detect=t,r},e.exports?e.exports=r():t.bowser=r()})),Buffer$2=buffer$1.Buffer,intSize=4,zeroBuffer$1=Buffer$2.alloc(intSize);zeroBuffer$1.fill(0);var chrsz=8;function toArray(e,t){e.length%intSize!=0&&(e=Buffer$2.concat([e,zeroBuffer$1],e.length+(intSize-e.length%intSize)));for(var r=[],n=t?e.readInt32BE:e.readInt32LE,o=0;e.length>o;o+=intSize)r.push(n.call(e,o));return r}function toBuffer(e,t,r){for(var n=Buffer$2.alloc(t),o=r?n.writeInt32BE:n.writeInt32LE,i=0;e.length>i;i++)o.call(n,e[i],4*i,!0);return n}function hash$1(e,t,r,n){return Buffer$2.isBuffer(e)||(e=Buffer$2.from(e)),toBuffer(t(toArray(e,n),e.length*chrsz),r,n)}var helpers={hash:hash$1};function core_sha1(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r=Array(80),n=1732584193,o=-271733879,i=-1732584194,s=271733878,a=-1009589776,c=0;e.length>c;c+=16){for(var u=n,l=o,d=i,p=s,h=a,f=0;80>f;f++){r[f]=16>f?e[c+f]:rol(r[f-3]^r[f-8]^r[f-14]^r[f-16],1);var m=safe_add$1(safe_add$1(rol(n,5),sha1_ft(f,o,i,s)),safe_add$1(safe_add$1(a,r[f]),sha1_kt(f)));a=s,s=i,i=rol(o,30),o=n,n=m}n=safe_add$1(n,u),o=safe_add$1(o,l),i=safe_add$1(i,d),s=safe_add$1(s,p),a=safe_add$1(a,h)}return[n,o,i,s,a]}function sha1_ft(e,t,r,n){return 20>e?t&r|~t&n:40>e?t^r^n:60>e?t&r|t&n|r&n:t^r^n}function sha1_kt(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function safe_add$1(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function rol(e,t){return e<<t|e>>>32-t}var sha=function(e){return helpers.hash(e,core_sha1,20,!0)};function core_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;e.length>s;s+=16){var a=r,c=n,u=o,l=i;r=md5_ff(r,n,o,i,e[s+0],7,-680876936),i=md5_ff(i,r,n,o,e[s+1],12,-389564586),o=md5_ff(o,i,r,n,e[s+2],17,606105819),n=md5_ff(n,o,i,r,e[s+3],22,-1044525330),r=md5_ff(r,n,o,i,e[s+4],7,-176418897),i=md5_ff(i,r,n,o,e[s+5],12,1200080426),o=md5_ff(o,i,r,n,e[s+6],17,-1473231341),n=md5_ff(n,o,i,r,e[s+7],22,-45705983),r=md5_ff(r,n,o,i,e[s+8],7,1770035416),i=md5_ff(i,r,n,o,e[s+9],12,-1958414417),o=md5_ff(o,i,r,n,e[s+10],17,-42063),n=md5_ff(n,o,i,r,e[s+11],22,-1990404162),r=md5_ff(r,n,o,i,e[s+12],7,1804603682),i=md5_ff(i,r,n,o,e[s+13],12,-40341101),o=md5_ff(o,i,r,n,e[s+14],17,-1502002290),r=md5_gg(r,n=md5_ff(n,o,i,r,e[s+15],22,1236535329),o,i,e[s+1],5,-165796510),i=md5_gg(i,r,n,o,e[s+6],9,-1069501632),o=md5_gg(o,i,r,n,e[s+11],14,643717713),n=md5_gg(n,o,i,r,e[s+0],20,-373897302),r=md5_gg(r,n,o,i,e[s+5],5,-701558691),i=md5_gg(i,r,n,o,e[s+10],9,38016083),o=md5_gg(o,i,r,n,e[s+15],14,-660478335),n=md5_gg(n,o,i,r,e[s+4],20,-405537848),r=md5_gg(r,n,o,i,e[s+9],5,568446438),i=md5_gg(i,r,n,o,e[s+14],9,-1019803690),o=md5_gg(o,i,r,n,e[s+3],14,-187363961),n=md5_gg(n,o,i,r,e[s+8],20,1163531501),r=md5_gg(r,n,o,i,e[s+13],5,-1444681467),i=md5_gg(i,r,n,o,e[s+2],9,-51403784),o=md5_gg(o,i,r,n,e[s+7],14,1735328473),r=md5_hh(r,n=md5_gg(n,o,i,r,e[s+12],20,-1926607734),o,i,e[s+5],4,-378558),i=md5_hh(i,r,n,o,e[s+8],11,-2022574463),o=md5_hh(o,i,r,n,e[s+11],16,1839030562),n=md5_hh(n,o,i,r,e[s+14],23,-35309556),r=md5_hh(r,n,o,i,e[s+1],4,-1530992060),i=md5_hh(i,r,n,o,e[s+4],11,1272893353),o=md5_hh(o,i,r,n,e[s+7],16,-155497632),n=md5_hh(n,o,i,r,e[s+10],23,-1094730640),r=md5_hh(r,n,o,i,e[s+13],4,681279174),i=md5_hh(i,r,n,o,e[s+0],11,-358537222),o=md5_hh(o,i,r,n,e[s+3],16,-722521979),n=md5_hh(n,o,i,r,e[s+6],23,76029189),r=md5_hh(r,n,o,i,e[s+9],4,-640364487),i=md5_hh(i,r,n,o,e[s+12],11,-421815835),o=md5_hh(o,i,r,n,e[s+15],16,530742520),r=md5_ii(r,n=md5_hh(n,o,i,r,e[s+2],23,-995338651),o,i,e[s+0],6,-198630844),i=md5_ii(i,r,n,o,e[s+7],10,1126891415),o=md5_ii(o,i,r,n,e[s+14],15,-1416354905),n=md5_ii(n,o,i,r,e[s+5],21,-57434055),r=md5_ii(r,n,o,i,e[s+12],6,1700485571),i=md5_ii(i,r,n,o,e[s+3],10,-1894986606),o=md5_ii(o,i,r,n,e[s+10],15,-1051523),n=md5_ii(n,o,i,r,e[s+1],21,-2054922799),r=md5_ii(r,n,o,i,e[s+8],6,1873313359),i=md5_ii(i,r,n,o,e[s+15],10,-30611744),o=md5_ii(o,i,r,n,e[s+6],15,-1560198380),n=md5_ii(n,o,i,r,e[s+13],21,1309151649),r=md5_ii(r,n,o,i,e[s+4],6,-145523070),i=md5_ii(i,r,n,o,e[s+11],10,-1120210379),o=md5_ii(o,i,r,n,e[s+2],15,718787259),n=md5_ii(n,o,i,r,e[s+9],21,-343485551),r=safe_add(r,a),n=safe_add(n,c),o=safe_add(o,u),i=safe_add(i,l)}return[r,n,o,i]}function md5_cmn(e,t,r,n,o,i){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(n,i)),o),r)}function md5_ff(e,t,r,n,o,i,s){return md5_cmn(t&r|~t&n,e,t,o,i,s)}function md5_gg(e,t,r,n,o,i,s){return md5_cmn(t&n|r&~n,e,t,o,i,s)}function md5_hh(e,t,r,n,o,i,s){return md5_cmn(t^r^n,e,t,o,i,s)}function md5_ii(e,t,r,n,o,i,s){return md5_cmn(r^(t|~n),e,t,o,i,s)}function safe_add(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function bit_rol(e,t){return e<<t|e>>>32-t}var md5$1=function(e){return helpers.hash(e,core_md5,16)},Buffer$1=buffer$1.Buffer,algorithms={sha1:sha,md5:md5$1},blocksize=64,zeroBuffer=Buffer$1.alloc(blocksize);function hmac(e,t,r){Buffer$1.isBuffer(t)||(t=Buffer$1.from(t)),Buffer$1.isBuffer(r)||(r=Buffer$1.from(r)),t.length>blocksize?t=e(t):blocksize>t.length&&(t=Buffer$1.concat([t,zeroBuffer],blocksize));for(var n=Buffer$1.alloc(blocksize),o=Buffer$1.alloc(blocksize),i=0;blocksize>i;i++)n[i]=54^t[i],o[i]=92^t[i];var s=e(Buffer$1.concat([n,r]));return e(Buffer$1.concat([o,s]))}function hash(e,t){var r=algorithms[e=e||"sha1"],n=[];return r||error$1("algorithm:",e,"is not yet supported"),{update:function(e){return Buffer$1.isBuffer(e)||(e=Buffer$1.from(e)),n.push(e),e.length,this},digest:function(e){var o=Buffer$1.concat(n),i=t?hmac(r,t,o):r(o);return n=null,e?i.toString(e):i}}}function error$1(){var e=[].slice.call(arguments).join(" ");throw Error([e,"we accept pull requests\nhttp://github.com/dominictarr/crypto-browserify"].join("\n"))}zeroBuffer.fill(0);var createHash=function(e){return hash(e)},createHmac=function(e,t){return hash(e,t)},createCredentials=()=>{error$1("sorry,createCredentials is not implemented yet")},createCipher=()=>{error$1("sorry,createCipher is not implemented yet")},createCipheriv=()=>{error$1("sorry,createCipheriv is not implemented yet")},createDecipher=()=>{error$1("sorry,createDecipher is not implemented yet")},createDecipheriv=()=>{error$1("sorry,createDecipheriv is not implemented yet")},createSign=()=>{error$1("sorry,createSign is not implemented yet")},createVerify=()=>{error$1("sorry,createVerify is not implemented yet")},createDiffieHellman=()=>{error$1("sorry,createDiffieHellman is not implemented yet")},pbkdf2=()=>{error$1("sorry,pbkdf2 is not implemented yet")},crypto$1={createHash:createHash,createHmac:createHmac,createCredentials:createCredentials,createCipher:createCipher,createCipheriv:createCipheriv,createDecipher:createDecipher,createDecipheriv:createDecipheriv,createSign:createSign,createVerify:createVerify,createDiffieHellman:createDiffieHellman,pbkdf2:pbkdf2},isArray$2=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=void 0,t.isArray=e=>"[object Array]"===Object.prototype.toString.call(e)}));const{Stream:Stream}=require$$0__default.default,{isArray:isArray$1}=isArray$2;var string=function(e){return"string"==typeof e},array=isArray$1,buffer=Buffer.isBuffer;function isStream(e){return e instanceof Stream}var writableStream=function(e){return isStream(e)&&"function"==typeof e._write&&"object"==typeof e._writableState},isTypeOf={string:string,array:array,buffer:buffer,writableStream:writableStream},isObject=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=void 0,t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e)})),lowercaseKeyHeader_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.lowercaseKeyHeader=void 0,t.lowercaseKeyHeader=function(e){const t={};return isObject.isObject(e)&&Object.keys(e).forEach((r=>{t[r.toLowerCase()]=e[r]})),t}}));const{lowercaseKeyHeader:lowercaseKeyHeader}=lowercaseKeyHeader_1;var buildCanonicalizedResource=function(e,t){let r=""+e,n="?";if(isTypeOf.string(t)&&""!==t.trim())r+=n+t;else if(isTypeOf.array(t))t.sort(),r+=n+t.join("&");else if(t){const e=(e,t)=>e[0]>t[0]?1:t[0]>e[0]?-1:0,o=e=>{r+=n+e,t[e]&&(r+="="+t[e]),n="&"};Object.keys(t).sort(e).forEach(o)}return r},buildCanonicalString=function(e,t,r,n){const o=lowercaseKeyHeader((r=r||{}).headers),i=[],s={};let a=[e.toUpperCase(),o["content-md5"]||"",o["content-type"],n||o["x-oss-date"]];return Object.keys(o).forEach((e=>{const t=e.toLowerCase();0===t.indexOf("x-oss-")&&(s[t]=(o[e]+"").trim())})),Object.keys(s).sort().forEach((e=>{i.push(`${e}:${s[e]}`)})),a=a.concat(i),a.push(this.buildCanonicalizedResource(t,r.parameters)),a.join("\n")},computeSignature=function(e,t,r="utf-8"){return crypto$1.createHmac("sha1",e).update(Buffer.from(t,r)).digest("base64")},authorization=function(e,t,r,n){return`OSS ${e}:${this.computeSignature(t,r,n)}`},_signatureForURL=function(e,t={},r,n,o){const i={},{subResource:s={}}=t;if(t.process){s["x-oss-process"]=t.process}if(t.trafficLimit){s["x-oss-traffic-limit"]=t.trafficLimit}if(t.response&&Object.keys(t.response).forEach((e=>{const r="response-"+e.toLowerCase();s[r]=t.response[e]})),Object.keys(t).forEach((e=>{const r=e.toLowerCase(),n=t[e];0===r.indexOf("x-oss-")?i[r]=n:(0===r.indexOf("content-md5")||0===r.indexOf("content-type"))&&(i[e]=n)})),Object.prototype.hasOwnProperty.call(t,"security-token")&&(s["security-token"]=t["security-token"]),Object.prototype.hasOwnProperty.call(t,"callback")){const e={callbackUrl:encodeURI(t.callback.url),callbackBody:t.callback.body};if(t.callback.host&&(e.callbackHost=t.callback.host),t.callback.contentType&&(e.callbackBodyType=t.callback.contentType),s.callback=Buffer.from(JSON.stringify(e)).toString("base64"),t.callback.customValue){const e={};Object.keys(t.callback.customValue).forEach((r=>{e["x:"+r]=t.callback.customValue[r]})),s["callback-var"]=Buffer.from(JSON.stringify(e)).toString("base64")}}const a=this.buildCanonicalString(t.method,r,{headers:i,parameters:s},""+n);return{Signature:this.computeSignature(e,a,o),subResource:s}},signUtils={buildCanonicalizedResource:buildCanonicalizedResource,buildCanonicalString:buildCanonicalString,computeSignature:computeSignature,authorization:authorization,_signatureForURL:_signatureForURL},checkBucketName=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkBucketName=void 0,t.checkBucketName=(e,t=!1)=>{if(!(t?/^[a-z0-9][a-z0-9-]{1,61}[a-z0-9]$/:/^[a-z0-9_][a-z0-9-_]{1,61}[a-z0-9_]$/).test(e))throw Error("The bucket must be conform to the specifications")}})),checkConfigValid$1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkConfigValid=void 0;const r={endpoint:function(e){if("string"==typeof e)return/^[a-zA-Z0-9._:/-]+$/.test(e);if(e.host)return/^[a-zA-Z0-9._:/-]+$/.test(e.host);return!1},region:/^[a-zA-Z0-9\-_]+$/};t.checkConfigValid=(e,t)=>{if(r[t]){let n=!0;if(n=r[t]instanceof Function?r[t](e):r[t].test(e),!n)throw Error(`The ${t} must be conform to the specifications`)}}})),setRegion_1=createCommonjsModule((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setRegion=void 0;const n=r(urlutil__default.default);t.setRegion=function(e,t=!1,r=!1){checkConfigValid$1.checkConfigValid(e,"region");const o=r?"https://":"http://";let i=t?"-internal.aliyuncs.com":".aliyuncs.com";const s="vpc100-oss-cn-";return e.substr(0,14)===s&&(i=".aliyuncs.com"),n.default.parse(o+e+i)}}));const{checkBucketName:_checkBucketName}=checkBucketName,{setRegion:setRegion}=setRegion_1,{checkConfigValid:checkConfigValid}=checkConfigValid$1;function setEndpoint(e,t){checkConfigValid(e,"endpoint");let r=urlutil__default.default.parse(e);if(r.protocol||(r=urlutil__default.default.parse(`http${t?"s":""}://${e}`)),"http:"!==r.protocol&&"https:"!==r.protocol)throw Error("Endpoint protocol must be http or https.");return r}var initOptions=function(e){if(!e||!e.accessKeyId||!e.accessKeySecret)throw Error("require accessKeyId, accessKeySecret");e.stsToken&&!e.refreshSTSToken&&console.warn("It's recommended to set `refreshSTSToken` to refresh stsTokenaccessKeyIdaccessKeySecret automatically when sts info expires"),e.bucket&&_checkBucketName(e.bucket);const t=Object.assign({region:"oss-cn-hangzhou",internal:!1,secure:!1,timeout:6e4,bucket:null,endpoint:null,cname:!1,isRequestPay:!1,sldEnable:!1,headerEncoding:"utf-8",refreshSTSToken:null,retryMax:0},e);if(t.accessKeyId=t.accessKeyId.trim(),t.accessKeySecret=t.accessKeySecret.trim(),t.timeout&&(t.timeout=humanizeMs(t.timeout)),t.endpoint)t.endpoint=setEndpoint(t.endpoint,t.secure);else{if(!t.region)throw Error("require options.endpoint or options.region");t.endpoint=setRegion(t.region,t.internal,t.secure)}return t.inited=!0,t};function Mime(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;arguments.length>e;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Mime.prototype.define=function(e,t){for(let r in e){let n=e[r].map((function(e){return e.toLowerCase()}));r=r.toLowerCase();for(let e=0;n.length>e;e++){const o=n[e];if("*"!==o[0]){if(!t&&o in this._types)throw Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+r+'".');this._types[o]=r}}if(t||!this._extensions[r]){const e=n[0];this._extensions[r]="*"!==e[0]?e:e.substr(1)}}},Mime.prototype.getType=function(e){let t=(e+="").replace(/^.*[/\\]/,"").toLowerCase(),r=t.replace(/^.*\./,"").toLowerCase();return(t.length-1>r.length||!(e.length>t.length))&&this._types[r]||null},Mime.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null};var Mime_1=Mime,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]},lite=new Mime_1(standard),dateformat=createCommonjsModule((function(e,t){!function(t){var r,n,o,i=(r=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g,function(e,t,l,d){if(1!==arguments.length||"string"!==u(e)||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var p=(t=(i.masks[t]||t||i.masks.default)+"").slice(0,4);"UTC:"!==p&&"GMT:"!==p||(t=t.slice(4),l=!0,"GMT:"===p&&(d=!0));var h=l?"getUTC":"get",f=e[h+"Date"](),m=e[h+"Day"](),y=e[h+"Month"](),g=e[h+"FullYear"](),b=e[h+"Hours"](),_=e[h+"Minutes"](),v=e[h+"Seconds"](),C=e[h+"Milliseconds"](),T=l?0:e.getTimezoneOffset(),E=a(e),k=c(e),w={d:f,dd:s(f),ddd:i.i18n.dayNames[m],dddd:i.i18n.dayNames[m+7],m:y+1,mm:s(y+1),mmm:i.i18n.monthNames[y],mmmm:i.i18n.monthNames[y+12],yy:(g+"").slice(2),yyyy:g,h:b%12||12,hh:s(b%12||12),H:b,HH:s(b),M:_,MM:s(_),s:v,ss:s(v),l:s(C,3),L:s(Math.round(C/10)),t:12>b?"a":"p",tt:12>b?"am":"pm",T:12>b?"A":"P",TT:12>b?"AM":"PM",Z:d?"GMT":l?"UTC":((e+"").match(n)||[""]).pop().replace(o,""),o:(T>0?"-":"+")+s(100*Math.floor(Math.abs(T)/60)+Math.abs(T)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10],W:E,N:k};return t.replace(r,(function(e){return e in w?w[e]:e.slice(1,e.length-1)}))});function s(e,t){for(e+="",t=t||2;t>e.length;)e="0"+e;return e}function a(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();return t.setHours(t.getHours()-n),1+Math.floor((t-r)/6048e5)}function c(e){var t=e.getDay();return 0===t&&(t=7),t}function u(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}i.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},i.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},e.exports=i}()})),slice=Array.prototype.slice,copyTo=Copy;function Copy(e,t){if(!(this instanceof Copy))return new Copy(e,t);this.src=e,this._withAccess=t}function notDefined(e,t){return void 0===e[t]&&void 0===e.__lookupGetter__(t)&&void 0===e.__lookupSetter__(t)}Copy.prototype.withAccess=function(e){return this._withAccess=!1!==e,this},Copy.prototype.pick=function(e){return Array.isArray(e)||(e=slice.call(arguments)),e.length&&(this.keys=e),this},Copy.prototype.to=function(e){if(e=e||{},!this.src)return e;var t=this.keys||Object.keys(this.src);if(!this._withAccess){for(var r=0;t.length>r;r++)void 0===e[n=t[r]]&&(e[n]=this.src[n]);return e}for(r=0;t.length>r;r++){var n=t[r];if(notDefined(e,n)){var o=this.src.__lookupGetter__(n),i=this.src.__lookupSetter__(n);o&&e.__defineGetter__(n,o),i&&e.__defineSetter__(n,i),o||i||(e[n]=this.src[n])}}return e},Copy.prototype.toCover=function(e){for(var t=this.keys||Object.keys(this.src),r=0;t.length>r;r++){var n=t[r];delete e[n];var o=this.src.__lookupGetter__(n),i=this.src.__lookupSetter__(n);o&&e.__defineGetter__(n,o),i&&e.__defineSetter__(n,i),o||i||(e[n]=this.src[n])}},Copy.prototype.override=Copy.prototype.toCover,Copy.prototype.and=function(e){var t={};return this.to(t),this.src=e,this.to(t),this.src=t,this};var encoder_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encoder=void 0,t.encoder=function(e,t="utf-8"){return"utf-8"===t?e:Buffer.from(e).toString("latin1")}})),isIP=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isIP=void 0,t.isIP=e=>/^(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d)){3}$/.test(e)||/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e)})),getReqUrl_1=createCommonjsModule((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getReqUrl=void 0;const n=r(copyTo),o=r(urlutil__default.default),i=r(mergeDescriptors),s=r(isTypeOf);t.getReqUrl=function(e){const t={},r=this.options.cname;checkConfigValid$1.checkConfigValid(this.options.endpoint,"endpoint"),n.default(this.options.endpoint,!1).to(t),!e.bucket||r||isIP.isIP(t.hostname)||this.options.sldEnable||(t.host=`${e.bucket}.${t.host}`);let a="/";e.bucket&&this.options.sldEnable&&(a+=e.bucket+"/"),e.object&&(a+=this._escape(e.object).replace(/\+/g,"%2B")),t.pathname=a;const c={};if(e.query&&i.default(c,e.query),e.subres){let t={};s.default.string(e.subres)?t[e.subres]="":s.default.array(e.subres)?e.subres.forEach((e=>{t[e]=""})):t=e.subres,i.default(c,t)}return t.query=c,o.default.format(t)}})),createRequest_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createRequest=void 0;const r=debug$2(),{encoder:n}=encoder_1,{isIP:o}=isIP,{setRegion:i}=setRegion_1,{getReqUrl:s}=getReqUrl_1;function a(e,t){return e[t]||e[t.toLowerCase()]}t.createRequest=function(e){let t=new Date;this.options.amendTimeSkewed&&(t=+new Date+this.options.amendTimeSkewed);const c={"x-oss-date":dateformat(t,"UTC:ddd, dd mmm yyyy HH:MM:ss 'GMT'"),"x-oss-user-agent":this.userAgent};this.userAgent.includes("nodejs")&&(c["User-Agent"]=this.userAgent),this.options.isRequestPay&&Object.assign(c,{"x-oss-request-payer":"requester"}),this.options.stsToken&&(c["x-oss-security-token"]=this.options.stsToken),copyTo(e.headers).to(c),a(c,"Content-Type")||(c["Content-Type"]=e.mime&&e.mime.indexOf("/")>0?e.mime:lite.getType(e.mime||path__default.default.extname(e.object||""))),a(c,"Content-Type")||function(e,t){delete e[t],delete e[t.toLowerCase()]}(c,"Content-Type"),e.content&&(e.disabledMD5||(c["Content-MD5"]=crypto$1.createHash("md5").update(Buffer.from(e.content,"utf8")).digest("base64")),c["Content-Length"]||(c["Content-Length"]=e.content.length));const{hasOwnProperty:u}=Object.prototype;for(const e in c)c[e]&&u.call(c,e)&&(c[e]=n(c[e]+"",this.options.headerEncoding));const l=this._getResource(e);if(c.authorization=this.authorization(e.method,l,e.subres,c,this.options.headerEncoding),o(this.options.endpoint.hostname)){const{region:t,internal:r,secure:n}=this.options,o=i(t,r,n);c.host=`${e.bucket}.${o.host}`}const d=s.bind(this)(e);r("request %s %s, with headers %j, !!stream: %s",e.method,d,c,!!e.stream);const p={method:e.method,content:e.content,stream:e.stream,headers:c,timeout:e.timeout||this.options.timeout,writeStream:e.writeStream,customResponse:e.customResponse,ctx:e.ctx||this.ctx};return this.agent&&(p.agent=this.agent),this.httpsAgent&&(p.httpsAgent=this.httpsAgent),p.enableProxy=!!this.options.enableProxy,p.proxy=this.options.proxy?this.options.proxy:null,{url:d,params:p}}})),formatObjKey_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatObjKey=void 0,t.formatObjKey=function e(t,r,n){if(null===t||"object"!=typeof t)return t;let o;if(Array.isArray(t)){o=[];for(let i=0;t.length>i;i++)o.push(e(t[i],r,n))}else o={},Object.keys(t).forEach((i=>{o[function(e,t,r){var n;if(r&&(null===(n=r.exclude)||void 0===n?void 0:n.includes(e)))return e;"firstUpperCase"===t?e=e.replace(/^./,(e=>e.toUpperCase())):"firstLowerCase"===t&&(e=e.replace(/^./,(e=>e.toLowerCase())));return e}(i,r,n)]=e(t[i],r,n)}));return o}})),setSTSToken_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setSTSToken=void 0,t.setSTSToken=async function(){this.options||(this.options={});let e=await this.options.refreshSTSToken();e=formatObjKey_1.formatObjKey(e,"firstLowerCase"),e.securityToken&&(e.stsToken=e.securityToken),function(e){const t=["accessKeySecret","accessKeyId","stsToken"],r=Object.keys(e);t.forEach((e=>{if(!r.find((t=>t===e)))throw Error("refreshSTSToken must return contains "+e)}))}(e),Object.assign(this.options,e)}})),retry_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.retry=void 0,t.retry=function(e,t,r={}){let n=0;const{retryDelay:o=500,errorHandler:i=(()=>!0)}=r,s=(...r)=>new Promise(((a,c)=>{e(...r).then((e=>{n=0,a(e)})).catch((e=>{t>n&&i(e)?(n++,setTimeout((()=>{a(s(...r))}),o)):(n=0,c(e))}))}));return s}})),getSymlink=createCommonjsModule((function(e,t){t.getSymlink=async function(e,t={}){t.subres=Object.assign({symlink:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId),e=this._objectName(e);const r=this._objectRequestParams("GET",e,t);r.successStatuses=[200];const n=await this.request(r);return{targetName:decodeURIComponent(n.res.headers["x-oss-symlink-target"]),res:n.res}}})),putSymlink=createCommonjsModule((function(e,t){t.putSymlink=async function(e,t,r){(r=r||{}).headers=r.headers||{},t=this._escape(this._objectName(t)),this._convertMetaToHeaders(r.meta,r.headers),r.headers["x-oss-symlink-target"]=t,r.subres=Object.assign({symlink:""},r.subres),r.versionId&&(r.subres.versionId=r.versionId),r.storageClass&&(r.headers["x-oss-storage-class"]=r.storageClass),e=this._objectName(e);const n=this._objectRequestParams("PUT",e,r);n.successStatuses=[200];return{res:(await this.request(n)).res}}})),getObjectMeta=createCommonjsModule((function(e,t){t.getObjectMeta=async function(e,t){t=t||{},e=this._objectName(e),t.subres=Object.assign({objectMeta:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId);const r=this._objectRequestParams("HEAD",e,t);r.successStatuses=[200];const n=await this.request(r);return{status:n.status,res:n.res}}})),copyObject=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,n=t,o=["content-type","content-encoding","content-language","content-disposition","cache-control","expires"];n.copy=async function(e,t,r,n){"object"==typeof r&&(n=r),(n=n||{}).headers=n.headers||{},Object.keys(n.headers).forEach((e=>{n.headers["x-oss-copy-source-"+e.toLowerCase()]=n.headers[e]})),(n.meta||Object.keys(n.headers).find((e=>o.includes(e.toLowerCase()))))&&(n.headers["x-oss-metadata-directive"]="REPLACE"),this._convertMetaToHeaders(n.meta,n.headers),t=this._getSourceName(t,r),n.versionId&&(t=`${t}?versionId=${n.versionId}`),n.headers["x-oss-copy-source"]=t;const i=this._objectRequestParams("PUT",e,n);i.xmlResponse=!0,i.successStatuses=[200,304];const s=await this.request(i);let{data:a}=s;return a&&(a={etag:a.ETag,lastModified:a.LastModified}),{data:a,res:s.res}},n._getSourceName=function(e,t){return"string"==typeof t?e=this._objectName(e):"/"!==e[0]?t=this.options.bucket:(t=e.replace(/\/(.+?)(\/.*)/,"$1"),e=e.replace(/(\/.+?\/)(.*)/,"$2")),r(t),e=`/${t}/${e=encodeURIComponent(e)}`}})),policy2Str_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.policy2Str=void 0,t.policy2Str=function(e){let t;if(e)if("string"==typeof e)try{t=JSON.stringify(JSON.parse(e))}catch(e){throw Error("Policy string is not a valid JSON: "+e.message)}else t=JSON.stringify(e);return t}})),calculatePostSignature=createCommonjsModule((function(e,t){const{policy2Str:r}=policy2Str_1,{isObject:n}=isObject;t.calculatePostSignature=function(e){if(!n(e)&&"string"!=typeof e)throw Error("policy must be JSON string or Object");if(!n(e))try{JSON.stringify(JSON.parse(e))}catch(e){throw Error("policy must be JSON string or Object")}e=Buffer.from(r(e),"utf8").toString("base64");const t=signUtils.computeSignature(this.options.accessKeySecret,e);return{OSSAccessKeyId:this.options.accessKeyId,Signature:t,policy:e}}})),getObjectTagging$1=createCommonjsModule((function(e,t){const r=t,{isObject:n}=isObject;r.getObjectTagging=async function(e,t={}){t.subres=Object.assign({tagging:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId),e=this._objectName(e);const r=this._objectRequestParams("GET",e,t);r.successStatuses=[200];const o=await this.request(r),i=await this.parseXML(o.data);let{Tag:s}=i.TagSet;s=s&&n(s)?[s]:s||[];const a={};return s.forEach((e=>{a[e.Key]=e.Value})),{status:o.status,res:o.res,tag:a}}})),obj2xml_1=createCommonjsModule((function(e,t){function r(e){return Object.prototype.toString.call(e).replace(/(.*? |])/g,"").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.obj2xml=void 0,t.obj2xml=function e(t,n){let o="";return n&&n.headers&&(o='<?xml version="1.0" encoding="UTF-8"?>\n'),n&&n.firstUpperCase&&(t=formatObjKey_1.formatObjKey(t,"firstUpperCase")),"object"===r(t)?Object.keys(t).forEach((n=>{"undefined"!==r(t[n])&&"null"!==r(t[n])&&("string"===r(t[n])||"number"===r(t[n])?o+=`<${n}>${t[n]}</${n}>`:"object"===r(t[n])?o+=`<${n}>${e(t[n])}</${n}>`:"array"===r(t[n])?o+=t[n].map((t=>`<${n}>${e(t)}</${n}>`)).join(""):o+=`<${n}>${""+t[n]}</${n}>`)})):o+=""+t,o}})),checkValid_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkValid=void 0,t.checkValid=function(e,t){t.forEach((t=>{if(t.validator)t.validator(e);else if(t.pattern&&!t.pattern.test(e))throw Error(t.msg)}))}})),checkObjectTag_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkObjectTag=void 0;const{checkValid:r}=checkValid_1,{isObject:n}=isObject,o=[{validator:e=>{if("string"!=typeof e)throw Error("the key and value of the tag must be String")}},{pattern:/^[a-zA-Z0-9 +-=._:/]+$/,msg:"tag can contain letters, numbers, spaces, and the following symbols: plus sign (+), hyphen (-), equal sign (=), period (.), underscore (_), colon (:), and forward slash (/)"}],i={key:[...o,{pattern:/^.{1,128}$/,msg:"tag key can be a maximum of 128 bytes in length"}],value:[...o,{pattern:/^.{0,256}$/,msg:"tag value can be a maximum of 256 bytes in length"}]};t.checkObjectTag=function(e){if(!n(e))throw Error("tag must be Object");const t=Object.entries(e);if(t.length>10)throw Error("maximum of 10 tags for a object");const o=["key","value"];t.forEach((e=>{e.forEach(((e,t)=>{r(e,i[o[t]])}))}))}})),putObjectTagging$1=createCommonjsModule((function(e,t){const{obj2xml:r}=obj2xml_1,{checkObjectTag:n}=checkObjectTag_1;t.putObjectTagging=async function(e,t,o={}){n(t),o.subres=Object.assign({tagging:""},o.subres),o.versionId&&(o.subres.versionId=o.versionId),e=this._objectName(e);const i=this._objectRequestParams("PUT",e,o);i.successStatuses=[200];const s={Tagging:{TagSet:{Tag:t=Object.keys(t).map((e=>({Key:e,Value:t[e]})))}}};i.mime="xml",i.content=r(s);const a=await this.request(i);return{res:a.res,status:a.status}}})),deleteObjectTagging$1=createCommonjsModule((function(e,t){t.deleteObjectTagging=async function(e,t={}){t.subres=Object.assign({tagging:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId),e=this._objectName(e);const r=this._objectRequestParams("DELETE",e,t);r.successStatuses=[204];const n=await this.request(r);return{status:n.status,res:n.res}}})),getBucketVersions_1=createCommonjsModule((function(e,t){const r=t,{isObject:n}=isObject,{isArray:o}=isArray$2;async function i(e={},t={}){if(e.versionIdMarker&&void 0===e.keyMarker)throw Error("A version-id marker cannot be specified without a key marker");t.subres=Object.assign({versions:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId);const r=this._objectRequestParams("GET","",t);r.xmlResponse=!0,r.successStatuses=[200],r.query=function(e={}){const t={};n(e)&&Object.keys(e).forEach((r=>{t[function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(r)]=e[r]}));return t}(e);const i=await this.request(r);let s=i.data.Version||[],a=i.data.DeleteMarker||[];const c=this;s&&(Array.isArray(s)||(s=[s]),s=s.map((e=>({name:e.Key,url:c._objectUrl(e.Key),lastModified:e.LastModified,isLatest:"true"===e.IsLatest,versionId:e.VersionId,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}})))),a&&(o(a)||(a=[a]),a=a.map((e=>({name:e.Key,lastModified:e.LastModified,versionId:e.VersionId,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}))));let u=i.data.CommonPrefixes||null;return u&&(o(u)||(u=[u]),u=u.map((e=>e.Prefix))),{res:i.res,objects:s,deleteMarker:a,prefixes:u,nextMarker:i.data.NextKeyMarker||null,NextVersionIdMarker:i.data.NextVersionIdMarker||null,nextKeyMarker:i.data.NextKeyMarker||null,nextVersionIdMarker:i.data.NextVersionIdMarker||null,isTruncated:"true"===i.data.IsTruncated}}r.getBucketVersions=i,r.listObjectVersions=i})),deleteMulti=createCommonjsModule((function(e,t){const{obj2xml:r}=obj2xml_1;t.deleteMulti=async function(e,t={}){const n=[];if(!e||!e.length)throw Error("names is required");for(let t=0;e.length>t;t++){const r={};if("string"==typeof e[t])r.Key=utility.escape(this._objectName(e[t]));else{const{key:n,versionId:o}=e[t];r.Key=utility.escape(this._objectName(n)),r.VersionId=o}n.push(r)}const o=r({Delete:{Quiet:!!t.quiet,Object:n}},{headers:!0});t.subres=Object.assign({delete:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId);const i=this._objectRequestParams("POST","",t);i.mime="xml",i.content=o,i.xmlResponse=!0,i.successStatuses=[200];const s=await this.request(i),a=s.data;let c=a&&a.Deleted||null;return c&&(Array.isArray(c)||(c=[c])),{res:s.res,deleted:c||[]}}})),getACL=createCommonjsModule((function(e,t){t.getACL=async function(e,t={}){t.subres=Object.assign({acl:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId),e=this._objectName(e);const r=this._objectRequestParams("GET",e,t);r.successStatuses=[200],r.xmlResponse=!0;const n=await this.request(r);return{acl:n.data.AccessControlList.Grant,owner:{id:n.data.Owner.ID,displayName:n.data.Owner.DisplayName},res:n.res}}})),putACL=createCommonjsModule((function(e,t){t.putACL=async function(e,t,r){(r=r||{}).subres=Object.assign({acl:""},r.subres),r.versionId&&(r.subres.versionId=r.versionId),r.headers=r.headers||{},r.headers["x-oss-object-acl"]=t,e=this._objectName(e);const n=this._objectRequestParams("PUT",e,r);n.successStatuses=[200];return{res:(await this.request(n)).res}}})),head=createCommonjsModule((function(e,t){t.head=async function(e,t={}){t.subres=Object.assign({},t.subres),t.versionId&&(t.subres.versionId=t.versionId);const r=this._objectRequestParams("HEAD",e,t);r.successStatuses=[200,304];const n=await this.request(r),o={meta:null,res:n.res,status:n.status};return 200===n.status&&Object.keys(n.headers).forEach((e=>{0===e.indexOf("x-oss-meta-")&&(o.meta||(o.meta={}),o.meta[e.substring(11)]=n.headers[e])})),o}})),_delete=createCommonjsModule((function(e,t){t.delete=async function(e,t={}){t.subres=Object.assign({},t.subres),t.versionId&&(t.subres.versionId=t.versionId);const r=this._objectRequestParams("DELETE",e,t);r.successStatuses=[204];return{res:(await this.request(r)).res}}})),_nodeResolve_empty={},_nodeResolve_empty$1={__proto__:null,default:_nodeResolve_empty},fs=getAugmentedNamespace(_nodeResolve_empty$1),get=createCommonjsModule((function(e,t){t.get=async function(e,t,r={}){let n=null,o=!1;isTypeOf.writableStream(t)?n=t:isTypeOf.string(t)?(n=fs.createWriteStream(t),o=!0):r=t,r=r||{};const i=process&&process.browser,s=null===r.responseCacheControl?"":"no-cache";let a;r.subres=Object.assign(i&&s?{"response-cache-control":s}:{},r.subres),r.versionId&&(r.subres.versionId=r.versionId),r.process&&(r.subres["x-oss-process"]=r.process);try{const t=this._objectRequestParams("GET",e,r);t.writeStream=n,t.successStatuses=[200,206,304],a=await this.request(t),o&&n.destroy()}catch(e){throw o&&(n.destroy(),await this._deleteFileSafe(t)),e}return{res:a.res,content:a.data}}})),postAsyncFetch_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.postAsyncFetch=void 0,t.postAsyncFetch=async function(e,t,r={}){r.subres=Object.assign({asyncFetch:""},r.subres),r.headers=r.headers||{},e=this._objectName(e);const{host:n="",contentMD5:o="",callback:i="",storageClass:s="",ignoreSameKey:a=!0}=r,c={AsyncFetchTaskConfiguration:{Url:t,Object:e,Host:n,ContentMD5:o,Callback:i,StorageClass:s,IgnoreSameKey:a}},u=this._objectRequestParams("POST","",r);u.mime="xml",u.xmlResponse=!0,u.successStatuses=[200],u.content=obj2xml_1.obj2xml(c);const l=await this.request(u);return{res:l.res,status:l.status,taskId:l.data.TaskId}}})),getAsyncFetch_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAsyncFetch=void 0,t.getAsyncFetch=async function(e,t={}){t.subres=Object.assign({asyncFetch:""},t.subres),t.headers=t.headers||{};const r=this._objectRequestParams("GET","",t);r.headers["x-oss-task-id"]=e,r.successStatuses=[200],r.xmlResponse=!0;const n=await this.request(r),o=formatObjKey_1.formatObjKey(n.data.TaskInfo,"firstLowerCase");return{res:n.res,status:n.status,state:n.data.State,taskInfo:o}}})),generateObjectUrl=createCommonjsModule((function(e,t){const{isIP:r}=isIP;t.generateObjectUrl=function(e,t){if(r(this.options.endpoint.hostname))throw Error("can not get the object URL when endpoint is IP");if(t)"/"!==t[t.length-1]&&(t+="/");else{t=this.options.endpoint.format();const e=urlutil__default.default.parse(t),{bucket:r}=this.options;e.hostname=`${r}.${e.hostname}`,e.host=`${r}.${e.host}`,t=e.format()}return t+this._escape(this._objectName(e))}})),getObjectUrl$1=createCommonjsModule((function(e,t){const{isIP:r}=isIP;t.getObjectUrl=function(e,t){if(r(this.options.endpoint.hostname))throw Error("can not get the object URL when endpoint is IP");return t?"/"!==t[t.length-1]&&(t+="/"):t=this.options.endpoint.format(),t+this._escape(this._objectName(e))}})),signatureUrl=createCommonjsModule((function(e,t){const{isIP:r}=isIP;t.signatureUrl=function(e,t){if(r(this.options.endpoint.hostname))throw Error("can not get the object URL when endpoint is IP");t=t||{},e=this._objectName(e),t.method=t.method||"GET";const n=utility.timestamp()+(t.expires||1800),o={bucket:this.options.bucket,object:e},i=this._getResource(o);this.options.stsToken&&(t["security-token"]=this.options.stsToken);const s=signUtils._signatureForURL(this.options.accessKeySecret,t,i,n),a=urlutil__default.default.parse(this._getReqUrl(o));return a.query={OSSAccessKeyId:this.options.accessKeyId,Expires:n,Signature:s.Signature},copyTo(s.subResource).to(a.query),a.format()}})),object$1=createCommonjsModule((function(e,t){const r=t;mergeDescriptors(r,getSymlink),mergeDescriptors(r,putSymlink),mergeDescriptors(r,getObjectMeta),mergeDescriptors(r,copyObject),mergeDescriptors(r,calculatePostSignature),mergeDescriptors(r,getObjectTagging$1),mergeDescriptors(r,putObjectTagging$1),mergeDescriptors(r,deleteObjectTagging$1),mergeDescriptors(r,getBucketVersions_1),mergeDescriptors(r,deleteMulti),mergeDescriptors(r,getACL),mergeDescriptors(r,putACL),mergeDescriptors(r,head),mergeDescriptors(r,_delete),mergeDescriptors(r,get),mergeDescriptors(r,postAsyncFetch_1),mergeDescriptors(r,getAsyncFetch_1),mergeDescriptors(r,generateObjectUrl),mergeDescriptors(r,getObjectUrl$1),mergeDescriptors(r,signatureUrl)})),encodeCallback=function(e,t){if(e.headers=e.headers||{},!Object.prototype.hasOwnProperty.call(e.headers,"x-oss-callback")&&t.callback){const r={callbackUrl:encodeURI(t.callback.url),callbackBody:t.callback.body};t.callback.host&&(r.callbackHost=t.callback.host),t.callback.contentType&&(r.callbackBodyType=t.callback.contentType);const n=Buffer.from(JSON.stringify(r)).toString("base64");if(e.headers["x-oss-callback"]=n,t.callback.customValue){const r={};Object.keys(t.callback.customValue).forEach((e=>{r["x:"+e]=t.callback.customValue[e]})),e.headers["x-oss-callback-var"]=Buffer.from(JSON.stringify(r)).toString("base64")}}},callback={encodeCallback:encodeCallback},wrappy_1=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=Array(arguments.length),r=0;t.length>r;r++)t[r]=arguments[r];var n=e.apply(this,t),o=t[t.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}var once_1=wrappy_1(once),strict=wrappy_1(onceStrict);function once(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function onceStrict(e){var t=function(){if(t.called)throw Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)};return t.onceError=(e.name||"Function wrapped with `once`")+" shouldn't be called more than once",t.called=!1,t}once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})})),once_1.strict=strict;var noop$2=function(){},isRequest$1=function(e){return e.setHeader&&"function"==typeof e.abort},isChildProcess=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},eos=function(e,t,r){if("function"==typeof t)return eos(e,null,t);t||(t={}),r=once_1(r||noop$2);var n=e._writableState,o=e._readableState,i=t.readable||!1!==t.readable&&e.readable,s=t.writable||!1!==t.writable&&e.writable,a=!1,c=function(){e.writable||u()},u=function(){s=!1,i||r.call(e)},l=function(){i=!1,s||r.call(e)},d=function(t){r.call(e,t?Error("exited with error code: "+t):null)},p=function(t){r.call(e,t)},h=function(){process.nextTick(f)},f=function(){if(!a)return(!i||o&&o.ended&&!o.destroyed)&&(!s||n&&n.ended&&!n.destroyed)?void 0:r.call(e,Error("premature close"))},m=function(){e.req.on("finish",u)};return isRequest$1(e)?(e.on("complete",u),e.on("abort",h),e.req?m():e.on("request",m)):s&&!n&&(e.on("end",c),e.on("close",c)),isChildProcess(e)&&e.on("exit",d),e.on("end",l),e.on("finish",u),!1!==t.error&&e.on("error",p),e.on("close",h),function(){a=!0,e.removeListener("complete",u),e.removeListener("abort",h),e.removeListener("request",m),e.req&&e.req.removeListener("finish",u),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("exit",d),e.removeListener("end",l),e.removeListener("error",p),e.removeListener("close",h)}},endOfStream=eos,noop$1=function(){},ancient=/^v?\.0/.test(process.version),isFn=function(e){return"function"==typeof e},isFS=function(e){return!!ancient&&(!!fs&&((e instanceof(fs.ReadStream||noop$1)||e instanceof(fs.WriteStream||noop$1))&&isFn(e.close)))},isRequest=function(e){return e.setHeader&&isFn(e.abort)},destroyer=function(e,t,r,n){n=once_1(n);var o=!1;e.on("close",(function(){o=!0})),endOfStream(e,{readable:t,writable:r},(function(e){if(e)return n(e);o=!0,n()}));var i=!1;return function(t){if(!o&&!i)return i=!0,isFS(e)?e.close(noop$1):isRequest(e)?e.abort():isFn(e.destroy)?e.destroy():void n(t||Error("stream was destroyed"))}},call=function(e){e()},pipe=function(e,t){return e.pipe(t)},pump=function(){var e,t=Array.prototype.slice.call(arguments),r=isFn(t[t.length-1]||noop$1)&&t.pop()||noop$1;if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw Error("pump requires two streams per minimum");var n=t.map((function(o,i){var s=t.length-1>i;return destroyer(o,s,i>0,(function(t){e||(e=t),t&&n.forEach(call),s||(n.forEach(call),r(e))}))}));return t.reduce(pipe)},pump_1=pump,isBuffer_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isBuffer=void 0,t.isBuffer=function(e){return Buffer.isBuffer(e)}})),object=createCommonjsModule((function(e,t){const{Transform:r}=require$$0__default.default,{isBuffer:n}=isBuffer_1,{retry:o}=retry_1,i=t;i.append=async function(e,t,r){void 0===(r=r||{}).position&&(r.position="0"),r.subres={append:"",position:r.position},r.method="POST";const n=await this.put(e,t,r);return n.nextAppendPosition=n.res.headers["x-oss-next-append-position"],n},i.put=async function(e,t,r){let i;if(r=r||{},e=this._objectName(e),!n(t)){if(isTypeOf.string(t)){if(!fs.statSync(t).isFile())throw Error(t+" is not file");r.mime=r.mime||lite.getType(path__default.default.extname(t)),r.contentLength=await this._getFileSize(t);const n=()=>fs.createReadStream(t),i=(e,t,r)=>this.putStream(e,t(),r);return await o(i,this.options.retryMax,{errorHandler:e=>!!(e=>[-1,-2].includes(e.status)&&(this.options.requestErrorRetryHandle||(()=>!0))(e))(e)})(e,n,r)}if(isTypeOf.readableStream(t))return await this.putStream(e,t,r);throw new TypeError("Must provide String/Buffer/ReadableStream for put.")}i=t,r.headers=r.headers||{},this._convertMetaToHeaders(r.meta,r.headers);const s=this._objectRequestParams(r.method||"PUT",e,r);callback.encodeCallback(s,r),s.mime=r.mime,s.content=i,s.successStatuses=[200];const a=await this.request(s),c={name:e,url:this._objectUrl(e),res:a.res};return s.headers&&s.headers["x-oss-callback"]&&(c.data=JSON.parse(""+a.data)),c},i.putStream=async function(e,t,n){(n=n||{}).headers=n.headers||{},e=this._objectName(e),n.contentLength?n.headers["Content-Length"]=n.contentLength:n.headers["Transfer-Encoding"]="chunked",this._convertMetaToHeaders(n.meta,n.headers);const o=this._objectRequestParams(n.method||"PUT",e,n);callback.encodeCallback(o,n),o.mime=n.mime;const i=new r;i._transform=function(e,t,r){this.push(e),r()},o.stream=pump_1(t,i),o.successStatuses=[200];const s=await this.request(o),a={name:e,url:this._objectUrl(e),res:s.res};return o.headers&&o.headers["x-oss-callback"]&&(a.data=JSON.parse(""+s.data)),a},i.getStream=async function(e,t){(t=t||{}).process&&(t.subres=t.subres||{},t.subres["x-oss-process"]=t.process);const r=this._objectRequestParams("GET",e,t);r.customResponse=!0,r.successStatuses=[200,206,304];const n=await this.request(r);return{stream:n.res,res:{status:n.status,headers:n.headers}}},i.putMeta=async function(e,t,r){return await this.copy(e,e,{meta:t||{},timeout:r&&r.timeout,ctx:r&&r.ctx})},i.list=async function(e,t){const r=this._objectRequestParams("GET","",t);r.query=e,r.xmlResponse=!0,r.successStatuses=[200];const n=await this.request(r);let o=n.data.Contents;const i=this;o&&(Array.isArray(o)||(o=[o]),o=o.map((e=>({name:e.Key,url:i._objectUrl(e.Key),lastModified:e.LastModified,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}))));let s=n.data.CommonPrefixes||null;return s&&(Array.isArray(s)||(s=[s]),s=s.map((e=>e.Prefix))),{res:n.res,objects:o,prefixes:s,nextMarker:n.data.NextMarker||null,isTruncated:"true"===n.data.IsTruncated}},i.listV2=async function(e,t={}){const r=e["continuation-token"]||e.continuationToken;delete e["continuation-token"],delete e.continuationToken,r&&(t.subres=Object.assign({"continuation-token":r},t.subres));const n=this._objectRequestParams("GET","",t);n.query=Object.assign({"list-type":2},e),n.xmlResponse=!0,n.successStatuses=[200];const o=await this.request(n);let i=o.data.Contents;const s=this;i&&(Array.isArray(i)||(i=[i]),i=i.map((e=>({name:e.Key,url:s._objectUrl(e.Key),lastModified:e.LastModified,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:e.Owner?{id:e.Owner.ID,displayName:e.Owner.DisplayName}:null}))));let a=o.data.CommonPrefixes||null;return a&&(Array.isArray(a)||(a=[a]),a=a.map((e=>e.Prefix))),{res:o.res,objects:i,prefixes:a,isTruncated:"true"===o.data.IsTruncated,keyCount:+o.data.KeyCount,continuationToken:o.data.ContinuationToken||null,nextContinuationToken:o.data.NextContinuationToken||null}},i.restore=async function(e,t){(t=t||{}).subres=Object.assign({restore:""},t.subres),t.versionId&&(t.subres.versionId=t.versionId);const r=this._objectRequestParams("POST",e,t);r.successStatuses=[202];return{res:(await this.request(r)).res}},i._objectUrl=function(e){return this._getReqUrl({bucket:this.options.bucket,object:e})},i._objectRequestParams=function(e,t,r){if(!this.options.bucket&&!this.options.cname)throw Error("Please create a bucket first");r=r||{};const n={object:t=this._objectName(t),bucket:this.options.bucket,method:e,subres:r&&r.subres,timeout:r&&r.timeout,ctx:r&&r.ctx};return r.headers&&(n.headers={},copyTo(r.headers).to(n.headers)),n},i._objectName=function(e){return e.replace(/^\/+/,"")},i._statFile=function(e){return new Promise(((t,r)=>{fs.stat(e,((e,n)=>{e?r(e):t(n)}))}))},i._convertMetaToHeaders=function(e,t){e&&Object.keys(e).forEach((r=>{t["x-oss-meta-"+r]=e[r]}))},i._deleteFileSafe=function(e){return new Promise((t=>{fs.exists(e,(r=>{r?fs.unlink(e,(e=>{t()})):t()}))}))}})),base64=createCommonjsModule((function(e,t){!function(t,r){e.exports=function(t){var r,n=(t=t||{}).Base64,o="2.6.4",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},r=0,n=e.length;n>r;r++)t[e.charAt(r)]=r;return t}(i),a=String.fromCharCode,c=function(e){if(2>e.length)return 128>(t=e.charCodeAt(0))?e:2048>t?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(e){return e.replace(u,c)},d=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),2>t?i.charAt(r>>>6&63):"=",1>t?i.charAt(63&r):"="].join("")},p=t.btoa&&"function"==typeof t.btoa?function(e){return t.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,d)},h=function(e){return p(l(e+""))},f=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},m=function(e,t){return t?f(h(e)):h(e)},y=function(e){return m(e,!0)};t.Uint8Array&&(r=function(e,t){for(var r="",n=0,o=e.length;o>n;n+=3){var s=e[n+1],a=e[n+2],c=e[n]<<16|s<<8|a;r+=i.charAt(c>>>18)+i.charAt(c>>>12&63)+(void 0!==s?i.charAt(c>>>6&63):"=")+(void 0!==a?i.charAt(63&c):"=")}return t?f(r):r});var g,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,_=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(t>>>10))+a(56320+(1023&t));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},v=function(e){return e.replace(b,_)},C=function(e){var t=e.length,r=t%4,n=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),o=[a(n>>>16),a(n>>>8&255),a(255&n)];return o.length-=[0,0,2,1][r],o.join("")},T=t.atob&&"function"==typeof t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/\S{1,4}/g,C)},E=function(e){return T((e+"").replace(/[^A-Za-z0-9\+\/]/g,""))},k=function(e){return v(T(e))},w=function(e){return(e+"").replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},x=function(e){return k(w(e))};t.Uint8Array&&(g=function(e){return Uint8Array.from(E(w(e)),(function(e){return e.charCodeAt(0)}))});var S=function(){var e=t.Base64;return t.Base64=n,e};if(t.Base64={VERSION:o,atob:E,btoa:p,fromBase64:x,toBase64:m,utob:l,encode:m,encodeURI:y,btou:v,decode:x,noConflict:S,fromUint8Array:r,toUint8Array:g},"function"==typeof Object.defineProperty){var O=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",O((function(){return x(this)}))),Object.defineProperty(String.prototype,"toBase64",O((function(e){return m(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",O((function(){return m(this,!0)})))}}t.Meteor&&(Base64=t.Base64);e.exports&&(e.exports.Base64=t.Base64);return{Base64:t.Base64}}(t)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal)})),processObjectSave=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{Base64:{encode:n}}=base64;function o(e,t){if(!e)throw Error(t+" is required");if("string"!=typeof e)throw Error(t+" must be String")}t.processObjectSave=async function(e,t,i,s){o(e,"sourceObject"),o(t,"targetObject"),o(i,"process"),t=this._objectName(t),s&&r(s);const a=this._objectRequestParams("POST",e,{subres:"x-oss-process"}),c=s?",b_"+n(s):"";t=n(t);a.content=querystring__default.default.stringify({"x-oss-process":`${i}|sys/saveas,o_${t}${c}`});const u=await this.request(a);return{res:u.res,status:u.res.status}}})),image$1=createCommonjsModule((function(e,t){mergeDescriptors(t,processObjectSave)})),getBucketRequestPayment=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.getBucketRequestPayment=async function(e,t){t=t||{},r(e);const n=this._bucketRequestParams("GET",e,"requestPayment",t);n.successStatuses=[200],n.xmlResponse=!0;const o=await this.request(n);return{status:o.status,res:o.res,payer:o.data.Payer}}})),putBucketRequestPayment=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{obj2xml:n}=obj2xml_1,o=["BucketOwner","Requester"];t.putBucketRequestPayment=async function(e,t,i){if(i=i||{},!t||0>o.indexOf(t))throw Error("payer must be BucketOwner or Requester");r(e);const s=this._bucketRequestParams("PUT",e,"requestPayment",i);s.successStatuses=[200];const a=n({RequestPaymentConfiguration:{Payer:t}},{headers:!0});s.mime="xml",s.content=a;const c=await this.request(s);return{status:c.status,res:c.res}}})),putBucketEncryption$1=createCommonjsModule((function(e,t){const r=t,{checkBucketName:n}=checkBucketName,{obj2xml:o}=obj2xml_1;r.putBucketEncryption=async function(e,t){t=t||{},n(e);const r=this._bucketRequestParams("PUT",e,"encryption",t);r.successStatuses=[200];const i={ServerSideEncryptionRule:{ApplyServerSideEncryptionByDefault:{SSEAlgorithm:t.SSEAlgorithm}}};void 0!==t.KMSMasterKeyID&&(i.ServerSideEncryptionRule.ApplyServerSideEncryptionByDefault.KMSMasterKeyID=t.KMSMasterKeyID);const s=o(i,{headers:!0});r.mime="xml",r.content=s;const a=await this.request(r);return{status:a.status,res:a.res}}})),getBucketEncryption$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.getBucketEncryption=async function(e){r(e);const t=this._bucketRequestParams("GET",e,"encryption");t.successStatuses=[200],t.xmlResponse=!0;const n=await this.request(t);return{encryption:n.data.ApplyServerSideEncryptionByDefault,status:n.status,res:n.res}}})),deleteBucketEncryption$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.deleteBucketEncryption=async function(e){r(e);const t=this._bucketRequestParams("DELETE",e,"encryption");t.successStatuses=[204],t.xmlResponse=!0;const n=await this.request(t);return{status:n.status,res:n.res}}})),formatTag_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatTag=void 0,t.formatTag=function(e){void 0!==e.Tagging?e=e.Tagging.TagSet.Tag:void 0!==e.TagSet?e=e.TagSet.Tag:void 0!==e.Tag&&(e=e.Tag),e=e&&isObject.isObject(e)?[e]:e||[];const t={};return e.forEach((e=>{t[e.Key]=e.Value})),t}})),getBucketTags=createCommonjsModule((function(e,t){const r=t,{checkBucketName:n}=checkBucketName,{formatTag:o}=formatTag_1;r.getBucketTags=async function(e,t={}){n(e);const r=this._bucketRequestParams("GET",e,"tagging",t);r.successStatuses=[200];const i=await this.request(r),s=await this.parseXML(i.data);return{status:i.status,res:i.res,tag:o(s)}}})),checkBucketTag=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkBucketTag=void 0;const{checkValid:r}=checkValid_1,{isObject:n}=isObject,o=[{validator:e=>{if("string"!=typeof e)throw Error("the key and value of the tag must be String")}}],i={key:[...o,{pattern:/^.{1,64}$/,msg:"tag key can be a maximum of 64 bytes in length"},{pattern:/^(?!https*:\/\/|Aliyun)/,msg:"tag key can not startsWith: http://, https://, Aliyun"}],value:[...o,{pattern:/^.{0,128}$/,msg:"tag value can be a maximum of 128 bytes in length"}]};t.checkBucketTag=e=>{if(!n(e))throw Error("bucket tag must be Object");const t=Object.entries(e);if(t.length>20)throw Error("maximum of 20 tags for a bucket");const o=["key","value"];t.forEach((e=>{e.forEach(((e,t)=>{r(e,i[o[t]])}))}))}})),putBucketTags=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{obj2xml:n}=obj2xml_1,{checkBucketTag:o}=checkBucketTag;t.putBucketTags=async function(e,t,i={}){r(e),o(t);const s=this._bucketRequestParams("PUT",e,"tagging",i);s.successStatuses=[200];const a={Tagging:{TagSet:{Tag:t=Object.keys(t).map((e=>({Key:e,Value:t[e]})))}}};s.mime="xml",s.content=n(a);const c=await this.request(s);return{res:c.res,status:c.status}}})),deleteBucketTags=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.deleteBucketTags=async function(e,t={}){r(e);const n=this._bucketRequestParams("DELETE",e,"tagging",t);n.successStatuses=[204];const o=await this.request(n);return{status:o.status,res:o.res}}})),putBucket$1=createCommonjsModule((function(e,t){const r=t,{checkBucketName:n}=checkBucketName,{obj2xml:o}=obj2xml_1;r.putBucket=async function(e,t={}){n(e,!0);const r=this._bucketRequestParams("PUT",e,"",t),i={},s={CreateBucketConfiguration:i},a=t.StorageClass||t.storageClass,c=t.DataRedundancyType||t.dataRedundancyType;(a||c)&&(a&&(i.StorageClass=a),c&&(i.DataRedundancyType=c),r.mime="xml",r.content=o(s,{headers:!0}));const{acl:u,headers:l={}}=t;u&&(l["x-oss-acl"]=u),r.headers=l,r.successStatuses=[200];const d=await this.request(r);return{bucket:d.headers.location&&d.headers.location.substring(1)||null,res:d.res}}})),getBucketWebsite$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{isObject:n}=isObject;t.getBucketWebsite=async function(e,t){r(e);const o=this._bucketRequestParams("GET",e,"website",t);o.successStatuses=[200],o.xmlResponse=!0;const i=await this.request(o);let s=[];return i.data.RoutingRules&&i.data.RoutingRules.RoutingRule&&(s=n(i.data.RoutingRules.RoutingRule)?[i.data.RoutingRules.RoutingRule]:i.data.RoutingRules.RoutingRule),{index:i.data.IndexDocument&&i.data.IndexDocument.Suffix||"",supportSubDir:i.data.IndexDocument&&i.data.IndexDocument.SupportSubDir||"false",type:i.data.IndexDocument&&i.data.IndexDocument.Type,routingRules:s,error:i.data.ErrorDocument&&i.data.ErrorDocument.Key||null,res:i.res}}})),putBucketWebsite$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{obj2xml:n}=obj2xml_1,{isArray:o}=isArray$2;t.putBucketWebsite=async function(e,t={},i){r(e);const s=this._bucketRequestParams("PUT",e,"website",i),a={Suffix:t.index||"index.html"},c={IndexDocument:a};let u={WebsiteConfiguration:c};if(t.supportSubDir&&(a.SupportSubDir=t.supportSubDir),t.type&&(a.Type=t.type),t.error&&(c.ErrorDocument={Key:t.error}),void 0!==t.routingRules){if(!o(t.routingRules))throw Error("RoutingRules must be Array");c.RoutingRules={RoutingRule:t.routingRules}}u=n(u),s.content=u,s.mime="xml",s.successStatuses=[200];return{res:(await this.request(s)).res}}})),deleteBucketWebsite$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.deleteBucketWebsite=async function(e,t){r(e);const n=this._bucketRequestParams("DELETE",e,"website",t);n.successStatuses=[204];return{res:(await this.request(n)).res}}})),getBucketLifecycle$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{isArray:n}=isArray$2,{formatObjKey:o}=formatObjKey_1;t.getBucketLifecycle=async function(e,t){r(e);const i=this._bucketRequestParams("GET",e,"lifecycle",t);i.successStatuses=[200],i.xmlResponse=!0;const s=await this.request(i);let a=s.data.Rule||null;return a&&(n(a)||(a=[a]),a=a.map((e=>(e.ID&&(e.id=e.ID,delete e.ID),e.Tag&&!n(e.Tag)&&(e.Tag=[e.Tag]),o(e,"firstLowerCase"))))),{rules:a,res:s.res}}})),deepCopy=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopyWith=t.deepCopy=void 0,t.deepCopy=e=>{if(null===e||"object"!=typeof e)return e;if(isBuffer_1.isBuffer(e))return e.slice();const r=Array.isArray(e)?[]:{};return Object.keys(e).forEach((n=>{r[n]=t.deepCopy(e[n])})),r},t.deepCopyWith=(e,r)=>r?function e(t,n,o){const i=r(t,n,o);if(void 0!==i)return i;if(null===t||"object"!=typeof t)return t;if(isBuffer_1.isBuffer(t))return t.slice();const s=Array.isArray(t)?[]:{};return Object.keys(t).forEach((r=>{s[r]=e(t[r],r,t)})),s}(e,"",null):t.deepCopy(e)})),getStrBytesCount_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getStrBytesCount=void 0,t.getStrBytesCount=function(e){let t=0;for(let r=0;e.length>r;r++){const n=e.charAt(r);t+=/^[\u00-\uff]$/.test(n)?1:2}return t}})),putBucketLifecycle$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{isArray:n}=isArray$2,{deepCopy:o}=deepCopy,{isObject:i}=isObject,{obj2xml:s}=obj2xml_1,{checkObjectTag:a}=checkObjectTag_1,{getStrBytesCount:c}=getStrBytesCount_1;function u(e,t){const{days:r,createdBeforeDate:n}=e;if(!r&&!n)throw Error(t+" must includes days or createdBeforeDate");if(r&&!/^[1-9][0-9]*$/.test(r))throw Error("days must be a positive integer");if(n&&!/\d{4}-\d{2}-\d{2}T00:00:00.000Z/.test(n))throw Error("createdBeforeDate must be date and conform to iso8601 format")}t.putBucketLifecycle=async function(e,t,l){if(r(e),!n(t))throw Error("rules must be Array");const d=this._bucketRequestParams("PUT",e,"lifecycle",l),p=[],h={LifecycleConfiguration:{Rule:p}};t.forEach((e=>{!function(e){e.days&&(e.expiration={days:e.days});e.date&&(e.expiration={createdBeforeDate:e.date})}(e),function(e){if(e.id&&c(e.id)>255)throw Error("ID is composed of 255 bytes at most");if(void 0===e.prefix)throw Error("Rule must includes prefix");if(!["Enabled","Disabled"].includes(e.status))throw Error("Status must be  Enabled or Disabled");if(e.transition){if(!["IA","Archive"].includes(e.transition.storageClass))throw Error("StorageClass must be  IA or Archive");u(e.transition,"Transition")}if(e.expiration)if(e.expiration.expiredObjectDeleteMarker){if(e.expiration.days||e.expiration.createdBeforeDate)throw Error("expiredObjectDeleteMarker cannot be used with days or createdBeforeDate")}else u(e.expiration,"Expiration");e.abortMultipartUpload&&u(e.abortMultipartUpload,"AbortMultipartUpload");if(!(e.expiration||e.abortMultipartUpload||e.transition||e.noncurrentVersionTransition))throw Error("Rule must includes expiration or abortMultipartUpload or transition or noncurrentVersionTransition");if(e.tag){if(e.abortMultipartUpload)throw Error("Tag cannot be used with abortMultipartUpload");!function(e){if(!n(e)&&!i(e))throw Error("tag must be Object or Array");e=i(e)?[e]:e;const t={};o(e).forEach((e=>{t[e.key]=e.value})),a(t)}(e.tag)}}(e),e.id&&(e.ID=e.id,delete e.id),p.push(e)}));const f=s(h,{headers:!0,firstUpperCase:!0});d.content=f,d.mime="xml",d.successStatuses=[200];return{res:(await this.request(d)).res}}})),deleteBucketLifecycle$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.deleteBucketLifecycle=async function(e,t){r(e);const n=this._bucketRequestParams("DELETE",e,"lifecycle",t);n.successStatuses=[204];return{res:(await this.request(n)).res}}})),getBucketPolicy$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.getBucketPolicy=async function(e,t={}){r(e);const n=this._bucketRequestParams("GET",e,"policy",t),o=await this.request(n);n.successStatuses=[200];let i=null;return 200===o.res.status&&(i=JSON.parse(""+o.res.data)),{policy:i,status:o.status,res:o.res}}})),putBucketPolicy$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{policy2Str:n}=policy2Str_1,{isObject:o}=isObject;t.putBucketPolicy=async function(e,t,i={}){if(r(e),!o(t))throw Error("policy is not Object");const s=this._bucketRequestParams("PUT",e,"policy",i);s.content=n(t),s.successStatuses=[200];const a=await this.request(s);return{status:a.status,res:a.res}}})),deleteBucketPolicy$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.deleteBucketPolicy=async function(e,t={}){r(e);const n=this._bucketRequestParams("DELETE",e,"policy",t);n.successStatuses=[204];const o=await this.request(n);return{status:o.status,res:o.res}}})),getBucketVersioning$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName;t.getBucketVersioning=async function(e,t){r(e);const n=this._bucketRequestParams("GET",e,"versioning",t);n.xmlResponse=!0,n.successStatuses=[200];const o=await this.request(n);return{status:o.status,versionStatus:o.data.Status,res:o.res}}})),putBucketVersioning$1=createCommonjsModule((function(e,t){const{checkBucketName:r}=checkBucketName,{obj2xml:n}=obj2xml_1;t.putBucketVersioning=async function(e,t,o={}){if(r(e),!["Enabled","Suspended"].includes(t))throw Error("status must be Enabled or Suspended");const i=this._bucketRequestParams("PUT",e,"versioning",o),s={VersioningConfiguration:{Status:t}};i.mime="xml",i.content=n(s,{headers:!0});const a=await this.request(i);return{res:a.res,status:a.status}}})),dataFix_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.dataFix=void 0;const r=["true","TRUE","1",1],n=["false","FALSE","0",0];t.dataFix=function e(t,o,i){if(!isObject.isObject(t))return;const{remove:s=[],rename:a={},camel:c=[],bool:u=[],lowerFirst:l=!1}=o;return s.forEach((e=>delete t[e])),Object.entries(a).forEach((e=>{t[e[0]]&&(t[e[1]]||(t[e[1]]=t[e[0]],delete t[e[0]]))})),c.forEach((e=>{if(!t[e])return;const r=e.replace(/^(.)/,(e=>e.toLowerCase())).replace(/-(\w)/g,((e,t)=>t.toUpperCase()));t[r]||(t[r]=t[e])})),u.forEach((e=>{var o;t[e]=!!(o=t[e])&&(!!r.includes(o)||!n.includes(o)&&o)})),"function"==typeof i&&i(t),function(e,t){t&&Object.keys(e).forEach((t=>{const r=t.replace(/^\w/,(e=>e.toLowerCase()));void 0===e[r]&&(e[r]=e[t],delete e[t])}))}(t,l),e}})),formatInventoryConfig_1=createCommonjsModule((function(e,t){function r(e){return dataFix_1.dataFix(e,{bool:["IsEnabled"]},(e=>{var t,r;e.prefix=e.Filter.Prefix,delete e.Filter,e.OSSBucketDestination=e.Destination.OSSBucketDestination,e.OSSBucketDestination.rolename=e.OSSBucketDestination.RoleArn.replace(/.*\//,""),delete e.OSSBucketDestination.RoleArn,e.OSSBucketDestination.bucket=e.OSSBucketDestination.Bucket.replace(/.*:::/,""),delete e.OSSBucketDestination.Bucket,delete e.Destination,e.frequency=e.Schedule.Frequency,delete e.Schedule.Frequency,(null===(t=null==e?void 0:e.OptionalFields)||void 0===t?void 0:t.Field)&&!isArray$2.isArray(null===(r=e.OptionalFields)||void 0===r?void 0:r.Field)&&(e.OptionalFields.Field=[e.OptionalFields.Field])})),e=formatObjKey_1.formatObjKey(e,"firstLowerCase",{exclude:["OSSBucketDestination","SSE-OSS","SSE-KMS"]})}Object.defineProperty(t,"__esModule",{value:!0}),t.formatInventoryConfig=void 0,t.formatInventoryConfig=function(e,t=!1){return t&&isObject.isObject(e)&&(e=[e]),e=isArray$2.isArray(e)?e.map(r):r(e)}})),getBucketInventory_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getBucketInventory=void 0,t.getBucketInventory=async function(e,t,r={}){const n=Object.assign({inventory:"",inventoryId:t},r.subres);checkBucketName.checkBucketName(e);const o=this._bucketRequestParams("GET",e,n,r);o.successStatuses=[200],o.xmlResponse=!0;const i=await this.request(o);return{status:i.status,res:i.res,inventory:formatInventoryConfig_1.formatInventoryConfig(i.data)}}})),deleteBucketInventory_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBucketInventory=void 0,t.deleteBucketInventory=async function(e,t,r={}){const n=Object.assign({inventory:"",inventoryId:t},r.subres);checkBucketName.checkBucketName(e);const o=this._bucketRequestParams("DELETE",e,n,r);o.successStatuses=[204];const i=await this.request(o);return{status:i.status,res:i.res}}})),listBucketInventory_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.listBucketInventory=void 0,t.listBucketInventory=async function(e,t={}){const{continuationToken:r}=t,n=Object.assign({inventory:""},r&&{"continuation-token":r},t.subres);checkBucketName.checkBucketName(e);const o=this._bucketRequestParams("GET",e,n,t);o.successStatuses=[200],o.xmlResponse=!0;const i=await this.request(o),{data:s,res:a,status:c}=i;return{isTruncated:"true"===s.IsTruncated,nextContinuationToken:s.NextContinuationToken,inventoryList:formatInventoryConfig_1.formatInventoryConfig(s.InventoryConfiguration,!0),status:c,res:a}}})),putBucketInventory_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.putBucketInventory=void 0,t.putBucketInventory=async function(e,t,r={}){const n=Object.assign({inventory:"",inventoryId:t.id},r.subres);checkBucketName.checkBucketName(e);const{OSSBucketDestination:o,optionalFields:i,includedObjectVersions:s}=t,a=obj2xml_1.obj2xml({InventoryConfiguration:{Id:t.id,IsEnabled:t.isEnabled,Filter:{Prefix:t.prefix||""},Destination:{OSSBucketDestination:{Format:o.format,AccountId:o.accountId,RoleArn:`${`acs:ram::${o.accountId}:role/`}${o.rolename}`,Bucket:"acs:oss:::"+o.bucket,Prefix:o.prefix||"",Encryption:o.encryption||""}},Schedule:{Frequency:t.frequency},IncludedObjectVersions:s,OptionalFields:{Field:(null==i?void 0:i.field)||[]}}},{headers:!0,firstUpperCase:!0}),c=this._bucketRequestParams("PUT",e,n,r);c.successStatuses=[200],c.mime="xml",c.content=a;const u=await this.request(c);return{status:u.status,res:u.res}}})),abortBucketWorm_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.abortBucketWorm=void 0,t.abortBucketWorm=async function(e,t){checkBucketName.checkBucketName(e);const r=this._bucketRequestParams("DELETE",e,"worm",t),n=await this.request(r);return{res:n.res,status:n.status}}})),completeBucketWorm_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.completeBucketWorm=void 0,t.completeBucketWorm=async function(e,t,r){checkBucketName.checkBucketName(e);const n=this._bucketRequestParams("POST",e,{wormId:t},r),o=await this.request(n);return{res:o.res,status:o.status}}})),extendBucketWorm_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendBucketWorm=void 0,t.extendBucketWorm=async function(e,t,r,n){checkBucketName.checkBucketName(e);const o=this._bucketRequestParams("POST",e,{wormExtend:"",wormId:t},n),i={ExtendWormConfiguration:{RetentionPeriodInDays:r}};o.mime="xml",o.content=obj2xml_1.obj2xml(i,{headers:!0}),o.successStatuses=[200];const s=await this.request(o);return{res:s.res,status:s.status}}})),getBucketWorm_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getBucketWorm=void 0,t.getBucketWorm=async function(e,t){checkBucketName.checkBucketName(e);const r=this._bucketRequestParams("GET",e,"worm",t);r.successStatuses=[200],r.xmlResponse=!0;const n=await this.request(r);return dataFix_1.dataFix(n.data,{lowerFirst:!0,rename:{RetentionPeriodInDays:"days"}}),Object.assign(Object.assign({},n.data),{res:n.res,status:n.status})}})),initiateBucketWorm_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initiateBucketWorm=void 0,t.initiateBucketWorm=async function(e,t,r){checkBucketName.checkBucketName(e);const n=this._bucketRequestParams("POST",e,"worm",r),o={InitiateWormConfiguration:{RetentionPeriodInDays:t}};n.mime="xml",n.content=obj2xml_1.obj2xml(o,{headers:!0}),n.successStatuses=[200];const i=await this.request(n);return{res:i.res,wormId:i.res.headers["x-oss-worm-id"],status:i.status}}})),bucket$1=createCommonjsModule((function(e,t){const r=t;mergeDescriptors(r,getBucketRequestPayment),mergeDescriptors(r,putBucketRequestPayment),mergeDescriptors(r,putBucketEncryption$1),mergeDescriptors(r,getBucketEncryption$1),mergeDescriptors(r,deleteBucketEncryption$1),mergeDescriptors(r,getBucketTags),mergeDescriptors(r,putBucketTags),mergeDescriptors(r,deleteBucketTags),mergeDescriptors(r,putBucket$1),mergeDescriptors(r,getBucketWebsite$1),mergeDescriptors(r,putBucketWebsite$1),mergeDescriptors(r,deleteBucketWebsite$1),mergeDescriptors(r,getBucketLifecycle$1),mergeDescriptors(r,putBucketLifecycle$1),mergeDescriptors(r,deleteBucketLifecycle$1),mergeDescriptors(r,getBucketPolicy$1),mergeDescriptors(r,putBucketPolicy$1),mergeDescriptors(r,deleteBucketPolicy$1),mergeDescriptors(r,getBucketVersioning$1),mergeDescriptors(r,putBucketVersioning$1),mergeDescriptors(r,getBucketInventory_1),mergeDescriptors(r,deleteBucketInventory_1),mergeDescriptors(r,listBucketInventory_1),mergeDescriptors(r,putBucketInventory_1),mergeDescriptors(r,abortBucketWorm_1),mergeDescriptors(r,completeBucketWorm_1),mergeDescriptors(r,extendBucketWorm_1),mergeDescriptors(r,getBucketWorm_1),mergeDescriptors(r,initiateBucketWorm_1)})),bucket=createCommonjsModule((function(e,t){const{isArray:r}=isArray$2,{checkBucketName:n}=checkBucketName,{formatTag:o}=formatTag_1,i=t;function s(e){return e?r(e)?e:[e]:[]}i.listBuckets=async function(e={},t={}){const{subres:n={}}=e,i={};for(const t in e)"subres"!==t&&(i[t]=e[t]);const s=this._bucketRequestParams("GET","",Object.assign(n,t.subres),t);s.query=i;const a=await this.request(s);if(200===a.status){const e=await this.parseXML(a.data);let t=e.Buckets||null;return t&&(t.Bucket&&(t=t.Bucket),r(t)||(t=[t]),t=t.map((e=>({name:e.Name,region:e.Location,creationDate:e.CreationDate,storageClass:e.StorageClass,StorageClass:e.StorageClass,tag:o(e)})))),{buckets:t,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName},isTruncated:"true"===e.IsTruncated,nextMarker:e.NextMarker||null,res:a.res}}throw await this.requestError(a)},i.useBucket=function(e){return n(e),this.setBucket(e)},i.setBucket=function(e){return n(e),this.options.bucket=e,this},i.getBucket=function(){return this.options.bucket},i.getBucketLocation=async function(e,t){n(e),e=e||this.getBucket();const r=this._bucketRequestParams("GET",e,"location",t);r.successStatuses=[200],r.xmlResponse=!0;const o=await this.request(r);return{location:o.data,res:o.res}},i.getBucketInfo=async function(e,t){n(e),e=e||this.getBucket();const r=this._bucketRequestParams("GET",e,"bucketInfo",t);r.successStatuses=[200],r.xmlResponse=!0;const o=await this.request(r);return{bucket:o.data.Bucket,res:o.res}},i.deleteBucket=async function(e,t){n(e);const r=this._bucketRequestParams("DELETE",e,"",t),o=await this.request(r);if(200===o.status||204===o.status)return{res:o.res};throw await this.requestError(o)},i.putBucketACL=async function(e,t,r){n(e);const o=this._bucketRequestParams("PUT",e,"acl",r);o.headers={"x-oss-acl":t},o.successStatuses=[200];const i=await this.request(o);return{bucket:i.headers.location&&i.headers.location.substring(1)||null,res:i.res}},i.getBucketACL=async function(e,t){n(e);const r=this._bucketRequestParams("GET",e,"acl",t);r.successStatuses=[200],r.xmlResponse=!0;const o=await this.request(r);return{acl:o.data.AccessControlList.Grant,owner:{id:o.data.Owner.ID,displayName:o.data.Owner.DisplayName},res:o.res}},i.putBucketLogging=async function(e,t,r){n(e);const o=this._bucketRequestParams("PUT",e,"logging",r);let i=`<?xml version="1.0" encoding="UTF-8"?>\n<BucketLoggingStatus>\n<LoggingEnabled>\n<TargetBucket>${e}</TargetBucket>\n`;t&&(i+=`<TargetPrefix>${t}</TargetPrefix>\n`),i+="</LoggingEnabled>\n</BucketLoggingStatus>",o.content=i,o.mime="xml",o.successStatuses=[200];return{res:(await this.request(o)).res}},i.getBucketLogging=async function(e,t){n(e);const r=this._bucketRequestParams("GET",e,"logging",t);r.successStatuses=[200],r.xmlResponse=!0;const o=await this.request(r),i=o.data.LoggingEnabled;return{enable:!!i,prefix:i&&i.TargetPrefix||null,res:o.res}},i.deleteBucketLogging=async function(e,t){n(e);const r=this._bucketRequestParams("DELETE",e,"logging",t);r.successStatuses=[204,200];return{res:(await this.request(r)).res}},i.putBucketCORS=async function(e,t,r){n(e),assert__default.default((t=t||[]).length,"rules is required"),t.forEach((e=>{assert__default.default(e.allowedOrigin,"allowedOrigin is required"),assert__default.default(e.allowedMethod,"allowedMethod is required")}));const o=this._bucketRequestParams("PUT",e,"cors",r);let i='<?xml version="1.0" encoding="UTF-8"?>\n<CORSConfiguration>';const a=e=>{i+=`<AllowedOrigin>${e}</AllowedOrigin>`},c=e=>{i+=`<AllowedMethod>${e}</AllowedMethod>`},u=e=>{i+=`<AllowedHeader>${e}</AllowedHeader>`},l=e=>{i+=`<ExposeHeader>${e}</ExposeHeader>`};for(let e=0,r=t.length;r>e;e++){const r=t[e];i+="<CORSRule>",s(r.allowedOrigin).forEach(a),s(r.allowedMethod).forEach(c),s(r.allowedHeader).forEach(u),s(r.exposeHeader).forEach(l),r.maxAgeSeconds&&(i+=`<MaxAgeSeconds>${r.maxAgeSeconds}</MaxAgeSeconds>`),i+="</CORSRule>"}i+="</CORSConfiguration>",o.content=i,o.mime="xml",o.successStatuses=[200];return{res:(await this.request(o)).res}},i.getBucketCORS=async function(e,t){n(e);const o=this._bucketRequestParams("GET",e,"cors",t);o.successStatuses=[200],o.xmlResponse=!0;const i=await this.request(o),s=[];if(i.data&&i.data.CORSRule){let{CORSRule:e}=i.data;r(e)||(e=[e]),e.forEach((e=>{const t={};Object.keys(e).forEach((r=>{t[r.slice(0,1).toLowerCase()+r.slice(1,r.length)]=e[r]})),s.push(t)}))}return{rules:s,res:i.res}},i.deleteBucketCORS=async function(e,t){n(e);const r=this._bucketRequestParams("DELETE",e,"cors",t);r.successStatuses=[204];return{res:(await this.request(r)).res}},i.putBucketReferer=async function(e,t,r,o){n(e);const i=this._bucketRequestParams("PUT",e,"referer",o);let s='<?xml version="1.0" encoding="UTF-8"?>\n<RefererConfiguration>\n';if(s+=`  <AllowEmptyReferer>${t?"true":"false"}</AllowEmptyReferer>\n`,r&&r.length>0){s+="  <RefererList>\n";for(let e=0;r.length>e;e++)s+=`    <Referer>${r[e]}</Referer>\n`;s+="  </RefererList>\n"}else s+="  <RefererList />\n";s+="</RefererConfiguration>",i.content=s,i.mime="xml",i.successStatuses=[200];return{res:(await this.request(i)).res}},i.getBucketReferer=async function(e,t){n(e);const o=this._bucketRequestParams("GET",e,"referer",t);o.successStatuses=[200],o.xmlResponse=!0;const i=await this.request(o);let s=i.data.RefererList.Referer||null;return s&&(r(s)||(s=[s])),{allowEmpty:"true"===i.data.AllowEmptyReferer,referers:s,res:i.res}},i.deleteBucketReferer=async function(e,t){return n(e),await this.putBucketReferer(e,!0,null,t)},i._bucketRequestParams=function(e,t,r,n){return{method:e,bucket:t,subres:r,timeout:n&&n.timeout,ctx:n&&n.ctx}}})),isFile=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFile=void 0,t.isFile=e=>"undefined"!=typeof File&&e instanceof File})),managedUpload=createCommonjsModule((function(e,t){const{isFile:r}=isFile,{isArray:n}=isArray$2,{isBuffer:o}=isBuffer_1,{retry:i}=retry_1,s=t;s.multipartUpload=async function(e,t,n){if(this.resetCancelFlag(),(n=n||{}).checkpoint&&n.checkpoint.uploadId)return await this._resumeMultipart(n.checkpoint,n);const i=102400;n.mime||(n.mime=r(t)?lite.getType(path__default.default.extname(t.name)):o(t)?"":lite.getType(path__default.default.extname(t))),n.headers=n.headers||{},this._convertMetaToHeaders(n.meta,n.headers);const s=await this._getFileSize(t);if(i>s){n.contentLength=s;const r=await this.put(e,t,n);n&&n.progress&&await n.progress(1);const o={res:r.res,bucket:this.options.bucket,name:e,etag:r.res.headers.etag};return(n.headers&&n.headers["x-oss-callback"]||n.callback)&&(o.data=r.data),o}if(n.partSize&&parseInt(n.partSize,10)!==n.partSize)throw Error("partSize must be int number");if(n.partSize&&i>n.partSize)throw Error("partSize must not be smaller than 102400");const a=await this.initMultipartUpload(e,n),{uploadId:c}=a,u={file:t,name:e,fileSize:s,partSize:this._getPartSize(s,n.partSize),uploadId:c,doneParts:[]};return n&&n.progress&&await n.progress(0,u,a.res),await this._resumeMultipart(u,n)},s._resumeMultipart=async function(e,t){if(this.isCancel())throw this._makeCancelEvent();const{file:r,fileSize:o,partSize:s,uploadId:a,doneParts:c,name:u}=e,l=this._divideParts(o,s),d=l.length;let p=i(((o,i)=>new Promise((async(s,p)=>{try{if(!o.isCancel()){const s=l[i-1],p=await o._createStream(r,s.start,s.end),h={stream:p,size:s.end-s.start};n(o.multipartUploadStreams)?o.multipartUploadStreams.push(h.stream):o.multipartUploadStreams=[h.stream];const f=function(){p.destroyed||p.destroy();const e=o.multipartUploadStreams.indexOf(p);-1!==e&&o.multipartUploadStreams.splice(e,1)};let m;p.on("close",f),p.on("error",f);try{m=await o._uploadPart(u,a,i,h,{timeout:t.timeout})}catch(e){if(f(),404===e.status)throw o._makeAbortEvent();throw e}o.isCancel()||(c.push({number:i,etag:m.res.headers.etag}),e.doneParts=c,t.progress&&await t.progress(c.length/d,e,m.res))}s()}catch(e){e.partNum=i,p(e)}}))),this.options.retryMax,{errorHandler:e=>!!(e=>[-1,-2].includes(e.status)&&(this.options.requestErrorRetryHandle||(()=>!0))(e))(e)});const h=Array.from(Array(d),((e,t)=>t+1)),f=c.map((e=>e.number)),m=h.filter((e=>0>f.indexOf(e))),y=t.parallel||5;if(this.checkBrowserAndVersion("Internet Explorer","10")||1===y)for(let e=0;m.length>e;e++){if(this.isCancel())throw this._makeCancelEvent();await p(this,m[e])}else{const e=await this._parallelNode(m,y,p),t=e.find((e=>"abort"===e.name));if(t)throw t;if(this.isCancel())throw p=null,this._makeCancelEvent();if(e&&e.length>0)throw e[0].message=`Failed to upload some parts with error: ${""+e[0]} part_num: ${e[0].partNum}`,e[0]}return await this.completeMultipartUpload(u,a,c,t)},s._getFileSize=async function(e){if(o(e))return e.length;if(r(e))return e.size;if(isTypeOf.string(e)){return(await this._statFile(e)).size}throw Error("_getFileSize requires Buffer/File/String.")};const{Readable:a}=require$$0__default.default;function c(e,t){if(!(this instanceof c))return new c(e,t);a.call(this,t),this.file=e,this.reader=new FileReader,this.start=0,this.finish=!1,this.fileBuffer=null}util__default.default.inherits(c,a),c.prototype.readFileAndPush=function(e){if(this.fileBuffer){let t=!0;for(;t&&this.fileBuffer&&this.fileBuffer.length>this.start;){const{start:r}=this;let n=r+e;n=n>this.fileBuffer.length?this.fileBuffer.length:n,this.start=n,t=this.push(this.fileBuffer.slice(r,n))}}},c.prototype._read=function(e){if(this.file&&this.start>=this.file.size||this.fileBuffer&&this.start>=this.fileBuffer.length||this.finish||0===this.start&&!this.file)return this.finish||(this.fileBuffer=null,this.finish=!0),void this.push(null);e=e||16384;const t=this;this.reader.onload=function(r){t.fileBuffer=Buffer.from(new Uint8Array(r.target.result)),t.file=null,t.readFileAndPush(e)},this.reader.onerror=function(e){const t=e.srcElement&&e.srcElement.error;if(t)throw t;throw e},0===this.start?this.reader.readAsArrayBuffer(this.file):this.readFileAndPush(e)},s._createStream=function(e,t,n){if(isTypeOf.readableStream(e))return e;if(r(e))return new c(e.slice(t,n));if(o(e)){const r=e.subarray(t,n);return new a({read(){this.push(r),this.push(null)}})}if(isTypeOf.string(e))return fs.createReadStream(e,{start:t,end:n-1});throw Error("_createStream requires Buffer/File/String.")},s._getPartSize=function(e,t){t||(t=1048576);const r=Math.ceil(e/1e4);return r>t&&console.warn(`partSize has been set to ${t=r}, because the partSize you provided causes partNumber to be greater than 10,000`),t},s._divideParts=function(e,t){const r=Math.ceil(e/t),n=[];for(let o=0;r>o;o++){const r=t*o;n.push({start:r,end:Math.min(r+t,e)})}return n}})),toXML=function(e,t){var r="";(t=t||{}).header&&(r="string"==typeof t.header?t.header:'<?xml version="1.0" encoding="UTF-8"?>\n');var n=t.indent||"",o=function(e){if(!t.filter)return e;var r=t.filter,n=[];for(var o in r)r.hasOwnProperty(o)&&n.push(o);return(e+"").replace(RegExp("("+n.join("|")+")","g"),(function(e,t){return r[t]||""}))},i=function(e){r+=e+(n?"\n":"")},s=function(e){var t="",r="",n=e.attrs||"";for(var s in n)n.hasOwnProperty(s)&&(t+=" "+s+'="'+n[s]+'"');r+=(e.indent||"")+"<"+(e.closeTag?"/":"")+e.name+(e.closeTag?"":t)+(e.selfCloseTag?"/":"")+">",(e.text||""===e.text)&&(r+=o(e.text)+"</"+e.name+">"),i(r)},a=function(e,t,r){if(Array.isArray(e))e.every((function(e){return t(e,r),!0}));else if(e._name)t(e,r);else for(var n in e){var o=typeof e[n];e.hasOwnProperty(n)&&(e[n]||"boolean"===o||"number"===o)?t({_name:n,_content:e[n]},r):e.hasOwnProperty(n)&&null===e[n]?t(n,r):e.hasOwnProperty(n)&&""===e[n]&&s({name:n,text:""})}};return function e(t,r){var c=typeof t;r||(r=""),Array.isArray(t)&&(c="array");var u={string:function(){i(r+o(t))},boolean:function(){i(r+(t?"true":"false"))},number:function(){i(r+t)},array:function(){a(t,e,r)},function:function(){i(r+t())},object:function(){if(t._name){var o={name:t._name,indent:r,attrs:t._attrs},i=typeof t._content;if("undefined"===i||!0===t._content._selfCloseTag)return t._content&&t._content._attrs&&(o.attrs=t._content._attrs),o.selfCloseTag=!0,void s(o);var c={string:function(){o.text=t._content,s(o)},boolean:function(){o.text=t._content?"true":"false",s(o)},number:function(){o.text=""+t._content,s(o)},object:function(){s(o),a(t._content,e,r+n),o.closeTag=!0,s(o)},function:function(){o.text=t._content(),s(o)}};c[i]&&c[i]()}else a(t,e,r)}};u[c]&&u[c]()}(e,""),r},toXML_1=toXML,jstoxml={toXML:toXML_1},rtmp=createCommonjsModule((function(e,t){const r=t;r.putChannel=async function(e,t,r){(r=r||{}).subres="live";const n=this._objectRequestParams("PUT",e,r);n.xmlResponse=!0,n.content=jstoxml.toXML({LiveChannelConfiguration:t}),n.successStatuses=[200];const o=await this.request(n);let i=o.data.PublishUrls.Url;Array.isArray(i)||(i=[i]);let s=o.data.PlayUrls.Url;return Array.isArray(s)||(s=[s]),{publishUrls:i,playUrls:s,res:o.res}},r.getChannel=async function(e,t){(t=t||{}).subres="live";const r=this._objectRequestParams("GET",e,t);r.xmlResponse=!0,r.successStatuses=[200];const n=await this.request(r);return{data:n.data,res:n.res}},r.deleteChannel=async function(e,t){(t=t||{}).subres="live";const r=this._objectRequestParams("DELETE",e,t);r.successStatuses=[204];return{res:(await this.request(r)).res}},r.putChannelStatus=async function(e,t,r){(r=r||{}).subres={live:null,status:t};const n=this._objectRequestParams("PUT",e,r);n.successStatuses=[200];return{res:(await this.request(n)).res}},r.getChannelStatus=async function(e,t){(t=t||{}).subres={live:null,comp:"stat"};const r=this._objectRequestParams("GET",e,t);r.xmlResponse=!0,r.successStatuses=[200];const n=await this.request(r);return{data:n.data,res:n.res}},r.listChannels=async function(e,t){(t=t||{}).subres="live";const r=this._objectRequestParams("GET","",t);r.query=e,r.xmlResponse=!0,r.successStatuses=[200];const n=await this.request(r);let o=n.data.LiveChannel||[];return Array.isArray(o)||(o=[o]),o=o.map((e=>(e.PublishUrls=e.PublishUrls.Url,Array.isArray(e.PublishUrls)||(e.PublishUrls=[e.PublishUrls]),e.PlayUrls=e.PlayUrls.Url,Array.isArray(e.PlayUrls)||(e.PlayUrls=[e.PlayUrls]),e))),{channels:o,nextMarker:n.data.NextMarker||null,isTruncated:"true"===n.data.IsTruncated,res:n.res}},r.getChannelHistory=async function(e,t){(t=t||{}).subres={live:null,comp:"history"};const r=this._objectRequestParams("GET",e,t);r.xmlResponse=!0,r.successStatuses=[200];const n=await this.request(r);let o=n.data.LiveRecord||[];return Array.isArray(o)||(o=[o]),{records:o,res:n.res}},r.createVod=async function(e,t,r,n){(n=n||{}).subres={vod:null},copyTo(r).to(n.subres);const o=this._objectRequestParams("POST",`${e}/${t}`,n);o.query=r,o.successStatuses=[200];return{res:(await this.request(o)).res}},r.getRtmpUrl=function(e,t){t=t||{};const r=utility.timestamp()+(t.expires||1800),n={bucket:this.options.bucket,object:this._objectName("live/"+e)},o=`/${n.bucket}/${e}`;t.params=t.params||{};const i=Object.keys(t.params).sort().map((e=>`${e}:${t.params[e]}\n`)).join(""),s=this.signature(`${r}\n${i}${o}`),a=urlutil__default.default.parse(this._getReqUrl(n));return a.protocol="rtmp:",a.query={OSSAccessKeyId:this.options.accessKeyId,Expires:r,Signature:s},copyTo(t.params).to(a.query),a.format()}})),multipartCopy=createCommonjsModule((function(e,t){const r=debug$2(),n=t;n.uploadPartCopy=async function(e,t,r,n,o,i={}){i.headers=i.headers||{};const s=i.versionId||i.subres&&i.subres.versionId||null;let a;a=s?`/${o.sourceBucketName}/${encodeURIComponent(o.sourceKey)}?versionId=${s}`:`/${o.sourceBucketName}/${encodeURIComponent(o.sourceKey)}`,i.headers["x-oss-copy-source"]=a,n&&(i.headers["x-oss-copy-source-range"]="bytes="+n),i.subres={partNumber:r,uploadId:t};const c=this._objectRequestParams("PUT",e,i);c.mime=i.mime,c.successStatuses=[200];const u=await this.request(c);return{name:e,etag:u.res.headers.etag,res:u.res}},n.multipartUploadCopy=async function(e,t,r={}){this.resetCancelFlag();const{versionId:n=null}=r,o={versionId:n},i=(await this._getObjectMeta(t.sourceBucketName,t.sourceKey,o)).res.headers["content-length"];if(t.startOffset=t.startOffset||0,t.endOffset=t.endOffset||i,r.checkpoint&&r.checkpoint.uploadId)return await this._resumeMultipartCopy(r.checkpoint,t,r);const s=102400,a=t.endOffset-t.startOffset;if(s>a)throw Error("copySize must not be smaller than 102400");if(r.partSize&&s>r.partSize)throw Error("partSize must not be smaller than 102400");const c=await this.initMultipartUpload(e,r),{uploadId:u}=c,l={name:e,copySize:a,partSize:this._getPartSize(a,r.partSize),uploadId:u,doneParts:[]};return r&&r.progress&&await r.progress(0,l,c.res),await this._resumeMultipartCopy(l,t,r)},n._resumeMultipartCopy=async function(e,t,n){if(this.isCancel())throw this._makeCancelEvent();const{versionId:o=null}=n,i={versionId:o},{copySize:s,partSize:a,uploadId:c,doneParts:u,name:l}=e,d=this._divideMultipartCopyParts(s,a,t.startOffset),p=d.length,h={headers:{}};n.copyheaders&&copyTo(n.copyheaders).to(h.headers),o&&copyTo(i).to(h);const f=function(t,o,i){return new Promise((async(s,a)=>{try{if(!t.isCancel()){const s=d[o-1],a=`${s.start}-${s.end-1}`;let f;try{f=await t.uploadPartCopy(l,c,o,a,i,h)}catch(e){if(404===e.status)throw t._makeAbortEvent();throw e}t.isCancel()||(r("content-range "+f.res.headers["content-range"]),u.push({number:o,etag:f.res.headers.etag}),e.doneParts=u,n&&n.progress&&await n.progress(u.length/p,e,f.res))}s()}catch(e){e.partNum=o,a(e)}}))},m=Array.from(Array(p),((e,t)=>t+1)),y=u.map((e=>e.number)),g=m.filter((e=>0>y.indexOf(e))),b=n.parallel||5;if(this.checkBrowserAndVersion("Internet Explorer","10")||1===b)for(let e=0;g.length>e;e++){if(this.isCancel())throw this._makeCancelEvent();await f(this,g[e],t)}else{const e=await this._parallelNode(g,b,f,t),r=e.find((e=>"abort"===e.name));if(r)throw r;if(this.isCancel())throw this._makeCancelEvent();if(e&&e.length>0){const t=e[0];throw t.message=`Failed to copy some parts with error: ${""+t} part_num: ${t.partNum}`,t}}return await this.completeMultipartUpload(l,c,u,n)},n._divideMultipartCopyParts=function(e,t,r){const n=Math.ceil(e/t),o=[];for(let i=0;n>i;i++){const n=t*i+r;o.push({start:n,end:Math.min(n+t,e+r)})}return o},n._getObjectMeta=async function(e,t,r){const n=this.getBucket();this.setBucket(e);const o=await this.head(t,r);return this.setBucket(n),o}})),parallel=createCommonjsModule((function(e,t){const{isArray:r}=isArray$2,n=t;n._parallelNode=async function(e,t,r,n){const o=this,i=[];let s=[];const a=e.length%t,c=0===a?e.length/t:(e.length-a)/t+1;let u=1;for(let a=0;e.length>a&&!o.isCancel();a++)if(s.push(n?r(o,e[a],n):r(o,e[a])),s.length===t||u===c&&a===e.length-1){try{u+=1,await Promise.all(s)}catch(e){i.push(e)}s=[]}return i},n._parallel=function(e,t,r){const n=this;return new Promise((o=>{const i=[];if(0>=t||!e)return void o(i);function s(e){return function(...t){if(null===e)throw Error("Callback was already called.");const r=e;e=null,r.apply(this,t)}}const a=function(e){let t=-1;const r=e.length;return function(){return++t<r&&!n.isCancel()?{value:e[t],key:t}:null}}(e);let c=!1,u=0,l=!1;function d(e,t){u-=1,e?(c=!0,i.push(e),o(i)):t==={}||c&&0>=u?(c=!0,o(i)):l||(n.isCancel()?o(i):h())}function p(e,t){r(e).then((e=>{t(null,e)})).catch((e=>{t(e)}))}function h(){for(l=!0;t>u&&!c&&!n.isCancel();){const e=a();if(null===e||i.length>0)return c=!0,void(u>0||o(i));u+=1,p(e.value,s(d))}l=!1}h()}))},n.cancel=function(e){this.options.cancelFlag=!0,r(this.multipartUploadStreams)&&this.multipartUploadStreams.forEach((e=>{if(!1===e.destroyed){e.destroy({name:"cancel",message:"cancel"})}})),this.multipartUploadStreams=[],e&&this.abortMultipartUpload(e.name,e.uploadId,e.options)},n.isCancel=function(){return this.options.cancelFlag},n.resetCancelFlag=function(){this.options.cancelFlag=!1},n._stop=function(){this.options.cancelFlag=!0},n._makeCancelEvent=function(){return{status:0,name:"cancel"}},n._makeAbortEvent=function(){return{status:0,name:"abort",message:"upload task has been abort"}}})),multipart=createCommonjsModule((function(e,t){const{deepCopyWith:r}=deepCopy,{isBuffer:n}=isBuffer_1,o=t;o.listUploads=async function(e,t){const r={};copyTo(t=t||{}).to(r),r.subres="uploads";const n=this._objectRequestParams("GET","",r);n.query=e,n.xmlResponse=!0,n.successStatuses=[200];const o=await this.request(n);let i=o.data.Upload||[];return Array.isArray(i)||(i=[i]),i=i.map((e=>({name:e.Key,uploadId:e.UploadId,initiated:e.Initiated}))),{res:o.res,uploads:i,bucket:o.data.Bucket,nextKeyMarker:o.data.NextKeyMarker,nextUploadIdMarker:o.data.NextUploadIdMarker,isTruncated:"true"===o.data.IsTruncated}},o.listParts=async function(e,t,r,n){const o={};copyTo(n=n||{}).to(o),o.subres={uploadId:t};const i=this._objectRequestParams("GET",e,o);i.query=r,i.xmlResponse=!0,i.successStatuses=[200];const s=await this.request(i);return{res:s.res,uploadId:s.data.UploadId,bucket:s.data.Bucket,name:s.data.Key,partNumberMarker:s.data.PartNumberMarker,nextPartNumberMarker:s.data.NextPartNumberMarker,maxParts:s.data.MaxParts,isTruncated:s.data.IsTruncated,parts:s.data.Part||[]}},o.abortMultipartUpload=async function(e,t,r){this._stop();const n={};copyTo(r=r||{}).to(n),n.subres={uploadId:t};const o=this._objectRequestParams("DELETE",e,n);o.successStatuses=[204];return{res:(await this.request(o)).res}},o.initMultipartUpload=async function(e,t){const r={};copyTo(t=t||{}).to(r),r.headers=r.headers||{},this._convertMetaToHeaders(t.meta,r.headers),r.subres="uploads";const n=this._objectRequestParams("POST",e,r);n.mime=t.mime,n.xmlResponse=!0,n.successStatuses=[200];const o=await this.request(n);return{res:o.res,bucket:o.data.Bucket,name:o.data.Key,uploadId:o.data.UploadId}},o.uploadPart=async function(e,t,r,n,o,i,s){const a={size:i-o};return process&&process.browser?a.content=await this._createBuffer(n,o,i):a.stream=await this._createStream(n,o,i),await this._uploadPart(e,t,r,a,s)},o.completeMultipartUpload=async function(e,t,o,i){const s=o.concat().sort(((e,t)=>e.number-t.number)).filter(((e,t,r)=>!t||e.number!==r[t-1].number));let a='<?xml version="1.0" encoding="UTF-8"?>\n<CompleteMultipartUpload>\n';for(let e=0;s.length>e;e++){const t=s[e];a+="<Part>\n",a+=`<PartNumber>${t.number}</PartNumber>\n`,a+=`<ETag>${t.etag}</ETag>\n`,a+="</Part>\n"}a+="</CompleteMultipartUpload>";let c={};c=r(i=i||{},(e=>{if(n(e))return null})),c.headers&&delete c.headers["x-oss-server-side-encryption"],c.subres={uploadId:t};const u=this._objectRequestParams("POST",e,c);callback.encodeCallback(u,c),u.mime="xml",u.content=a,u.headers&&u.headers["x-oss-callback"]||(u.xmlResponse=!0),u.successStatuses=[200];const l=await this.request(u),d={res:l.res,bucket:u.bucket,name:e,etag:l.res.headers.etag};return u.headers&&u.headers["x-oss-callback"]&&(d.data=JSON.parse(""+l.data)),d},o._uploadPart=async function(e,t,r,n,o){const i={};copyTo(o=o||{}).to(i),i.headers={"Content-Length":n.size},i.subres={partNumber:r,uploadId:t};const s=this._objectRequestParams("PUT",e,i);s.mime=i.mime;process&&process.browser?s.content=n.content:s.stream=n.stream,s.successStatuses=[200],s.disabledMD5=o.disabledMD5;const a=await this.request(s);if(!a.res.headers.etag)throw Error("Please set the etag of expose-headers in OSS \n https://help.aliyun.com/document_detail/32069.html");return n.stream&&(n.stream=null,s.stream=null),{name:e,etag:a.res.headers.etag,res:a.res}}})),image=function(e){function t(r){if(!(this instanceof t))return new t(r);if(!r.bucket)throw Error("require bucket for image service instance");if(!r.imageHost)throw Error("require imageHost for image service instance");r.endpoint=r.imageHost,this.ossClient=new e(r),this.ossClient.options.imageHost=r.imageHost}return t.prototype.get=async function(e,t,r){return await this.ossClient.get(e,t,r)},t.prototype.getStream=async function(e,t){return await this.ossClient.getStream(e,t)},t.prototype.getExif=async function(e,t){const r=this.ossClient._objectRequestParams("GET",e+"@exif",t);r.successStatuses=[200];let n=await this.ossClient.request(r);return n=await this._parseResponse(n),{res:n.res,data:n.data}},t.prototype.getInfo=async function(e,t){const r=this.ossClient._objectRequestParams("GET",e+"@infoexif",t);r.successStatuses=[200];let n=await this.ossClient.request(r);return n=await this._parseResponse(n),{res:n.res,data:n.data}},t.prototype.putStyle=async function(e,t,r){const n=this.ossClient._objectRequestParams("PUT","/?style&styleName="+e,r);n.successStatuses=[200],n.content=`<?xml version="1.0" encoding="UTF-8"?>\n<Style><Content>${t}</Content></Style>`;let o=await this.ossClient.request(n);return o=await this._parseResponse(o),{res:o.res,data:o.data}},t.prototype.getStyle=async function(e,t){const r=this.ossClient._objectRequestParams("GET","/?style&styleName="+e,t);r.successStatuses=[200];let n=await this.ossClient.request(r);return n=await this._parseResponse(n),{res:n.res,data:n.data}},t.prototype.listStyle=async function(e){const t=this.ossClient._objectRequestParams("GET","/?style",e);t.successStatuses=[200];let r=await this.ossClient.request(t);return r=await this._parseResponse(r),{res:r.res,data:r.data.Style}},t.prototype.deleteStyle=async function(e,t){const r=this.ossClient._objectRequestParams("DELETE","/?style&styleName="+e,t);r.successStatuses=[204];return{res:(await this.ossClient.request(r)).res}},t.prototype.signatureUrl=function(e){return this.ossClient.signatureUrl(e)},t.prototype._parseResponse=async function(e){const t=""+e.data,r=e.res.headers["content-type"];if("application/json"===r){const r=JSON.parse(t);e.data={},r&&Object.keys(r).forEach((t=>{e.data[t]=parseFloat(r[t].value,10)||r[t].value}))}else"application/xml"===r&&(e.data=await this.ossClient.parseXML(t));return e},t};function ready(e){if(this._ready=!!this._ready,this._readyCallbacks=this._readyCallbacks||[],0===arguments.length)return new Promise(function(e){if(this._ready)return e();this._readyCallbacks.push(e)}.bind(this));"function"==typeof e?this._readyCallbacks.push(e):this._ready=!!e,this._ready&&this._readyCallbacks.splice(0,1/0).forEach((function(e){process.nextTick(e)}))}function mixin(e){e.ready=ready}var getReady=mixin,mixin_1=mixin;getReady.mixin=mixin_1;var EventEmitter=require$$1__default.default.EventEmitter,sdkBase=Base;function Base(){EventEmitter.call(this),this.on("error",this.defaultErrorHandler.bind(this))}util__default.default.inherits(Base,EventEmitter),getReady.mixin(Base.prototype),Base.prototype.defaultErrorHandler=function(e){if(1>=this.listeners("error").length){console.error("\n[%s][pid: %s][%s][%s] %s: %s \nError Stack:\n  %s",Date(),process.pid,this.constructor.name,__filename,e.name,e.message,e.stack);var t=[];for(var r in e)"name"!==r&&"message"!==r&&t.push(util__default.default.format("  %s: %j",r,e[r]));t.length&&console.error("Error Additions:\n%s",t.join("\n")),console.error()}};var DEFAULT_RESOLV_FILE="/etc/resolv.conf";function getInterfaceName(){var e="eth",t=os__default.default.platform();return"darwin"===t?e="en":"win32"===t&&(e=null),e}function getIfconfigCMD(){return"win32"===os__default.default.platform()?"ipconfig/all":"/sbin/ifconfig"}function address(e,t){"function"==typeof e&&(t=e,e=null);var r={ip:address.ip(e),ipv6:address.ipv6(e),mac:null};address.mac(e,(function(e,n){n&&(r.mac=n),t(e,r)}))}address.interface=function(e,t){var r=os__default.default.networkInterfaces(),n=!t;t=t||getInterfaceName(),e=e||"IPv4";for(var o=-1;8>o;o++){if(a=r[t+(0>o?"":o)])for(var i=0;a.length>i;i++){if((c=a[i]).family===e)return c}}if(n)for(var s in r){var a=r[s];for(o=0;a.length>o;o++){var c;if((c=a[o]).family===e&&"127.0.0.1"!==c.address)return c}}},address.ip=function(e){var t=address.interface("IPv4",e);return t&&t.address},address.ipv6=function(e){var t=address.interface("IPv6",e);return t&&t.address};var MAC_OSX_START_LINE=/^(\w+)\:\s+flags=/,MAC_LINUX_START_LINE=/^(\w+)\s{2,}link encap:\w+/i,MAC_RE=address.MAC_RE=/(?:ether|HWaddr)\s+((?:[a-z0-9]{2}\:){5}[a-z0-9]{2})/i,MAC_IP_RE=address.MAC_IP_RE=/inet\s(?:addr\:)?(\d+\.\d+\.\d+\.\d+)/;function getMAC(e,t,r){for(var n=e.split("\n"),o=0;n.length>o;o++){var i=n[o].trimRight(),s=MAC_OSX_START_LINE.exec(i)||MAC_LINUX_START_LINE.exec(i);if(s)if(0===s[1].indexOf(t)){var a=null,c=null,u=MAC_RE.exec(i);for(u&&(c=u[1]),o++;;){if(!(i=n[o])||MAC_OSX_START_LINE.exec(i)||MAC_LINUX_START_LINE.exec(i)){o--;break}c||(u=MAC_RE.exec(i))&&(c=u[1]),a||(u=MAC_IP_RE.exec(i))&&(a=u[1]),o++}if(a===r)return c}}}address.mac=function(e,t){"function"==typeof e&&(t=e,e=null),e=e||getInterfaceName();var r=address.interface("IPv4",e);return r?(process.env.CI||"ff:00:00:00:00:00"!==r.mac&&"00:00:00:00:00:00"!==r.mac||(r.mac=""),r.mac?t(null,r.mac):void child__default.default.exec(getIfconfigCMD(),{timeout:5e3},(function(n,o,i){if(n||!o)return t(n);var s=getMAC(o||"",e,r.address);t(null,s)}))):t()};var DNS_SERVER_RE=/^nameserver\s+(\d+\.\d+\.\d+\.\d+)$/i;address.dns=function(e,t){"function"==typeof e&&(t=e,e=null),fs__default.default.readFile(e=e||DEFAULT_RESOLV_FILE,"utf8",(function(e,r){if(e)return t(e);for(var n=[],o=(r=r||"").split("\n"),i=0;o.length>i;i++){var s=o[i].trim(),a=DNS_SERVER_RE.exec(s);a&&n.push(a[1])}t(null,n)}))};var address_1=address;const currentIP=address_1.ip(),RR="roundRobin",MS="masterSlave";var cluster=function(e){function t(r){if(!(this instanceof t))return new t(r);if(!r||!Array.isArray(r.cluster))throw Error("require options.cluster to be an array");sdkBase.call(this),this.clients=[],this.availables={};for(let t=0;r.cluster.length>t;t++){const n=r.cluster[t];copyTo(r).pick("timeout","agent","urllib").to(n),this.clients.push(new e(n)),this.availables[t]=!0}this.schedule=r.schedule||RR,this.masterOnly=!!r.masterOnly,this.index=0;const n=r.heartbeatInterval||1e4;this._checkAvailableLock=!1,this._timerId=this._deferInterval(this._checkAvailable.bind(this,!0),n),this._ignoreStatusFile=r.ignoreStatusFile||!1,this._init()}util__default.default.inherits(t,sdkBase);const r=t.prototype;getReady.mixin(r);return["head","get","getStream","list","getACL"].forEach((e=>{r[e]=async function(...t){const r=this.chooseAvailable();let n;try{return await r[e](...t)}catch(e){if(e.status&&e.status>=200&&500>e.status)throw e;n=e}for(let o=0;this.clients.length>o;o++){const i=this.clients[o];if(i!==r)try{return await i[e].apply(r,t)}catch(e){if(e.status&&e.status>=200&&500>e.status)throw e;n=e}}throw n.message+=" (all clients are down)",n}})),["put","putStream","delete","deleteMulti","copy","putMeta","putACL"].forEach((e=>{r[e]=async function(...t){return(await Promise.all(this.clients.map((r=>r[e](...t)))))[0]}})),r.signatureUrl=function(...e){return this.chooseAvailable().signatureUrl(...e)},r.getObjectUrl=function(...e){return this.chooseAvailable().getObjectUrl(...e)},r._init=function(){const e=this;(async()=>{await e._checkAvailable(e._ignoreStatusFile),e.ready(!0)})().catch((t=>{e.emit("error",t)}))},r._checkAvailable=async function(e){const t=`._ali-oss/check.status.${currentIP}.txt`;if(e||await this.put(t,Buffer.from("check available started at "+Date())),this._checkAvailableLock)return;this._checkAvailableLock=!0;const r=[];for(let e=0;this.clients.length>e;e++){const n=this.clients[e];let o=await this._checkStatus(n,t);o||(o=await this._checkStatus(n,t)),o||(o=await this._checkStatus(n,t),o||r.push(n._objectUrl(t))),this.availables[e]=o}if(this._checkAvailableLock=!1,r.length>0){const e=Error(`${r.length} data node down, please check status file: ${r.join(", ")}`);e.name="CheckAvailableError",this.emit("error",e)}},r._checkStatus=async function(e,t){let r=!0;try{await e.head(t)}catch(e){e.status&&500>e.status&&e.status>=200||(r=!1)}return r},r.chooseAvailable=function(){if(this.schedule===MS){if(this.masterOnly)return this.clients[0];for(let e=0;this.clients.length>e;e++)if(this.availables[e])return this.clients[e];return this.clients[0]}let e=this.clients.length;for(;e>0;){const t=this._nextRRIndex();if(this.availables[t])return this.clients[t];e--}return this.clients[0]},r._nextRRIndex=function(){const e=this.index++;return this.clients.length>this.index||(this.index=0),e},r._error=function(e){if(e)throw e},r._createCallback=function(e,t,r){return()=>{r=r||this._error,t.call(e).then((()=>{r()}),r)}},r._deferInterval=function(e,t,r){return setInterval(this._createCallback(this,e,r),t)},r.close=function(){clearInterval(this._timerId),this._timerId=null},t};const debug$1=debug$2(),globalHttpAgent$1=new browser$1;function STS(e){if(!(this instanceof STS))return new STS(e);if(!e||!e.accessKeyId||!e.accessKeySecret)throw Error("require accessKeyId, accessKeySecret");this.options={endpoint:e.endpoint||"https://sts.aliyuncs.com",format:"JSON",apiVersion:"2015-04-01",sigMethod:"HMAC-SHA1",sigVersion:"1.0",timeout:"60s"},copyTo(e).to(this.options),this.options.urllib?this.urllib=this.options.urllib:(this.urllib=xhr,this.agent=this.options.agent||globalHttpAgent$1)}var sts=STS;const proto$1=STS.prototype;proto$1.assumeRole=async function(e,t,r,n,o){const i=this.options,s={Action:"AssumeRole",RoleArn:e,RoleSessionName:n||"app",DurationSeconds:r||3600,Format:i.format,Version:i.apiVersion,AccessKeyId:i.accessKeyId,SignatureMethod:i.sigMethod,SignatureVersion:i.sigVersion,SignatureNonce:Math.random(),Timestamp:(new Date).toISOString()};if(t){let e;if(isTypeOf.string(t))try{e=JSON.stringify(JSON.parse(t))}catch(e){throw Error("Policy string is not a valid JSON: "+e.message)}else e=JSON.stringify(t);s.Policy=e}const a=this._getSignature("POST",s,i.accessKeySecret);s.Signature=a;const c=i.endpoint,u={agent:this.agent,timeout:humanizeMs(o&&o.timeout||i.timeout),method:"POST",content:querystring__default.default.stringify(s),headers:{"Content-Type":"application/x-www-form-urlencoded"},ctx:o&&o.ctx},l=await this.urllib.request(c,u);if(debug$1("response %s %s, got %s, headers: %j",u.method,c,l.status,l.headers),2!==Math.floor(l.status/100)){const e=await this._requestError(l);throw e.params=u,e}return l.data=JSON.parse(l.data),{res:l.res,credentials:l.data.Credentials}},proto$1._requestError=async function(e){const t=Error();t.status=e.status;try{const r=await JSON.parse(e.data)||{};t.code=r.Code,t.message=`${r.Code}: ${r.Message}`,t.requestId=r.RequestId}catch(r){t.message="UnknownError: "+(e.data+"")}return t},proto$1._getSignature=function(e,t,r){const n=this,o=Object.keys(t).sort().map((e=>`${n._escape(e)}=${n._escape(t[e])}`)).join("&"),i=`${e.toUpperCase()}&${this._escape("/")}&${this._escape(o)}`;let s=crypto$1.createHmac("sha1",r+"&");return s=s.update(i).digest("base64"),s},proto$1._escape=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")};const debug=debug$2(),HttpsAgentKeepalive=browser$1.HttpsAgent,{createRequest:createRequest}=createRequest_1,{encoder:encoder}=encoder_1,{getReqUrl:getReqUrl}=getReqUrl_1,{setSTSToken:setSTSToken}=setSTSToken_1,{retry:retry$1}=retry_1,globalHttpAgent=new browser$1,globalHttpsAgent=new HttpsAgentKeepalive;function Client(e,t){if(!(this instanceof Client))return new Client(e,t);this.options=e&&e.inited?e:Client.initOptions(e),this.options.urllib?this.urllib=this.options.urllib:(this.urllib=xhr,this.agent=this.options.agent||globalHttpAgent,this.httpsAgent=this.options.httpsAgent||globalHttpsAgent),this.ctx=t,this.userAgent=this._getUserAgent()}var client=Client;Client.initOptions=function(e){return initOptions(e)};const proto=Client.prototype;async function request$2(e){const t=createRequest.call(this,e);let r,n,o;try{r=await this.urllib.request(t.url,t.params),debug("response %s %s, got %s, headers: %j",e.method,t.url,r.status,r.headers)}catch(o){n=o}if(r&&e.successStatuses&&-1===e.successStatuses.indexOf(r.status)?(o=await this.requestError(r),o.params=e):n&&(o=await this.requestError(n)),o){if(e.customResponse&&r&&r.res&&await streamWormhole(r.res),403===o.status&&"InvalidAccessKeyId"===o.code&&this.options.accessKeyId.startsWith("STS.")&&"function"==typeof this.options.refreshSTSToken&&(!this._setOptions||Date.now()-this._setOptions>1e4)&&(this._setOptions=Date.now(),await setSTSToken.call(this),!e.stream))return this.request(e);throw"ResponseTimeoutError"===o.name&&(o.message=o.message.split(",")[0]+", please increase the timeout or use multipartDownload."),o}return e.xmlResponse&&(r.data=await this.parseXML(r.data)),r}mergeDescriptors(proto,object$1),mergeDescriptors(proto,object),mergeDescriptors(proto,image$1),mergeDescriptors(proto,bucket$1),mergeDescriptors(proto,bucket),mergeDescriptors(proto,managedUpload),mergeDescriptors(proto,rtmp),mergeDescriptors(proto,multipartCopy),mergeDescriptors(proto,parallel),mergeDescriptors(proto,multipart),Client.ImageClient=image(Client),Client.ClusterClient=cluster(Client),Client.STS=sts,proto.signature=function(e){return signUtils.computeSignature(this.options.accessKeySecret,e,this.options.headerEncoding)},proto._getReqUrl=getReqUrl,proto.authorization=function(e,t,r,n){const o=signUtils.buildCanonicalString(e.toUpperCase(),t,{headers:n,parameters:r});return signUtils.authorization(this.options.accessKeyId,this.options.accessKeySecret,o,this.options.headerEncoding)},proto.request=async function(e){return this.options.retryMax?await retry$1(request$2.bind(this),this.options.retryMax,{errorHandler:t=>!!(t=>{if(e.stream)return!1;return[-1,-2].includes(t.status)&&(this.options.requestErrorRetryHandle||(()=>!0))(t)})(t)})(e):await request$2.call(this,e)},proto._getResource=function(e){let t="/";return e.bucket&&(t+=e.bucket+"/"),e.object&&(t+=encoder(e.object,this.options.headerEncoding)),t},proto._escape=function(e){return utility.encodeURIComponent(e).replace(/%2F/g,"/")},proto._getUserAgent=function(){const e=`aliyun-sdk-${process&&process.browser?"js":"nodejs"}/${pkg.version}`;let t=platform.description;return!t&&process&&(t=`Node.js ${process.version.slice(1)} on ${process.platform} ${process.arch}`),this._checkUserAgent(`${e} ${t}`)},proto._checkUserAgent=function(e){return e.replace(/\u03b1/,"alpha").replace(/\u03b2/,"beta")},proto.checkBrowserAndVersion=function(e,t){return bowser.name===e&&bowser.version.split(".")[0]===t},proto.parseXML=function(e){return new Promise(((t,r)=>{Buffer.isBuffer(e)&&(e=""+e),xml2js.parseString(e,{explicitRoot:!1,explicitArray:!1},((e,n)=>{e?r(e):t(n)}))}))},proto.requestError=async function(e){let t=null;if("ResponseTimeoutError"===e.name)t=Error(e.message),t.name=e.name;else if(e.data&&e.data.length){const r=e.data+"";let n;try{n=await this.parseXML(r)||{}}catch(t){return t.message+="\nraw xml: "+r,t.status=e.status,t.requestId=e.headers["x-oss-request-id"],t}let o=n.Message||"unknow request error, status: "+e.status;n.Condition&&(o+=` (condition: ${n.Condition})`),t=Error(o),t.name=n.Code?n.Code+"Error":"UnknowError",t.status=e.status,t.code=n.Code,t.requestId=n.RequestId,t.hostId=n.HostId}else-1===e.status||-2===e.status?(t=Error(e.message),t.name=e.name,t.status=e.status,t.code=e.name):(404===e.status?(t=Error("Object not exists"),t.name="NoSuchKeyError",t.status=404,t.code="NoSuchKey"):412===e.status?(t=Error("Pre condition failed"),t.name="PreconditionFailedError",t.status=412,t.code="PreconditionFailed"):(t=Error("Unknow error, status: "+e.status),t.name="UnknowError",t.status=e.status),t.requestId=e.headers["x-oss-request-id"],t.host="");return t},proto.setSLDEnabled=function(e){return this.options.sldEnable=!!e,this};var md5=createCommonjsModule((function(module){(function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t,r){return new Md5(!0).update(t,r)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.getCtx=e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;OUTPUT_TYPES.length>t;++t){var r=OUTPUT_TYPES[t];e[r]=createOutputMethod(r)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e,t){if(!this.finalized){for(var r,n,o=0,i=e.length,s=this.blocks,a=this.buffer8;i>o;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),ARRAY_BUFFER)for(n=this.start;i>o&&64>n;++o)r=e.charCodeAt(o),t||128>r?a[n++]=r:2048>r?(a[n++]=192|r>>6,a[n++]=128|63&r):55296>r||r>=57344?(a[n++]=224|r>>12,a[n++]=128|r>>6&63,a[n++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),a[n++]=240|r>>18,a[n++]=128|r>>12&63,a[n++]=128|r>>6&63,a[n++]=128|63&r);else for(n=this.start;i>o&&64>n;++o)r=e.charCodeAt(o),t||128>r?s[n>>2]|=r<<SHIFT[3&n++]:2048>r?(s[n>>2]|=(192|r>>6)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]):55296>r||r>=57344?(s[n>>2]|=(224|r>>12)<<SHIFT[3&n++],s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[n>>2]|=(240|r>>18)<<SHIFT[3&n++],s[n>>2]|=(128|r>>12&63)<<SHIFT[3&n++],s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,64>n?this.start=n:(this.start=n-64,this.hash(),this.hashed=!0)}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],56>t||(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,r,n,o,i,s=this.blocks;this.first?t=((t=((e=((e=s[0]-680876937)<<7|e>>>25)-271733879<<0)^(r=((r=(-271733879^(n=((n=(-1732584194^2004318071&e)+s[1]-117830708)<<12|n>>>20)+e<<0)&(-271733879^e))+s[2]-1126478375)<<17|r>>>15)+n<<0)&(n^e))+s[3]-1316259209)<<22|t>>>10)+r<<0:(e=this.h0,t=this.h1,t=((t+=((e=((e+=((n=this.h3)^t&((r=this.h2)^n))+s[0]-680876936)<<7|e>>>25)+t<<0)^(r=((r+=(t^(n=((n+=(r^e&(t^r))+s[1]-389564586)<<12|n>>>20)+e<<0)&(e^t))+s[2]+606105819)<<17|r>>>15)+n<<0)&(n^e))+s[3]-1044525330)<<22|t>>>10)+r<<0),t=((t+=((e=((e+=(n^t&(r^n))+s[4]-176418897)<<7|e>>>25)+t<<0)^(r=((r+=(t^(n=((n+=(r^e&(t^r))+s[5]+1200080426)<<12|n>>>20)+e<<0)&(e^t))+s[6]-1473231341)<<17|r>>>15)+n<<0)&(n^e))+s[7]-45705983)<<22|t>>>10)+r<<0,t=((t+=((e=((e+=(n^t&(r^n))+s[8]+1770035416)<<7|e>>>25)+t<<0)^(r=((r+=(t^(n=((n+=(r^e&(t^r))+s[9]-1958414417)<<12|n>>>20)+e<<0)&(e^t))+s[10]-42063)<<17|r>>>15)+n<<0)&(n^e))+s[11]-1990404162)<<22|t>>>10)+r<<0,t=((t+=((e=((e+=(n^t&(r^n))+s[12]+1804603682)<<7|e>>>25)+t<<0)^(r=((r+=(t^(n=((n+=(r^e&(t^r))+s[13]-40341101)<<12|n>>>20)+e<<0)&(e^t))+s[14]-1502002290)<<17|r>>>15)+n<<0)&(n^e))+s[15]+1236535329)<<22|t>>>10)+r<<0,t=((t+=((n=((n+=(t^r&((e=((e+=(r^n&(t^r))+s[1]-165796510)<<5|e>>>27)+t<<0)^t))+s[6]-1069501632)<<9|n>>>23)+e<<0)^e&((r=((r+=(e^t&(n^e))+s[11]+643717713)<<14|r>>>18)+n<<0)^n))+s[0]-373897302)<<20|t>>>12)+r<<0,t=((t+=((n=((n+=(t^r&((e=((e+=(r^n&(t^r))+s[5]-701558691)<<5|e>>>27)+t<<0)^t))+s[10]+38016083)<<9|n>>>23)+e<<0)^e&((r=((r+=(e^t&(n^e))+s[15]-660478335)<<14|r>>>18)+n<<0)^n))+s[4]-405537848)<<20|t>>>12)+r<<0,t=((t+=((n=((n+=(t^r&((e=((e+=(r^n&(t^r))+s[9]+568446438)<<5|e>>>27)+t<<0)^t))+s[14]-1019803690)<<9|n>>>23)+e<<0)^e&((r=((r+=(e^t&(n^e))+s[3]-187363961)<<14|r>>>18)+n<<0)^n))+s[8]+1163531501)<<20|t>>>12)+r<<0,t=((t+=((n=((n+=(t^r&((e=((e+=(r^n&(t^r))+s[13]-1444681467)<<5|e>>>27)+t<<0)^t))+s[2]-51403784)<<9|n>>>23)+e<<0)^e&((r=((r+=(e^t&(n^e))+s[7]+1735328473)<<14|r>>>18)+n<<0)^n))+s[12]-1926607734)<<20|t>>>12)+r<<0,t=((t+=((i=(n=((n+=((o=t^r)^(e=((e+=(o^n)+s[5]-378558)<<4|e>>>28)+t<<0))+s[8]-2022574463)<<11|n>>>21)+e<<0)^e)^(r=((r+=(i^t)+s[11]+1839030562)<<16|r>>>16)+n<<0))+s[14]-35309556)<<23|t>>>9)+r<<0,t=((t+=((i=(n=((n+=((o=t^r)^(e=((e+=(o^n)+s[1]-1530992060)<<4|e>>>28)+t<<0))+s[4]+1272893353)<<11|n>>>21)+e<<0)^e)^(r=((r+=(i^t)+s[7]-155497632)<<16|r>>>16)+n<<0))+s[10]-1094730640)<<23|t>>>9)+r<<0,t=((t+=((i=(n=((n+=((o=t^r)^(e=((e+=(o^n)+s[13]+681279174)<<4|e>>>28)+t<<0))+s[0]-358537222)<<11|n>>>21)+e<<0)^e)^(r=((r+=(i^t)+s[3]-722521979)<<16|r>>>16)+n<<0))+s[6]+76029189)<<23|t>>>9)+r<<0,t=((t+=((i=(n=((n+=((o=t^r)^(e=((e+=(o^n)+s[9]-640364487)<<4|e>>>28)+t<<0))+s[12]-421815835)<<11|n>>>21)+e<<0)^e)^(r=((r+=(i^t)+s[15]+530742520)<<16|r>>>16)+n<<0))+s[2]-995338651)<<23|t>>>9)+r<<0,t=((t+=((n=((n+=(t^((e=((e+=(r^(t|~n))+s[0]-198630844)<<6|e>>>26)+t<<0)|~r))+s[7]+1126891415)<<10|n>>>22)+e<<0)^((r=((r+=(e^(n|~t))+s[14]-1416354905)<<15|r>>>17)+n<<0)|~e))+s[5]-57434055)<<21|t>>>11)+r<<0,t=((t+=((n=((n+=(t^((e=((e+=(r^(t|~n))+s[12]+1700485571)<<6|e>>>26)+t<<0)|~r))+s[3]-1894986606)<<10|n>>>22)+e<<0)^((r=((r+=(e^(n|~t))+s[10]-1051523)<<15|r>>>17)+n<<0)|~e))+s[1]-2054922799)<<21|t>>>11)+r<<0,t=((t+=((n=((n+=(t^((e=((e+=(r^(t|~n))+s[8]+1873313359)<<6|e>>>26)+t<<0)|~r))+s[15]-30611744)<<10|n>>>22)+e<<0)^((r=((r+=(e^(n|~t))+s[6]-1560198380)<<15|r>>>17)+n<<0)|~e))+s[13]+1309151649)<<21|t>>>11)+r<<0,t=((t+=((n=((n+=(t^((e=((e+=(r^(t|~n))+s[4]-145523070)<<6|e>>>26)+t<<0)|~r))+s[11]-1120210379)<<10|n>>>22)+e<<0)^((r=((r+=(e^(n|~t))+s[2]+718787259)<<15|r>>>17)+n<<0)|~e))+s[9]-343485551)<<21|t>>>11)+r<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=r-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(e){if("hex"===e)return this.hex();this.finalize();var t=this.h0,r=this.h1,n=this.h2,o=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,r,n="",o=this.array(),i=0;15>i;)e=o[i++],t=o[i++],r=o[i++],n+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|r>>>6)]+BASE64_ENCODE_CHAR[63&r];return n+=BASE64_ENCODE_CHAR[(e=o[i])>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})),crypto=createCommonjsModule((function(e){var t,r,n=n||function(e,t){var r={},n=r.lib={},o=function(){},i=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;e>o;o++)t[n+o>>>2]|=(r[o>>>2]>>>24-o%4*8&255)<<24-(n+o)%4*8;else if(r.length>65535)for(o=0;e>o;o+=4)t[n+o>>>2]=r[o>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;t>n;n+=4)r.push(4294967296*e.random()|0);return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;e>n;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;e>n;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,a=o/(4*i);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(o=e.min(4*(t=a*i),o),t){for(var c=0;t>c;c+=i)this._doProcessBlock(n,c);c=n.splice(0,t),r.sigBytes-=o}return new s.init(c,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}});var p=r.algo={};return r}(Math);!function(){var e=n,t=(i=e.lib).WordArray,r=i.Hasher,o=[],i=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],c=r[4],u=0;80>u;u++){if(16>u)o[u]=0|e[t+u];else{var l=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=l<<1|l>>>31}l=(n<<5|n>>>27)+c+o[u],l=20>u?l+(1518500249+(i&s|~i&a)):40>u?l+(1859775393+(i^s^a)):60>u?l+((i&s|i&a|s&a)-1894007588):l+((i^s^a)-899497514),c=a,a=s,s=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(i),e.HmacSHA1=r._createHmacHelper(i)}(),t=n.enc.Utf8,n.algo.HMAC=n.lib.Base.extend({init:function(e,r){e=this._hasher=new e.init,"string"==typeof r&&(r=t.parse(r));var n=e.blockSize,o=4*n;r.sigBytes>o&&(r=e.finalize(r)),r.clamp();for(var i=this._oKey=r.clone(),s=this._iKey=r.clone(),a=i.words,c=s.words,u=0;n>u;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),r=n.lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],i=0;r>i;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&r>i+.75*a;a++)o.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=n.charAt(64);if(o){var i=e.indexOf(o);-1!=i&&(t=i)}for(var s=[],a=0,c=0;t>c;c++)if(c%4){var u=n.indexOf(e.charAt(c-1))<<c%4*2,l=n.indexOf(e.charAt(c))>>>6-c%4*2;s[a>>>2]|=(u|l)<<24-a%4*8,a++}return r.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=n})),nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function XMLReader(){}function parse(e,t,r,n,o){function i(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e)):String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function s(t){if(t>f){var r=e.substring(f,t).replace(/&#?\w+;/g,i);d&&a(f),n.characters(r,0,t-f),f=t}}function a(t,r){for(;t>=u&&(r=l.exec(e));)u=(c=r.index)+r[0].length,d.lineNumber++;d.columnNumber=t-c+1}for(var c=0,u=0,l=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,p=[{currentNSMap:t}],h={},f=0;;){try{var m=e.indexOf("<",f);if(0>m){if(!e.substr(f).match(/^\s*$/)){var y=n.doc,g=y.createTextNode(e.substr(f));y.appendChild(g),n.currentElement=g}return}switch(m>f&&s(m),e.charAt(m+1)){case"/":var b=e.indexOf(">",m+3),_=e.substring(m+2,b),v=p.pop();0>b?(_=e.substring(m+2).replace(/[\s<].*/,""),o.error("end tag name: "+_+" is not complete:"+v.tagName),b=m+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),o.error("end tag name: "+_+" maybe not complete"),b=m+1+_.length);var C=v.localNSMap,T=v.tagName==_;if(T||v.tagName&&v.tagName.toLowerCase()==_.toLowerCase()){if(n.endElement(v.uri,v.localName,_),C)for(var E in C)n.endPrefixMapping(E);T||o.fatalError("end tag name: "+_+" is not match the current start tagName:"+v.tagName)}else p.push(v);b++;break;case"?":d&&a(m),b=parseInstruction(e,m,n);break;case"!":d&&a(m),b=parseDCC(e,m,n,o);break;default:d&&a(m);var k=new ElementAttributes,w=p[p.length-1].currentNSMap,x=(b=parseElementStartPart(e,m,k,w,i,o),k.length);if(!k.closed&&fixSelfClosed(e,b,k.tagName,h)&&(k.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),d&&x){for(var S=copyLocator(d,{}),O=0;x>O;O++){var A=k[O];a(A.offset),A.locator=copyLocator(d,{})}n.locator=S,appendElement(k,n,w)&&p.push(k),n.locator=d}else appendElement(k,n,w)&&p.push(k);"http://www.w3.org/1999/xhtml"!==k.uri||k.closed?b++:b=parseHtmlSpecialContent(e,b,k.tagName,i,n)}}catch(e){o.error("element parse error: "+e),b=-1}b>f?f=b:s(Math.max(m,f)+1)}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,n,o,i){for(var s,a=++t,c=S_TAG;;){var u=e.charAt(a);switch(u){case"=":if(c===S_ATTR)s=e.slice(t,a),c=S_EQ;else{if(c!==S_ATTR_SPACE)throw Error("attribute equal must after attrName");c=S_EQ}break;case"'":case'"':if(c===S_EQ||c===S_ATTR){if(c===S_ATTR&&(i.warning('attribute value must after "="'),s=e.slice(t,a)),0>=(a=e.indexOf(u,t=a+1)))throw Error("attribute value no end '"+u+"' match");l=e.slice(t,a).replace(/&#?\w+;/g,o),r.add(s,l,t-1),c=S_ATTR_END}else{if(c!=S_ATTR_NOQUOT_VALUE)throw Error('attribute value must after "="');l=e.slice(t,a).replace(/&#?\w+;/g,o),r.add(s,l,t),i.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=a+1,c=S_ATTR_END}break;case"/":switch(c){case S_TAG:r.setTagName(e.slice(t,a));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:c=S_TAG_CLOSE,r.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),c==S_TAG&&r.setTagName(e.slice(t,a)),a;case">":switch(c){case S_TAG:r.setTagName(e.slice(t,a));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:"/"===(l=e.slice(t,a)).slice(-1)&&(r.closed=!0,l=l.slice(0,-1));case S_ATTR_SPACE:c===S_ATTR_SPACE&&(l=s),c==S_ATTR_NOQUOT_VALUE?(i.warning('attribute "'+l+'" missed quot(")!!'),r.add(s,l.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===n[""]&&l.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),r.add(l,l,t));break;case S_EQ:throw Error("attribute value missed!!")}return a;case"":u=" ";default:if(" "<u)switch(c){case S_ATTR_SPACE:"http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),r.add(s,s,t),t=a,c=S_ATTR;break;case S_ATTR_END:i.warning('attribute space is required"'+s+'"!!');case S_TAG_SPACE:c=S_ATTR,t=a;break;case S_EQ:c=S_ATTR_NOQUOT_VALUE,t=a;break;case S_TAG_CLOSE:throw Error("elements closed character '/' and '>' must be connected to")}else switch(c){case S_TAG:r.setTagName(e.slice(t,a)),c=S_TAG_SPACE;break;case S_ATTR:s=e.slice(t,a),c=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var l=e.slice(t,a).replace(/&#?\w+;/g,o);i.warning('attribute "'+l+'" missed quot(")!!'),r.add(s,l,t);case S_ATTR_END:c=S_TAG_SPACE}}a++}}function appendElement(e,t,r){for(var n=e.tagName,o=null,i=e.length;i--;){var s=e[i],a=s.qName,c=s.value;if((p=a.indexOf(":"))>0)var u=s.prefix=a.slice(0,p),l=a.slice(p+1),d="xmlns"===u&&l;else l=a,u=null,d="xmlns"===a&&"";s.localName=l,!1!==d&&(null==o&&(o={},_copy(r,r={})),r[d]=o[d]=c,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,c))}for(i=e.length;i--;){(u=(s=e[i]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=r[u||""]))}var p;(p=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,p),l=e.localName=n.slice(p+1)):(u=null,l=e.localName=n);var h=e.uri=r[u||""];if(t.startElement(h,l,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=o,!0;if(t.endElement(h,l,n),o)for(u in o)t.endPrefixMapping(u)}function parseHtmlSpecialContent(e,t,r,n,o){if(/^(?:script|textarea)$/i.test(r)){var i=e.indexOf("</"+r+">",t),s=e.substring(t+1,i);if(/[&<]/.test(s))return/^script$/i.test(r)?(o.characters(s,0,s.length),i):(s=s.replace(/&#?\w+;/g,n),o.characters(s,0,s.length),i)}return t+1}function fixSelfClosed(e,t,r,n){var o=n[r];return null==o&&(t>(o=e.lastIndexOf("</"+r+">"))&&(o=e.lastIndexOf("</"+r)),n[r]=o),t>o}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(o=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,o-t-4),o+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,o-t-9),r.endCDATA(),o+3}var i=split(e,t),s=i.length;if(s>1&&/!doctype/i.test(i[0][0])){var a=i[1][0],c=s>3&&/^public$/i.test(i[2][0])&&i[3][0],u=s>4&&i[4][0],l=i[s-1];return r.startDTD(a,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}}return-1}function parseInstruction(e,t,r){var n=e.indexOf("?>",t);if(n){var o=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return o?(r.processingInstruction(o[1],o[2]),n+2):-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}function split(e,t){var r,n=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=t,o.exec(e);r=o.exec(e);)if(n.push(r),r[1])return n}XMLReader.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),_copy(t,t={}),parse(e,t,r,n,this.errorHandler),n.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!tagNamePattern.test(e))throw Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function r(){}for(t in r.prototype=t,r=new r,e)r[t]=e[t];return r});var XMLReader_1=XMLReader,sax={XMLReader:XMLReader_1};function copy(e,t){for(var r in e)t[r]=e[r]}function _extends(e,t){var r=e.prototype;Object.create&&(r.__proto__=Object.create(t.prototype));if(!(r instanceof t)){function n(){}n.prototype=t.prototype,copy(r,n=new n),e.prototype=r=n}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={};ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);function DOMException(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return r.code=e,t&&(this.message=this.message+": "+t),r}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);__set__(e,"length",r.length),copy(r,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function _addNamedNode(e,t,r,n){if(n?t[_findNodeIndex(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var o=e.ownerDocument;o&&(n&&_onRemoveAttribute(o,e,n),_onAddAttribute(o,e,r))}}function _removeNamedNode(e,t,r){var n=_findNodeIndex(t,r);if(0>n)throw DOMException(NOT_FOUND_ERR,Error(e.tagName+"@"+r));for(var o=t.length-1;o>n;)t[n]=t[++n];if(t.length=o,e){var i=e.ownerDocument;i&&(_onRemoveAttribute(i,e,r),r.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,t))return!0}while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function _onRemoveAttribute(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function _onUpdateChild(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var o=t.firstChild,i=0;o;)n[i++]=o,o=o.nextSibling;n.length=i}}}function _removeChild(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var s=r?r.previousSibling:e.lastChild;o.previousSibling=s,i.nextSibling=r,s?s.nextSibling=o:e.firstChild=o,null==r?e.lastChild=i:r.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t);n=e.lastChild}n=e.lastChild;return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer$1(){}function nodeSerializeToString(e,t){var r=[],n=9==this.nodeType?this.documentElement:this,o=n.prefix,i=n.namespaceURI;if(i&&null==o&&null==(o=n.lookupPrefix(i)))var s=[{namespace:i,prefix:null}];return serializeToString(this,r,e,t,s),r.join("")}function needNamespaceDefine(e,t,r){var n=e.prefix||"",o=e.namespaceURI;if(!n&&!o)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=r.length;i--;){var s=r[i];if(s.prefix==n)return s.namespace!=o}return!0}function serializeToString(e,t,r,n,o){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case ELEMENT_NODE:o||(o=[]);var i=e.attributes,s=i.length,a=e.firstChild,c=e.tagName;r=htmlns===e.namespaceURI||r,t.push("<",c);for(var u=0;s>u;u++){"xmlns"==(l=i.item(u)).prefix?o.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&o.push({prefix:"",namespace:l.value})}for(u=0;s>u;u++){var l,d,p;if(needNamespaceDefine(l=i.item(u),r,o))t.push((d=l.prefix||"")?" xmlns:"+d:" xmlns",'="',p=l.namespaceURI,'"'),o.push({prefix:d,namespace:p});serializeToString(l,t,r,n,o)}if(needNamespaceDefine(e,r,o))t.push((d=e.prefix||"")?" xmlns:"+d:" xmlns",'="',p=e.namespaceURI,'"'),o.push({prefix:d,namespace:p});if(a||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),r&&/^script$/i.test(c))for(;a;)a.data?t.push(a.data):serializeToString(a,t,r,n,o),a=a.nextSibling;else for(;a;)serializeToString(a,t,r,n,o),a=a.nextSibling;t.push("</",c,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(a=e.firstChild;a;)serializeToString(a,t,r,n,o),a=a.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("\x3c!--",e.data,"--\x3e");case DOCUMENT_TYPE_NODE:var h=e.publicId,f=e.systemId;if(t.push("<!DOCTYPE ",e.name),h)t.push(' PUBLIC "',h),f&&"."!=f&&t.push('" "',f),t.push('">');else if(f&&"."!=f)t.push(' SYSTEM "',f,'">');else{var m=e.internalSubset;m&&t.push(" [",m,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,r){var n;switch(t.nodeType){case ELEMENT_NODE:(n=t.cloneNode(!1)).ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var o=t.firstChild;o;)n.appendChild(importNode(e,o,r)),o=o.nextSibling;return n}function cloneNode(e,t,r){var n=new t.constructor;for(var o in t){var i=t[o];"object"!=typeof i&&i!=n[o]&&(n[o]=i)}switch(t.childNodes&&(n.childNodes=new NodeList),n.ownerDocument=e,n.nodeType){case ELEMENT_NODE:var s=t.attributes,a=n.attributes=new NamedNodeMap,c=s.length;a._ownerElement=n;for(var u=0;c>u;u++)n.setAttributeNode(cloneNode(e,s.item(u),!0));break;case ATTRIBUTE_NODE:r=!0}if(r)for(var l=t.firstChild;l;)n.appendChild(cloneNode(e,l,r)),l=l.nextSibling;return n}function __set__(e,t,r){e[t]=r}ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15),DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;this.length>n;n++)serializeToString(this[n],r,e,t);return r.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var r=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new Document;if(n.implementation=this,n.childNodes=new NodeList,n.doctype=r,r&&n.appendChild(r),t){var o=n.createElementNS(e,t);n.appendChild(o)}return n},createDocumentType:function(e,t,r){var n=new DocumentType;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==ELEMENT_NODE&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,(function(r){if(r.nodeType==ELEMENT_NODE&&r.getAttribute("id")==e)return t=r,!0})),t},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new ProcessingInstruction;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new Element,n=t.split(":"),o=r.attributes=new NamedNodeMap;return r.childNodes=new NodeList,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,o._ownerElement=r,r},createAttributeNS:function(e,t){var r=new Attr,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,(function(t){var r=[];return _visitNode(t,(function(n){n===t||n.nodeType!=ELEMENT_NODE||"*"!==e&&n.tagName!=e||r.push(n)})),r}))},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,(function(r){var n=[];return _visitNode(r,(function(o){o===r||o.nodeType!==ELEMENT_NODE||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||n.push(o)})),n}))}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){this.nodeValue=this.data=e=this.data+e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){var n=this.data.substring(0,e),o=this.data.substring(e+t);this.nodeValue=this.data=r=n+r+o,this.length=r.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer$1.prototype.serializeToString=function(e,t,r){return nodeSerializeToString.call(e,t,r)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(e){switch(e.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||e+"")&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,r){e["$$"+t]=r}}}catch(e){}var DOMImplementation_1=DOMImplementation,XMLSerializer_1=XMLSerializer$1,dom={DOMImplementation:DOMImplementation_1,XMLSerializer:XMLSerializer_1},domParser=createCommonjsModule((function(e,t){function r(e){this.options=e||{locator:{}}}function n(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function i(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function a(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var r=this.options,o=new c,s=r.domBuilder||new n,a=r.errorHandler,u=r.locator,l=r.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&s.setDocumentLocator(u),o.errorHandler=function(e,t,r){if(!e){if(t instanceof n)return t;e=t}var o={},s=e instanceof Function;function a(t){var n=e[t];!n&&s&&(n=2==e.length?function(r){e(t,r)}:e),o[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+i(r))}||function(){}}return r=r||{},a("warning"),a("error"),a("fatalError"),o}(a,s,u),o.domBuilder=r.domBuilder||s,/\/x?html?$/.test(t)&&(d.nbsp="",d.copy="",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?o.parse(e,l,d):o.errorHandler.error("invalid doc source"),s.doc},n.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,s=i.createElementNS(e,r||t),c=n.length;a(this,s),this.currentElement=s,this.locator&&o(this.locator,s);for(var u=0;c>u;u++){e=n.getURI(u);var l=n.getValue(u),d=(r=n.getQName(u),i.createAttributeNS(e,r));this.locator&&o(n.getLocator(u),d),d.value=d.nodeValue=l,s.setAttributeNode(d)}},endElement:function(e,t,r){var n=this.currentElement;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,r),a(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=s.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&o(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=s.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&o(this.locator,n),a(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&o(this.locator,i),a(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,i(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,i(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,i(this.locator)),e}};var c=sax.XMLReader,u=t.DOMImplementation=dom.DOMImplementation;t.XMLSerializer=dom.XMLSerializer,t.DOMParser=r})),DOMParser=domParser.DOMParser,xmlToJSON=function(){this.version="1.3.5";var e={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},t=/(?!xmlns)^.*:/;return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){if(e){var r=this.stringToXML(e);return r.getElementsByTagName("parsererror").length?null:this.parseXML(r,t)}return null},this.parseXML=function(r,n){for(var o in n)e[o]=n[o];var i={},s=0,a="";if(r.childNodes.length)for(var c,u,l,d=0;r.childNodes.length>d;d++)4===(c=r.childNodes.item(d)).nodeType?e.mergeCDATA&&(a+=c.nodeValue):3===c.nodeType?a+=c.nodeValue:1===c.nodeType&&(0===s&&(i={}),u=e.stripElemPrefix?c.nodeName.replace(t,""):c.nodeName,l=xmlToJSON.parseXML(c),i.hasOwnProperty(u)?(i[u].constructor!==Array&&(i[u]=[i[u]]),i[u].push(l)):(i[u]=l,s++));return Object.keys(i).length||(i=a||""),i},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}.call({}),xml2json=function(e){return xmlToJSON.parseString(e)},xml2json_1=xml2json,element_start_char="a-zA-Z_-----------",element_non_start_char="-.0-9-",element_replace=RegExp("^([^"+element_start_char+"])|^((x|X)(m|M)(l|L))|([^"+element_start_char+element_non_start_char+"])","g"),not_safe_in_xml=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,objKeys=function(e){var t=[];if(e instanceof Object)for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},process_to_xml=function(e,t){var r=function(e,r,n,o,i){var s=void 0!==t.indent?t.indent:"\t",a=t.prettyPrint?"\n"+Array(o).join(s):"";t.removeIllegalNameCharacters&&(e=e.replace(element_replace,"_"));var c=[a,"<",e,n||""];return r&&r.length>0?(c.push(">"),c.push(r),i&&c.push(a),c.push("</"),c.push(e),c.push(">")):c.push("/>"),c.join("")};return function e(n,o,i){var s=typeof n;switch((Array.isArray?Array.isArray(n):n instanceof Array)?s="array":n instanceof Date&&(s="date"),s){case"array":var a=[];return n.map((function(t){a.push(e(t,1,i+1))})),t.prettyPrint&&a.push("\n"),a.join("");case"date":return n.toJSON?n.toJSON():n+"";case"object":var c=[];for(var u in n)if(n.hasOwnProperty(u))if(n[u]instanceof Array)for(var l=0;n[u].length>l;l++)n[u].hasOwnProperty(l)&&c.push(r(u,e(n[u][l],0,i+1),null,i+1,objKeys(n[u][l]).length));else c.push(r(u,e(n[u],0,i+1),null,i+1));return t.prettyPrint&&c.length>0&&c.push("\n"),c.join("");case"function":return n();default:return t.escape?esc(n):""+n}}(e,0,0)},xml_header=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")};function esc(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(not_safe_in_xml,"")}var json2xml=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),"string"==typeof e)try{e=JSON.parse(""+e)}catch(e){return!1}var r="",n="";return t&&("object"==typeof t?(t.xmlHeader&&(r=xml_header(!!t.xmlHeader.standalone)),void 0!==t.docType&&(n="<!DOCTYPE "+t.docType+">")):r=xml_header()),[r,(t=t||{}).prettyPrint&&n?"\n":"",n,process_to_xml(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")};function camSafeUrlEncode(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}var getAuth$1=function(e){var t,r=(e=e||{}).SecretId,n=e.SecretKey,o=e.KeyTime,i=(e.method||e.Method||"get").toLowerCase(),s=clone(e.Query||e.params||{}),a=clone(e.Headers||e.headers||{}),c=e.Key||"";if(e.UseRawKey?t=e.Pathname||e.pathname||"/"+c:0!==(t=e.Pathname||e.pathname||c).indexOf("/")&&(t="/"+t),!r)throw Error("missing param SecretId");if(!n)throw Error("missing param SecretKey");var u=function(e,t){var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(t?camSafeUrlEncode(n).toLowerCase():n);return r.sort((function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1}))},l=function(e){var t,r,n,o=[],i=u(e);for(t=0;i.length>t;t++)n=null==e[r=i[t]]?"":""+e[r],r=camSafeUrlEncode(r).toLowerCase(),n=camSafeUrlEncode(n)||"",o.push(r+"="+n);return o.join("&")},d=Math.round(getSkewTime(e.SystemClockOffset)/1e3)-1,p=d,h=e.Expires||e.expires;p+=void 0===h?900:1*h||0;var f=r,m=o||d+";"+p,y=o||d+";"+p,g=u(a).join(";").toLowerCase(),b=u(s).join(";").toLowerCase(),_=""+crypto.HmacSHA1(y,n),v=[i,t,l(s),l(a),""].join("\n"),C=["sha1",m,""+crypto.SHA1(v),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+f,"q-sign-time="+m,"q-key-time="+y,"q-header-list="+g,"q-url-param-list="+b,"q-signature="+(""+crypto.HmacSHA1(C,_))].join("&")},readIntBE=function(e,t,r){var n=e.slice(r,r+t/8);return new Uint8Array(n).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[t](n)[0]},buf2str=function(e,t,r,n){var o=e.slice(t,r),i="";return new Uint8Array(o).forEach((function(e){i+=String.fromCharCode(e)})),n&&(i=decodeURIComponent(escape(i))),i},parseSelectPayload=function(e){for(var t={},r=buf2str(e),n={records:[]};e.byteLength;){var o,i=readIntBE(e,32,0),s=readIntBE(e,32,4),a=i-s-16,c=0;for(e=e.slice(12);s>c;){var u=readIntBE(e,8,c),l=buf2str(e,c+1,c+1+u),d=readIntBE(e,16,c+u+2),p=buf2str(e,c+u+4,c+u+4+d);t[l]=p,c+=u+4+d}if("Records"===t[":event-type"])o=buf2str(e,c,c+a,!0),n.records.push(o);else if("Stats"===t[":event-type"])o=buf2str(e,c,c+a,!0),n.stats=util.xml2json(o).Stats;else if("error"===t[":event-type"]){var h=t[":error-code"],f=t[":error-message"],m=Error(f);m.message=f,m.name=m.code=h,n.error=m}e=e.slice(c+a+4)}return{payload:n.records.join(""),body:r}},noop=function(){},clearKey=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t},readAsBinaryString=function(e,t){var r,n=new FileReader;FileReader.prototype.readAsBinaryString?(r=FileReader.prototype.readAsBinaryString,n.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?r=function(e){var r="",n=new FileReader;n.onload=function(e){for(var o=new Uint8Array(n.result),i=o.byteLength,s=0;i>s;s++)r+=String.fromCharCode(o[s]);t(r)},n.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),r.call(n,e)},fileSliceNeedCopy=(compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=0;t.length>r;r++)if(e[r]!==t[r])return parseInt(e[r])>parseInt(t[r])?1:-1;return 0},ua=navigator&&navigator.userAgent,ChromeVersion=(ua.match(/Chrome\/([.\d]+)/)||[])[1],QBCoreVersion=(ua.match(/QBCore\/([.\d]+)/)||[])[1],QQBrowserVersion=(ua.match(/QQBrowser\/([.\d]+)/)||[])[1],ChromeVersion&&0>compareVersion(ChromeVersion,"53.0.2785.116")&&QBCoreVersion&&0>compareVersion(QBCoreVersion,"3.53.991.400")&&QQBrowserVersion&&0>=compareVersion(QQBrowserVersion,"9.0.2524.400")||!1),ua,ChromeVersion,QBCoreVersion,QQBrowserVersion,compareVersion,fileSlice=function(e,t,r,n,o){var i;if(e.slice?i=e.slice(t,r):e.mozSlice?i=e.mozSlice(t,r):e.webkitSlice&&(i=e.webkitSlice(t,r)),n&&fileSliceNeedCopy){var s=new FileReader;s.onload=function(e){i=null,o(new Blob([s.result]))},s.readAsArrayBuffer(i)}else o(i)},getBodyMd5=function(e,t,r,n){r=r||noop,e?"string"==typeof t?r(util.md5(t,!0)):Blob&&t instanceof Blob?util.getFileMd5(t,(function(e,t){r(t)}),n):r():r()},md5ChunkSize=1048576,getFileMd5=function(e,t,r){var n=e.size,o=0,i=md5.getCtx(),s=function(a){if(n>a){util.fileSlice(e,a,Math.min(n,a+md5ChunkSize),!1,(function(e){readAsBinaryString(e,(function(t){e=null,i=i.update(t,!0),o+=t.length,t=null,r&&r({loaded:o,total:n,percent:Math.round(o/n*1e4)/1e4}),s(a+md5ChunkSize)}))}))}else{var c=i.digest("hex");t(null,c)}};s(0)};function clone(e){return map(e,(function(e){return"object"==typeof e&&null!==e?clone(e):e}))}function attr(e,t,r){return e&&t in e?e[t]:r}function extend(e,t){return each(t,(function(r,n){e[n]=t[n]})),e}function isArray(e){return e instanceof Array}function isInArray(e,t){for(var r=!1,n=0;e.length>n;n++)if(t===e[n]){r=!0;break}return r}function makeArray(e){return isArray(e)?e:[e]}function each(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function map(e,t){var r=isArray(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n],n));return r}function filter(e,t){var r=isArray(e),n=r?[]:{};for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)&&(r?n.push(e[o]):n[o]=e[o]);return n}var binaryBase64=function(e){var t,r,n="";for(t=0,r=e.length/2;r>t;t++)n+=String.fromCharCode(parseInt(e[2*t]+e[2*t+1],16));return btoa(n)},uuid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},hasMissingParams=function(e,t){var r=t.Bucket,n=t.Region,o=t.Key;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(!r)return"Bucket";if(!n)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(!r)return"Bucket";if(!n)return"Region";if(!o)return"Key"}return!1},formatParams=function(e,t){if(t=extend({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var r=t.Headers||{};if(t&&"object"==typeof t){!function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(r[e]=t[e])}();util.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"},(function(e,n){void 0!==t[e]&&(r[n]=t[e])})),t.Headers=clearKey(r)}}return t},apiWrapper=function(e,t){return function(r,n){var o=this;"function"==typeof r&&(n=r,r={}),r=formatParams(e,r);var i=function(e){return e&&e.headers&&(e.headers["x-cos-request-id"]&&(e.RequestId=e.headers["x-cos-request-id"]),e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},s=function(e,t){n&&n(i(e),i(t))},a=function(){if("getService"!==e&&"abortUploadTask"!==e){var t=hasMissingParams(e,r);if(t)return"missing param "+t;if(r.Region){if(r.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(r.Region))return"Region format error.";o.options.CompatibilityMode||-1!==r.Region.indexOf("-")||"yfb"===r.Region||"default"===r.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(r.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(r.Bucket))if(r.AppId)r.Bucket=r.Bucket+"-"+r.AppId;else{if(!o.options.AppId)return'Bucket should format as "test-1250000000".';r.Bucket=r.Bucket+"-"+o.options.AppId}r.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete r.AppId)}!o.options.UseRawKey&&r.Key&&"/"===r.Key.substr(0,1)&&(r.Key=r.Key.substr(1))}}(),c="getAuth"===e||"getObjectUrl"===e;if(Promise&&!c&&!n)return new Promise((function(e,i){if(n=function(t,r){t?i(t):e(r)},a)return s(util.error(Error(a)));t.call(o,r,s)}));if(a)return s(util.error(Error(a)));var u=t.call(o,r,s);return c?u:void 0}},throttleOnProgress=function(e,t){var r,n,o=this,i=0,s=0,a=Date.now();function c(){if(n=0,t&&"function"==typeof t){r=Date.now();var o,c=Math.max(0,Math.round((s-i)/((r-a)/1e3)*100)/100)||0;o=0===s&&0===e?1:Math.floor(s/e*100)/100||0,a=r,i=s;try{t({loaded:s,total:e,speed:c,percent:o})}catch(e){}}}return function(t,r){if(t&&(s=t.loaded,e=t.total),r)clearTimeout(n),c();else{if(n)return;n=setTimeout(c,o.options.ProgressInterval)}}},getFileSize=function(e,t,r){var n;"string"==typeof t.Body?t.Body=new Blob([t.Body],{type:"text/plain"}):t.Body instanceof ArrayBuffer&&(t.Body=new Blob([t.Body])),t.Body&&(t.Body instanceof Blob||""+t.Body=="[object File]"||""+t.Body=="[object Blob]")?(t.ContentLength=n=t.Body.size,r(null,n)):r(util.error(Error("params body format error, Only allow File|Blob|String.")))},getSkewTime=function(e){return Date.now()+(e||0)},error=function(e,t){var r=e;return e.message=e.message||null,"string"==typeof t?(e.error=t,e.message=t):"object"==typeof t&&null!==t&&(extend(e,t),(t.code||t.name)&&(e.code=t.code||t.name),t.message&&(e.message=t.message),t.stack&&(e.stack=t.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=t&&t.name||e.name||e.code||"Error",e.code||(e.code=e.name),e.error||(e.error=clone(r)),e},util={noop:noop,formatParams:formatParams,apiWrapper:apiWrapper,xml2json:xml2json_1,json2xml:json2xml,md5:md5,clearKey:clearKey,fileSlice:fileSlice,getBodyMd5:getBodyMd5,getFileMd5:getFileMd5,binaryBase64:binaryBase64,extend:extend,isArray:isArray,isInArray:isInArray,makeArray:makeArray,each:each,map:map,filter:filter,clone:clone,attr:attr,uuid:uuid,camSafeUrlEncode:camSafeUrlEncode,throttleOnProgress:throttleOnProgress,getFileSize:getFileSize,getSkewTime:getSkewTime,error:error,getAuth:getAuth$1,parseSelectPayload:parseSelectPayload,isBrowser:!0},util_1=util,initEvent=function(e){var t={},r=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),r(e).push(t)},e.off=function(e,t){for(var n=r(e),o=n.length-1;o>=0;o--)t===n[o]&&n.splice(o,1)},e.emit=function(e,t){for(var n=r(e).map((function(e){return e})),o=0;n.length>o;o++)n[o](t)}},EventProxy$1=function(){initEvent(this)},init$4=initEvent,EventProxy_1=EventProxy$1,event={init:init$4,EventProxy:EventProxy_1},cacheKey="cos_sdk_upload_cache",expires=2592e3,cache,timer,getCache=function(){try{var e=JSON.parse(localStorage.getItem(cacheKey))}catch(e){}e||(e=[]),cache=e},setCache=function(){try{localStorage.setItem(cacheKey,JSON.stringify(cache))}catch(e){}},init$3=function(){if(!cache){getCache.call(this);for(var e=!1,t=Math.round(Date.now()/1e3),r=cache.length-1;r>=0;r--){var n=cache[r][2];n&&n+expires>=t||(cache.splice(r,1),e=!0)}e&&setCache()}},save=function(){timer||(timer=setTimeout((function(){setCache(),timer=null}),400))},mod={using:{},setUsing:function(e){mod.using[e]=!0},removeUsing:function(e){delete mod.using[e]},getFileId:function(e,t,r,n){return e.name&&e.size&&e.lastModifiedDate&&t?util_1.md5([e.name,e.size,e.lastModifiedDate,t,r,n].join("::")):null},getUploadIdList:function(e){if(!e)return null;init$3.call(this);for(var t=[],r=0;cache.length>r;r++)cache[r][0]===e&&t.push(cache[r][1]);return t.length?t:null},saveUploadId:function(e,t,r){if(init$3.call(this),e){for(var n=cache.length-1;n>=0;n--){var o=cache[n];o[0]===e&&o[1]===t&&cache.splice(n,1)}cache.unshift([e,t,Math.round(Date.now()/1e3)]),cache.length>r&&cache.splice(r),save()}},removeUploadId:function(e){init$3.call(this),delete mod.using[e];for(var t=cache.length-1;t>=0;t--)cache[t][1]===e&&cache.splice(t,1);save()}},session=mod,originApiMap={},transferToTaskMethod=function(e,t){originApiMap[t]=e[t],e[t]=function(e,r){e.SkipTask?originApiMap[t].call(this,e,r):this._addTask(t,e,r)}},initTask=function(e){var t=[],r={},n=0,o=0,i=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),e._custom&&(t._custom=e._custom),t},s=function(){var r,n=function(){r=0,e.emit("task-list-update",{list:util_1.map(t,i)}),e.emit("list-update",{list:util_1.map(t,i)})};return function(){r||(r=setTimeout(n))}}(),a=function(){if(t.length>e.options.UploadQueueSize){for(var n=0;o>n&&t.length>n&&t.length>e.options.UploadQueueSize;){t[n]&&("waiting"===t[n].state||"checking"===t[n].state||"uploading"===t[n].state)?n++:(r[t[n].id]&&delete r[t[n].id],t.splice(n,1),o--)}s()}},c=function(){if(e.options.FileParallelLimit>n){for(;t[o]&&"waiting"!==t[o].state;)o++;if(t.length>o){var r=t[o];o++,n++,r.state="checking",r.params.onTaskStart&&r.params.onTaskStart(i(r)),!r.params.UploadData&&(r.params.UploadData={});var u=util_1.formatParams(r.api,r.params);originApiMap[r.api].call(e,u,(function(t,o){e._isRunningTask(r.id)&&("checking"!==r.state&&"uploading"!==r.state||(r.state=t?"error":"success",t&&(r.error=t),n--,s(),c(),r.callback&&r.callback(t,o),"success"===r.state&&(r.params&&(delete r.params.UploadData,delete r.params.Body,delete r.params),delete r.callback)),a())})),s(),setTimeout(c)}}},u=function(t,o){var i=r[t];if(i){var u=i&&("checking"===i.state||"uploading"===i.state);if("canceled"===o&&"canceled"!==i.state||"paused"===o&&(i&&"waiting"===i.state)||"paused"===o&&u){if("paused"===o&&i.params.Body&&"function"==typeof i.params.Body.pipe)return void console.error("stream not support pause");i.state=o,e.emit("inner-kill-task",{TaskId:t,toState:o});try{var l=i&&i.params&&i.params.UploadData.UploadId}catch(e){}"canceled"===o&&l&&session.removeUsing(l),s(),u&&(n--,c()),"canceled"===o&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}a()}};e._addTasks=function(t){util_1.each(t,(function(t){e._addTask(t.api,t.params,t.callback,!0)})),s()};var l=!0;e._addTask=function(n,o,i,u){o=util_1.formatParams(n,o);var d=util_1.uuid();o.TaskId=d,o.onTaskReady&&o.onTaskReady(d),o.TaskReady&&(o.TaskReady(d),l&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),l=!1);var p={params:o,callback:i,api:n,index:t.length,id:d,Bucket:o.Bucket,Region:o.Region,Key:o.Key,FilePath:o.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:o._custom},h=o.onHashProgress;o.onHashProgress=function(t){e._isRunningTask(p.id)&&(p.hashPercent=t.percent,h&&h(t),s())};var f=o.onProgress;return o.onProgress=function(t){e._isRunningTask(p.id)&&("checking"===p.state&&(p.state="uploading"),p.loaded=t.loaded,p.speed=t.speed,p.percent=t.percent,f&&f(t),s())},util_1.getFileSize(n,o,(function(e,n){if(e)return i(util_1.error(e));r[d]=p,t.push(p),p.size=n,!u&&s(),c(),a()})),d},e._isRunningTask=function(e){var t=r[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return util_1.map(t,i)},e.cancelTask=function(e){u(e,"canceled")},e.pauseTask=function(e){u(e,"paused")},e.restartTask=function(e){var t=r[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",s(),o=Math.min(o,t.index),c())},e.isUploadRunning=function(){return n||t.length>o}},transferToTaskMethod_1=transferToTaskMethod,init$2=initTask,task={transferToTaskMethod:transferToTaskMethod_1,init:init$2},stringifyPrimitive=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},queryStringify=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var o=encodeURIComponent(stringifyPrimitive(n))+r;return Array.isArray(e[n])?e[n].map((function(e){return o+encodeURIComponent(stringifyPrimitive(e))})).join(t):o+encodeURIComponent(stringifyPrimitive(e[n]))})).filter(Boolean).join(t):n?encodeURIComponent(stringifyPrimitive(n))+r+encodeURIComponent(stringifyPrimitive(e)):""},xhrRes=function(e,t,r){var n={};return t.getAllResponseHeaders().trim().split("\n").forEach((function(e){if(e){var t=e.indexOf(":"),r=e.substr(0,t).trim().toLowerCase(),o=e.substr(t+1).trim();n[r]=o}})),{error:e,statusCode:t.status,statusMessage:t.statusText,headers:n,body:r}},xhrBody=function(e,t){return t||"text"!==t?e.response:e.responseText},request$1=function(e,t){var r=(e.method||"GET").toUpperCase(),n=e.url;if(e.qs){var o=queryStringify(e.qs);o&&(n+=(-1===n.indexOf("?")?"?":"&")+o)}var i=new XMLHttpRequest;i.open(r,n,!0),i.responseType=e.dataType||"text";var s=e.headers;if(s)for(var a in s)s.hasOwnProperty(a)&&"content-length"!==a.toLowerCase()&&"user-agent"!==a.toLowerCase()&&"origin"!==a.toLowerCase()&&"host"!==a.toLowerCase()&&i.setRequestHeader(a,s[a]);return e.onProgress&&i.upload&&(i.upload.onprogress=e.onProgress),e.onDownloadProgress&&(i.onprogress=e.onDownloadProgress),i.onload=function(){t(xhrRes(null,i,xhrBody(i,e.dataType)))},i.onerror=function(r){var n=xhrBody(i,e.dataType);if(n)t(xhrRes(null,i,n));else{var o=i.statusText;o||0!==i.status||(o=Error("CORS blocked or network error")),t(xhrRes(o,i,n))}},i.send(e.body||""),i},request_1=request$1;function getService(e,t){"function"==typeof e&&(t=e,e={});var r=this.options.Protocol||(util_1.isBrowser&&"http:"===location.protocol?"http:":"https:"),n=this.options.ServiceDomain,o=e.Region;n?(n=n.replace(/\{\{AppId\}\}/gi,e.AppId||this.options.appId||"").replace(/\{\{Region\}\}/gi,o||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(n)||(n=r+"//"+n),"/"===n.slice(-1)&&(n=n.slice(0,-1))):n=o?r+"//cos."+o+".myqcloud.com":r+"//service.cos.myqcloud.com",submitRequest.call(this,{Action:"name/cos:GetService",url:n,method:"GET",headers:e.Headers},(function(e,r){if(e)return t(e);var n=r&&r.ListAllMyBucketsResult&&r.ListAllMyBucketsResult.Buckets&&r.ListAllMyBucketsResult.Buckets.Bucket||[];n=util_1.isArray(n)?n:[n],t(null,{Buckets:n,Owner:r&&r.ListAllMyBucketsResult&&r.ListAllMyBucketsResult.Owner||{},statusCode:r.statusCode,headers:r.headers})}))}function putBucket(e,t){var r=this,n="";e.BucketAZConfig&&(n=util_1.json2xml({CreateBucketConfiguration:{BucketAZConfig:e.BucketAZConfig}}));submitRequest.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:n},(function(n,o){if(n)return t(n);var i=getUrl({protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:i,statusCode:o.statusCode,headers:o.headers})}))}function headBucket(e,t){submitRequest.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},t)}function getBucket(e,t){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r.marker=e.Marker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,submitRequest.call(this,{Action:"name/cos:GetBucket",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r},(function(e,r){if(e)return t(e);var n=r.ListBucketResult||{},o=n.Contents||[],i=n.CommonPrefixes||[];o=util_1.isArray(o)?o:[o],i=util_1.isArray(i)?i:[i];var s=util_1.clone(n);util_1.extend(s,{Contents:o,CommonPrefixes:i,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function deleteBucket(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketAcl(e,t){var r=e.Headers,n="";if(e.AccessControlPolicy){var o=util_1.clone(e.AccessControlPolicy||{}),i=o.Grants||o.Grant;i=util_1.isArray(i)?i:[i],delete o.Grant,delete o.Grants,o.AccessControlList={Grant:i},n=util_1.json2xml({AccessControlPolicy:o}),r["Content-Type"]="application/xml",r["Content-MD5"]=util_1.binaryBase64(util_1.md5(n))}util_1.each(r,(function(e,t){0===t.indexOf("x-cos-grant-")&&(r[t]=uniqGrant(r[t]))})),submitRequest.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r,action:"acl",body:n},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketAcl(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},(function(e,r){if(e)return t(e);var n=r.AccessControlPolicy||{},o=n.Owner||{},i=n.AccessControlList.Grant||[];i=util_1.isArray(i)?i:[i];var s=decodeAcl(n);r.headers&&r.headers["x-cos-acl"]&&(s.ACL=r.headers["x-cos-acl"]),s=util_1.extend(s,{Owner:o,Grants:i,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function putBucketCors(e,t){var r=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];r=util_1.clone(util_1.isArray(r)?r:[r]),util_1.each(r,(function(e){util_1.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t){var r=t+"s",n=e[r]||e[t]||[];delete e[r],e[t]=util_1.isArray(n)?n:[n]}))}));var n=util_1.json2xml({CORSConfiguration:{CORSRule:r}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"cors",headers:o},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketCors(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,r){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var n={CORSRules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=r.CORSConfiguration||{},i=o.CORSRules||o.CORSRule||[];i=util_1.clone(util_1.isArray(i)?i:[i]),util_1.each(i,(function(e){util_1.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t){var r=t+"s",n=e[r]||e[t]||[];delete e[t],e[r]=util_1.isArray(n)?n:[n]}))})),t(null,{CORSRules:i,statusCode:r.statusCode,headers:r.headers})}}))}function deleteBucketCors(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode||e.statusCode,headers:r.headers})}))}function getBucketLocation(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},t)}function putBucketPolicy(e,t){var r=e.Policy;try{"string"==typeof r&&(r=JSON.parse(r))}catch(e){}if(!r||"string"==typeof r)return t(util_1.error(Error("Policy format error")));var n=JSON.stringify(r);r.version||(r.version="2.0");var o=e.Headers;o["Content-Type"]="application/json",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:n,headers:o},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketPolicy(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},(function(e,r){if(e)return t(e.statusCode&&403===e.statusCode?util_1.error(e,{ErrorStatus:"Access Denied"}):e.statusCode&&405===e.statusCode?util_1.error(e,{ErrorStatus:"Method Not Allowed"}):e.statusCode&&404===e.statusCode?util_1.error(e,{ErrorStatus:"Policy Not Found"}):e);var n={};try{n=JSON.parse(r.body)}catch(e){}t(null,{Policy:n,statusCode:r.statusCode,headers:r.headers})}))}function deleteBucketPolicy(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode||e.statusCode,headers:r.headers})}))}function putBucketTagging(e,t){var r=e.Tagging||{},n=r.TagSet||r.Tags||e.Tags||[];n=util_1.clone(util_1.isArray(n)?n:[n]);var o=util_1.json2xml({Tagging:{TagSet:{Tag:n}}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=util_1.binaryBase64(util_1.md5(o)),submitRequest.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"tagging",headers:i},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketTagging(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,r){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var n={Tags:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else{var o=[];try{o=r.Tagging.TagSet.Tag||[]}catch(e){}o=util_1.clone(util_1.isArray(o)?o:[o]),t(null,{Tags:o,statusCode:r.statusCode,headers:r.headers})}}))}function deleteBucketTagging(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketLifecycle(e,t){var r=(e.LifecycleConfiguration||{}).Rules||e.Rules||[];r=util_1.clone(r);var n=util_1.json2xml({LifecycleConfiguration:{Rule:r}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"lifecycle",headers:o},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketLifecycle(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,r){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var n={Rules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=[];try{o=r.LifecycleConfiguration.Rule||[]}catch(e){}o=util_1.clone(util_1.isArray(o)?o:[o]),t(null,{Rules:o,statusCode:r.statusCode,headers:r.headers})}}))}function deleteBucketLifecycle(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketVersioning(e,t){if(e.VersioningConfiguration){var r=util_1.json2xml({VersioningConfiguration:e.VersioningConfiguration||{}}),n=e.Headers;n["Content-Type"]="application/xml",n["Content-MD5"]=util_1.binaryBase64(util_1.md5(r)),submitRequest.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"versioning",headers:n},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(util_1.error(Error("missing param VersioningConfiguration")))}function getBucketVersioning(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},(function(e,r){e||!r.VersioningConfiguration&&(r.VersioningConfiguration={}),t(e,r)}))}function putBucketReplication(e,t){var r=util_1.clone(e.ReplicationConfiguration),n=util_1.json2xml({ReplicationConfiguration:r});n=(n=n.replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>");var o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"replication",headers:o},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketReplication(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,r){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var n={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else!r.ReplicationConfiguration&&(r.ReplicationConfiguration={}),r.ReplicationConfiguration.Rule&&(r.ReplicationConfiguration.Rules=util_1.makeArray(r.ReplicationConfiguration.Rule),delete r.ReplicationConfiguration.Rule),t(e,r)}))}function deleteBucketReplication(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketWebsite(e,t){if(e.WebsiteConfiguration){var r=util_1.clone(e.WebsiteConfiguration||{}),n=r.RoutingRules||r.RoutingRule||[];n=util_1.isArray(n)?n:[n],delete r.RoutingRule,delete r.RoutingRules,n.length&&(r.RoutingRules={RoutingRule:n});var o=util_1.json2xml({WebsiteConfiguration:r}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=util_1.binaryBase64(util_1.md5(o)),submitRequest.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"website",headers:i},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(util_1.error(Error("missing param WebsiteConfiguration")))}function getBucketWebsite(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website"},(function(e,r){if(e)if(404===e.statusCode&&"NoSuchWebsiteConfiguration"===e.error.Code){var n={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=r.WebsiteConfiguration||{};if(o.RoutingRules){var i=util_1.clone(o.RoutingRules.RoutingRule||[]);i=util_1.makeArray(i),o.RoutingRules=i}t(null,{WebsiteConfiguration:o,statusCode:r.statusCode,headers:r.headers})}}))}function deleteBucketWebsite(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketReferer(e,t){if(e.RefererConfiguration){var r=util_1.clone(e.RefererConfiguration||{}),n=r.DomainList||{},o=n.Domains||n.Domain||[];(o=util_1.isArray(o)?o:[o]).length&&(r.DomainList={Domain:o});var i=util_1.json2xml({RefererConfiguration:r}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=util_1.binaryBase64(util_1.md5(i)),submitRequest.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:i,action:"referer",headers:s},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(util_1.error(Error("missing param RefererConfiguration")))}function getBucketReferer(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer"},(function(e,r){if(e)if(404===e.statusCode&&"NoSuchRefererConfiguration"===e.error.Code){var n={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=r.RefererConfiguration||{};if(o.DomainList){var i=util_1.clone(o.DomainList.Domain||[]);i=util_1.makeArray(i),o.DomainList={Domains:i}}t(null,{RefererConfiguration:o,statusCode:r.statusCode,headers:r.headers})}}))}function putBucketDomain(e,t){var r=(e.DomainConfiguration||{}).DomainRule||e.DomainRule||[];r=util_1.clone(r);var n=util_1.json2xml({DomainConfiguration:{DomainRule:r}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"domain",headers:o},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketDomain(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},(function(e,r){if(e)return t(e);var n=[];try{n=r.DomainConfiguration.DomainRule||[]}catch(e){}n=util_1.clone(util_1.isArray(n)?n:[n]),t(null,{DomainRule:n,statusCode:r.statusCode,headers:r.headers})}))}function deleteBucketDomain(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketOrigin(e,t){var r=(e.OriginConfiguration||{}).OriginRule||e.OriginRule||[];r=util_1.clone(r);var n=util_1.json2xml({OriginConfiguration:{OriginRule:r}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"origin",headers:o},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketOrigin(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},(function(e,r){if(e)return t(e);var n=[];try{n=r.OriginConfiguration.OriginRule||[]}catch(e){}n=util_1.clone(util_1.isArray(n)?n:[n]),t(null,{OriginRule:n,statusCode:r.statusCode,headers:r.headers})}))}function deleteBucketOrigin(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketLogging(e,t){var r=util_1.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),n=e.Headers;n["Content-Type"]="application/xml",n["Content-MD5"]=util_1.binaryBase64(util_1.md5(r)),submitRequest.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"logging",headers:n},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketLogging(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging"},(function(e,r){if(e)return t(e);t(null,{BucketLoggingStatus:r.BucketLoggingStatus,statusCode:r.statusCode,headers:r.headers})}))}function putBucketInventory(e,t){var r=util_1.clone(e.InventoryConfiguration);r.OptionalFields&&(r.OptionalFields={Field:r.OptionalFields||[]});if(r.Destination&&r.Destination.COSBucketDestination&&r.Destination.COSBucketDestination.Encryption){var n=r.Destination.COSBucketDestination.Encryption;Object.keys(n).indexOf("SSECOS")>-1&&(n["SSE-COS"]=n.SSECOS,delete n.SSECOS)}var o=util_1.json2xml({InventoryConfiguration:r}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=util_1.binaryBase64(util_1.md5(o)),submitRequest.call(this,{Action:"name/cos:PutBucketInventory",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"inventory",qs:{id:e.Id},headers:i},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketInventory(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},(function(e,r){if(e)return t(e);var n=r.InventoryConfiguration;if(n&&n.OptionalFields&&n.OptionalFields.Field){var o=n.OptionalFields.Field;util_1.isArray(o)||(o=[o]),n.OptionalFields=o}if(n.Destination&&n.Destination.COSBucketDestination&&n.Destination.COSBucketDestination.Encryption){var i=n.Destination.COSBucketDestination.Encryption;Object.keys(i).indexOf("SSE-COS")>-1&&(i.SSECOS=i["SSE-COS"],delete i["SSE-COS"])}t(null,{InventoryConfiguration:n,statusCode:r.statusCode,headers:r.headers})}))}function listBucketInventory(e,t){submitRequest.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken}},(function(e,r){if(e)return t(e);var n=r.ListInventoryConfigurationResult,o=n.InventoryConfiguration||[];o=util_1.isArray(o)?o:[o],delete n.InventoryConfiguration,util_1.each(o,(function(e){if(e&&e.OptionalFields&&e.OptionalFields.Field){var t=e.OptionalFields.Field;util_1.isArray(t)||(t=[t]),e.OptionalFields=t}if(e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption){var r=e.Destination.COSBucketDestination.Encryption;Object.keys(r).indexOf("SSE-COS")>-1&&(r.SSECOS=r["SSE-COS"],delete r["SSE-COS"])}})),n.InventoryConfigurations=o,util_1.extend(n,{statusCode:r.statusCode,headers:r.headers}),t(null,n)}))}function deleteBucketInventory(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id}},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function putBucketAccelerate(e,t){if(e.AccelerateConfiguration){var r=util_1.json2xml({AccelerateConfiguration:e.AccelerateConfiguration||{}}),n={"Content-Type":"application/xml"};n["Content-MD5"]=util_1.binaryBase64(util_1.md5(r)),submitRequest.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"accelerate",headers:n},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(util_1.error(Error("missing param AccelerateConfiguration")))}function getBucketAccelerate(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate"},(function(e,r){e||!r.AccelerateConfiguration&&(r.AccelerateConfiguration={}),t(e,r)}))}function putBucketEncryption(e,t){var r=e.ServerSideEncryptionConfiguration||{},n=util_1.json2xml({ServerSideEncryptionConfiguration:{Rule:r.Rule||r.Rules||[]}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"encryption",headers:o},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getBucketEncryption(e,t){submitRequest.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},(function(e,r){if(e)if(404===e.statusCode&&"NoSuchEncryptionConfiguration"===e.code){var n={EncryptionConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=util_1.makeArray(r.EncryptionConfiguration&&r.EncryptionConfiguration.Rule||[]);r.EncryptionConfiguration={Rules:o},t(e,r)}}))}function deleteBucketEncryption(e,t){submitRequest.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption"},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function headObject(e,t){submitRequest.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(r,n){if(r){var o=r.statusCode;return e.Headers["If-Modified-Since"]&&o&&304===o?t(null,{NotModified:!0,statusCode:o}):t(r)}n.ETag=util_1.attr(n.headers,"etag",""),t(null,n)}))}function listObjectVersions(e,t){var r={};r.prefix=e.Prefix||"",r.delimiter=e.Delimiter,r["key-marker"]=e.KeyMarker,r["version-id-marker"]=e.VersionIdMarker,r["max-keys"]=e.MaxKeys,r["encoding-type"]=e.EncodingType,submitRequest.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"versions"},(function(e,r){if(e)return t(e);var n=r.ListVersionsResult||{},o=n.DeleteMarker||[];o=util_1.isArray(o)?o:[o];var i=n.Version||[];i=util_1.isArray(i)?i:[i];var s=util_1.clone(n);delete s.DeleteMarker,delete s.Version,util_1.extend(s,{DeleteMarkers:o,Versions:i,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function getObject(e,t){var r=e.Query||{},n=util_1.throttleOnProgress.call(this,0,e.onProgress);r["response-content-type"]=e.ResponseContentType,r["response-content-language"]=e.ResponseContentLanguage,r["response-expires"]=e.ResponseExpires,r["response-cache-control"]=e.ResponseCacheControl,r["response-content-disposition"]=e.ResponseContentDisposition,r["response-content-encoding"]=e.ResponseContentEncoding,submitRequest.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:r,rawBody:!0,onDownloadProgress:n},(function(r,o){if(n(null,!0),r){var i=r.statusCode;return e.Headers["If-Modified-Since"]&&i&&304===i?t(null,{NotModified:!0}):t(r)}t(null,{Body:o.body,ETag:util_1.attr(o.headers,"etag",""),statusCode:o.statusCode,headers:o.headers})}))}function putObject(e,t){var r=this,n=e.ContentLength,o=util_1.throttleOnProgress.call(r,n,e.onProgress),i=e.Headers;i["Cache-Control"]||i["cache-control"]||(i["Cache-Control"]=""),i["Content-Type"]||i["content-type"]||(i["Content-Type"]=e.Body&&e.Body.type||""),util_1.getBodyMd5(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5||r.options.UploadCheckContentMd5,e.Body,(function(s){s&&(r.options.UploadCheckContentMd5&&(i["Content-MD5"]=util_1.binaryBase64(s)),(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5)&&(i["x-cos-meta-md5"]=s)),void 0!==e.ContentLength&&(i["Content-Length"]=e.ContentLength),o(null,!0),submitRequest.call(r,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:o},(function(i,s){if(i)return o(null,!0),t(i);o({loaded:n,total:n},!0);var a=getUrl({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});a=a.substr(a.indexOf("://")+3),s.Location=a,s.ETag=util_1.attr(s.headers,"etag",""),t(null,s)}))}),e.onHashProgress)}function deleteObject(e,t){submitRequest.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId},(function(e,r){if(e){var n=e.statusCode;return n&&404===n?t(null,{BucketNotFound:!0,statusCode:n}):t(e)}t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getObjectAcl(e,t){submitRequest.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},(function(e,r){if(e)return t(e);var n=r.AccessControlPolicy||{},o=n.Owner||{},i=n.AccessControlList&&n.AccessControlList.Grant||[];i=util_1.isArray(i)?i:[i];var s=decodeAcl(n);delete s.GrantWrite,r.headers&&r.headers["x-cos-acl"]&&(s.ACL=r.headers["x-cos-acl"]),s=util_1.extend(s,{Owner:o,Grants:i,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function putObjectAcl(e,t){var r=e.Headers,n="";if(e.AccessControlPolicy){var o=util_1.clone(e.AccessControlPolicy||{}),i=o.Grants||o.Grant;i=util_1.isArray(i)?i:[i],delete o.Grant,delete o.Grants,o.AccessControlList={Grant:i},n=util_1.json2xml({AccessControlPolicy:o}),r["Content-Type"]="application/xml",r["Content-MD5"]=util_1.binaryBase64(util_1.md5(n))}util_1.each(r,(function(e,t){0===t.indexOf("x-cos-grant-")&&(r[t]=uniqGrant(r[t]))})),submitRequest.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:r,body:n},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function optionsObject(e,t){var r=e.Headers;r.Origin=e.Origin,r["Access-Control-Request-Method"]=e.AccessControlRequestMethod,r["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,submitRequest.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r},(function(e,r){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var n=r.headers||{};t(null,{AccessControlAllowOrigin:n["access-control-allow-origin"],AccessControlAllowMethods:n["access-control-allow-methods"],AccessControlAllowHeaders:n["access-control-allow-headers"],AccessControlExposeHeaders:n["access-control-expose-headers"],AccessControlMaxAge:n["access-control-max-age"],statusCode:r.statusCode,headers:r.headers})}))}function putObjectCopy(e,t){var r=e.Headers;r["Cache-Control"]||r["cache-control"]||(r["Cache-Control"]="");var n=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);n?submitRequest.call(this,{Scope:[{action:"name/cos:GetObject",bucket:n[1],region:n[3],prefix:decodeURIComponent(n[4])},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},(function(e,r){if(e)return t(e);var n=util_1.clone(r.CopyObjectResult||{});util_1.extend(n,{statusCode:r.statusCode,headers:r.headers}),t(null,n)})):t(util_1.error(Error("CopySource format error")))}function uploadPartCopy(e,t){var r=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);r?submitRequest.call(this,{Scope:[{action:"name/cos:GetObject",bucket:r[1],region:r[3],prefix:decodeURIComponent(r[4])},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},(function(e,r){if(e)return t(e);var n=util_1.clone(r.CopyPartResult||{});util_1.extend(n,{statusCode:r.statusCode,headers:r.headers}),t(null,n)})):t(util_1.error(Error("CopySource format error")))}function deleteMultipleObject(e,t){var r=e.Objects||[],n=e.Quiet;r=util_1.isArray(r)?r:[r];var o=util_1.json2xml({Delete:{Object:r,Quiet:n||!1}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=util_1.binaryBase64(util_1.md5(o));var s=util_1.map(r,(function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}}));submitRequest.call(this,{Scope:s,method:"POST",Bucket:e.Bucket,Region:e.Region,body:o,action:"delete",headers:i},(function(e,r){if(e)return t(e);var n=r.DeleteResult||{},o=n.Deleted||[],i=n.Error||[];o=util_1.isArray(o)?o:[o],i=util_1.isArray(i)?i:[i];var s=util_1.clone(n);util_1.extend(s,{Error:i,Deleted:o,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function restoreObject(e,t){var r=e.Headers;if(e.RestoreRequest){var n=util_1.json2xml({RestoreRequest:e.RestoreRequest||{}});r["Content-Type"]="application/xml",r["Content-MD5"]=util_1.binaryBase64(util_1.md5(n)),submitRequest.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:n,action:"restore",headers:r},t)}else t(util_1.error(Error("missing param RestoreRequest")))}function putObjectTagging(e,t){var r=e.Tagging||{},n=r.TagSet||r.Tags||e.Tags||[];n=util_1.clone(util_1.isArray(n)?n:[n]);var o=util_1.json2xml({Tagging:{TagSet:{Tag:n}}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=util_1.binaryBase64(util_1.md5(o)),submitRequest.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:o,action:"tagging",headers:i,VersionId:e.VersionId},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function getObjectTagging(e,t){submitRequest.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId},(function(e,r){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var n={Tags:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else{var o=[];try{o=r.Tagging.TagSet.Tag||[]}catch(e){}o=util_1.clone(util_1.isArray(o)?o:[o]),t(null,{Tags:o,statusCode:r.statusCode,headers:r.headers})}}))}function deleteObjectTagging(e,t){submitRequest.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function selectObjectContent(e,t){if(!e.SelectType)return t(util_1.error(Error("missing param SelectType")));var r=util_1.json2xml({SelectRequest:e.SelectRequest||{}}),n=e.Headers;n["Content-Type"]="application/xml",n["Content-MD5"]=util_1.binaryBase64(util_1.md5(r)),submitRequest.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:r,DataType:"arraybuffer",rawBody:!0},(function(e,r){if(e&&204===e.statusCode)return t(null,{statusCode:e.statusCode});if(e)return t(e);var n=util_1.parseSelectPayload(r.body);t(null,{statusCode:r.statusCode,headers:r.headers,Body:n.body,Payload:n.payload})}))}function multipartInit(e,t){var r=this,n=e.Headers;n["Cache-Control"]||n["cache-control"]||(n["Cache-Control"]=""),n["Content-Type"]||n["content-type"]||(n["Content-Type"]=e.Body&&e.Body.type||""),util_1.getBodyMd5(e.Body&&(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5),e.Body,(function(n){n&&(e.Headers["x-cos-meta-md5"]=n),submitRequest.call(r,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query},(function(e,r){return e?t(e):(r=util_1.clone(r||{}))&&r.InitiateMultipartUploadResult?t(null,util_1.extend(r.InitiateMultipartUploadResult,{statusCode:r.statusCode,headers:r.headers})):void t(null,r)}))}),e.onHashProgress)}function multipartUpload$1(e,t){var r=this;util_1.getFileSize("multipartUpload",e,(function(){util_1.getBodyMd5(r.options.UploadCheckContentMd5,e.Body,(function(n){n&&(e.Headers["Content-MD5"]=util_1.binaryBase64(n)),submitRequest.call(r,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null},(function(e,r){if(e)return t(e);t(null,{ETag:util_1.attr(r.headers,"etag",""),statusCode:r.statusCode,headers:r.headers})}))}))}))}function multipartComplete(e,t){for(var r=this,n=e.UploadId,o=e.Parts,i=0,s=o.length;s>i;i++)0!==o[i].ETag.indexOf('"')&&(o[i].ETag='"'+o[i].ETag+'"');var a=util_1.json2xml({CompleteMultipartUpload:{Part:o}});a=a.replace(/\n\s*/g,"");var c=e.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=util_1.binaryBase64(util_1.md5(a)),submitRequest.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:n},body:a,headers:c},(function(n,o){if(n)return t(n);var i=getUrl({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),s=o.CompleteMultipartUploadResult||{};s.ProcessResults&&s&&s.ProcessResults&&(s.UploadResult={OriginalInfo:{Key:s.Key,Location:i,ETag:s.ETag,ImageInfo:s.ImageInfo},ProcessResults:s.ProcessResults},delete s.ImageInfo,delete s.ProcessResults);var a=util_1.extend(s,{Location:i,statusCode:o.statusCode,headers:o.headers});t(null,a)}))}function multipartList(e,t){var r={};r.delimiter=e.Delimiter,r["encoding-type"]=e.EncodingType,r.prefix=e.Prefix||"",r["max-uploads"]=e.MaxUploads,r["key-marker"]=e.KeyMarker,r["upload-id-marker"]=e.UploadIdMarker,r=util_1.clearKey(r),submitRequest.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:r.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"uploads"},(function(e,r){if(e)return t(e);if(r&&r.ListMultipartUploadsResult){var n=r.ListMultipartUploadsResult.Upload||[];n=util_1.isArray(n)?n:[n],r.ListMultipartUploadsResult.Upload=n}var o=util_1.clone(r.ListMultipartUploadsResult||{});util_1.extend(o,{statusCode:r.statusCode,headers:r.headers}),t(null,o)}))}function multipartListPart(e,t){var r={};r.uploadId=e.UploadId,r["encoding-type"]=e.EncodingType,r["max-parts"]=e.MaxParts,r["part-number-marker"]=e.PartNumberMarker,submitRequest.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r},(function(e,r){if(e)return t(e);var n=r.ListPartsResult||{},o=n.Part||[];o=util_1.isArray(o)?o:[o],n.Part=o;var i=util_1.clone(n);util_1.extend(i,{statusCode:r.statusCode,headers:r.headers}),t(null,i)}))}function multipartAbort(e,t){var r={};r.uploadId=e.UploadId,submitRequest.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function request(e,t){submitRequest.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body},(function(e,r){if(e)return t(e);r&&r.body&&(r.Body=r.body,delete r.body),t(e,r)}))}function getAuth(e){return util_1.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:this.options.UseRawKey,SystemClockOffset:this.options.SystemClockOffset})}function getObjectUrl(e,t){var r=this,n=getUrl({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});if(void 0!==e.Sign&&!e.Sign)return t(null,{Url:n}),n;var o=getAuthorizationAsync.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires},(function(e,r){if(t)if(e)t(e);else{var o=n;o+="?"+(r.Authorization.indexOf("q-signature")>-1?r.Authorization:"sign="+encodeURIComponent(r.Authorization)),r.SecurityToken&&(o+="&x-cos-security-token="+r.SecurityToken),r.ClientIP&&(o+="&clientIP="+r.ClientIP),r.ClientUA&&(o+="&clientUA="+r.ClientUA),r.Token&&(o+="&token="+r.Token),setTimeout((function(){t(null,{Url:o})}))}}));return o?n+"?"+o.Authorization+(o.SecurityToken?"&x-cos-security-token="+o.SecurityToken:""):n}function decodeAcl(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},r={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},n=(e&&e.AccessControlList||{}).Grant;n&&(n=util_1.isArray(n)?n:[n]);var o={READ:0,WRITE:0,FULL_CONTROL:0};return n&&n.length&&util_1.each(n,(function(n){"qcs::cam::anyone:anyone"===n.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===n.Grantee.URI?o[n.Permission]=1:n.Grantee.ID!==e.Owner.ID&&t[r[n.Permission]].push('id="'+n.Grantee.ID+'"')})),t.ACL=o.FULL_CONTROL||o.WRITE&&o.READ?"public-read-write":o.READ?"public-read":"private",util_1.each(r,(function(e){t[e]=uniqGrant(t[e].join(","))})),t}function uniqGrant(e){var t,r,n=e.split(","),o={};for(t=0;n.length>t;)o[r=n[t].trim()]?n.splice(t,1):(o[r]=!0,n[t]=r,t++);return n.join(",")}function getUrl(e){var t=e.bucket,r=t.substr(0,t.lastIndexOf("-")),n=t.substr(t.lastIndexOf("-")+1),o=e.domain,i=e.region,s=e.object,a=e.protocol||(util_1.isBrowser&&"http:"===location.protocol?"http:":"https:");o||(o=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(i)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(o="{Bucket}."+o)),o=(o=o.replace(/\{\{AppId\}\}/gi,n).replace(/\{\{Bucket\}\}/gi,r).replace(/\{\{Region\}\}/gi,i).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,n).replace(/\{BucketName\}/gi,r).replace(/\{Bucket\}/gi,t).replace(/\{Region\}/gi,i).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(o)||(o=a+"//"+o),"/"===o.slice(-1)&&(o=o.slice(0,-1));var c=o;return e.ForcePathStyle&&(c+="/"+t),c+="/",s&&(c+=util_1.camSafeUrlEncode(s).replace(/%2F/g,"/")),e.isLocation&&(c=c.replace(/^https?:\/\//,"")),c}function getAuthorizationAsync(e,t){var r=util_1.clone(e.Headers);util_1.each(r,(function(e,t){(""===e||["content-type","cache-control","expires"].indexOf(t.toLowerCase())>-1)&&delete r[t]}));var n=!1,o=function(e,r){n||(n=!0,r&&r.XCosSecurityToken&&!r.SecurityToken&&((r=util_1.clone(r)).SecurityToken=r.XCosSecurityToken,delete r.XCosSecurityToken),t&&t(e,r))},i=this,s=e.Bucket||"",a=e.Region||"",c=e.Key||"";i.options.ForcePathStyle&&s&&(c=s+"/"+c);var u="/"+c,l={},d=e.Scope;d||(d=e.Scope||[{action:e.Action||"",bucket:s,region:a,prefix:e.ResourceKey||e.Key||""}]);var p=util_1.md5(JSON.stringify(d));i._StsCache=i._StsCache||[],function(){var e,t;for(e=i._StsCache.length-1;e>=0;e--){t=i._StsCache[e];var r=Math.round(util_1.getSkewTime(i.options.SystemClockOffset)/1e3)+30;if(t.StartTime&&t.StartTime>r||r>=t.ExpiredTime)i._StsCache.splice(e,1);else if(!t.ScopeLimit||t.ScopeLimit&&t.ScopeKey===p){l=t;break}}}();var h,f=function(){var t=util_1.getAuth({SecretId:l.TmpSecretId,SecretKey:l.TmpSecretKey,Method:e.Method,Pathname:u,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:i.options.UseRawKey,SystemClockOffset:i.options.SystemClockOffset,KeyTime:l.StartTime&&l.ExpiredTime?l.StartTime+";"+l.ExpiredTime:""});o(null,{Authorization:t,SecurityToken:l.SecurityToken||l.XCosSecurityToken||"",Token:l.Token||"",ClientIP:l.ClientIP||"",ClientUA:l.ClientUA||""})},m=function(e){if(e.Authorization){var t=!1,r=e.Authorization;if(r)if(r.indexOf(" ")>-1)t=!1;else if(r.indexOf("q-sign-algorithm=")>-1&&r.indexOf("q-ak=")>-1&&r.indexOf("q-sign-time=")>-1&&r.indexOf("q-key-time=")>-1&&r.indexOf("q-url-param-list=")>-1)t=!0;else try{(r=atob(r)).indexOf("a=")>-1&&r.indexOf("k=")>-1&&r.indexOf("t=")>-1&&r.indexOf("r=")>-1&&r.indexOf("b=")>-1&&(t=!0)}catch(e){}if(!t)return util_1.error(Error("getAuthorization callback params format error"))}else{if(!e.TmpSecretId)return util_1.error(Error('getAuthorization callback params missing "TmpSecretId"'));if(!e.TmpSecretKey)return util_1.error(Error('getAuthorization callback params missing "TmpSecretKey"'));if(!e.SecurityToken&&!e.XCosSecurityToken)return util_1.error(Error('getAuthorization callback params missing "SecurityToken"'));if(!e.ExpiredTime)return util_1.error(Error('getAuthorization callback params missing "ExpiredTime"'));if(e.ExpiredTime&&10!==(""+e.ExpiredTime).length)return util_1.error(Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(e.StartTime&&10!==(""+e.StartTime).length)return util_1.error(Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(l.ExpiredTime&&l.ExpiredTime-util_1.getSkewTime(i.options.SystemClockOffset)/1e3>60)f();else if(i.options.getAuthorization)i.options.getAuthorization.call(i,{Bucket:s,Region:a,Method:e.Method,Key:c,Pathname:u,Query:e.Query,Headers:r,Scope:d,SystemClockOffset:i.options.SystemClockOffset},(function(e){"string"==typeof e&&(e={Authorization:e});var t=m(e);if(t)return o(t);e.Authorization?o(null,e):((l=e||{}).Scope=d,l.ScopeKey=p,i._StsCache.push(l),f())}));else{if(!i.options.getSTS)return h={Authorization:util_1.getAuth({SecretId:e.SecretId||i.options.SecretId,SecretKey:e.SecretKey||i.options.SecretKey,Method:e.Method,Pathname:u,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:i.options.UseRawKey,SystemClockOffset:i.options.SystemClockOffset}),SecurityToken:i.options.SecurityToken||i.options.XCosSecurityToken},o(null,h),h;i.options.getSTS.call(i,{Bucket:s,Region:a},(function(e){(l=e||{}).Scope=d,l.ScopeKey=p,l.TmpSecretId||(l.TmpSecretId=l.SecretId),l.TmpSecretKey||(l.TmpSecretKey=l.SecretKey);var t=m(l);if(t)return o(t);i._StsCache.push(l),f()}))}return""}function allowRetry(e){var t=!1,r=!1,n=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var o=e.error.Code;("RequestTimeTooSkewed"===o||"AccessDenied"===o&&"Request has expired"===e.error.Message)&&(r=!0)}catch(e){}if(e)if(r&&n){var i=Date.parse(n);this.options.CorrectClockSkew&&Math.abs(util_1.getSkewTime(this.options.SystemClockOffset)-i)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=i-Date.now(),t=!0)}else 5===Math.floor(e.statusCode/100)&&(t=!0);return t}function submitRequest(e,t){var r=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=util_1.clearKey(e.qs),e.headers&&(e.headers=util_1.clearKey(e.headers)),e.qs&&(e.qs=util_1.clearKey(e.qs));var n=util_1.clone(e.qs);e.action&&(n[e.action]="");var o=function(i){var s=r.options.SystemClockOffset;getAuthorizationAsync.call(r,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:n,Headers:e.headers,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope},(function(n,a){n?t(n):(e.AuthData=a,_submitRequest.call(r,e,(function(n,a){n&&2>i&&(s!==r.options.SystemClockOffset||allowRetry.call(r,n))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,delete e.headers["x-cos-security-token"]),o(i+1)):t(n,a)})))}))};o(1)}function _submitRequest(e,t){var r=this,n=e.TaskId;if(!n||r._isRunningTask(n)){var o=e.method||"GET",i=e.url,s=e.body,a=e.rawBody;i=i||getUrl({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key}),e.action&&(i=i+"?"+e.action);var c={method:o,url:i,headers:e.headers,qs:e.qs,body:s};if(c.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(c.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(c.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(c.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(c.headers["x-cos-security-token"]=e.AuthData.SecurityToken),c.headers&&(c.headers=util_1.clearKey(c.headers)),c=util_1.clearKey(c),e.onProgress&&"function"==typeof e.onProgress){var u=s&&(s.size||s.length)||0;c.onProgress=function(t){n&&!r._isRunningTask(n)||e.onProgress({loaded:t?t.loaded:0,total:u})}}e.onDownloadProgress&&(c.onDownloadProgress=e.onDownloadProgress),e.DataType&&(c.dataType=e.DataType),this.options.Timeout&&(c.timeout=this.options.Timeout),r.options.ForcePathStyle&&(c.pathStyle=r.options.ForcePathStyle),r.emit("before-send",c);var l=(r.options.Request||request_1)(c,(function(e){if("abort"!==e.error){r.emit("after-receive",e);var o,i={statusCode:e.statusCode,statusMessage:e.statusMessage,headers:e.headers},s=e.error,c=e.body,u=function(e,s){if(n&&r.off("inner-kill-task",d),!o){o=!0;var a={};i&&i.statusCode&&(a.statusCode=i.statusCode),i&&i.headers&&(a.headers=i.headers),e?(e=util_1.extend(e||{},a),t(e,null)):(s=util_1.extend(s||{},a),t(null,s)),l=null}};if(s)return u(util_1.error(s));var p,h=i.statusCode,f=2===Math.floor(h/100);if(a&&f)return u(null,{body:c});try{p=c&&c.indexOf("<")>-1&&c.indexOf(">")>-1&&util_1.xml2json(c)||{}}catch(e){p={}}var m=p&&p.Error;f?u(null,p):m?u(util_1.error(Error(m.Message),{code:m.Code,error:m})):h?u(util_1.error(Error(i.statusMessage),{code:""+h})):h&&u(util_1.error(Error("statusCode error")))}})),d=function(e){e.TaskId===n&&(l&&l.abort&&l.abort(),r.off("inner-kill-task",d))};n&&r.on("inner-kill-task",d)}}var API_MAP$1={getService:getService,putBucket:putBucket,headBucket:headBucket,getBucket:getBucket,deleteBucket:deleteBucket,putBucketAcl:putBucketAcl,getBucketAcl:getBucketAcl,putBucketCors:putBucketCors,getBucketCors:getBucketCors,deleteBucketCors:deleteBucketCors,getBucketLocation:getBucketLocation,getBucketPolicy:getBucketPolicy,putBucketPolicy:putBucketPolicy,deleteBucketPolicy:deleteBucketPolicy,putBucketTagging:putBucketTagging,getBucketTagging:getBucketTagging,deleteBucketTagging:deleteBucketTagging,putBucketLifecycle:putBucketLifecycle,getBucketLifecycle:getBucketLifecycle,deleteBucketLifecycle:deleteBucketLifecycle,putBucketVersioning:putBucketVersioning,getBucketVersioning:getBucketVersioning,putBucketReplication:putBucketReplication,getBucketReplication:getBucketReplication,deleteBucketReplication:deleteBucketReplication,putBucketWebsite:putBucketWebsite,getBucketWebsite:getBucketWebsite,deleteBucketWebsite:deleteBucketWebsite,putBucketReferer:putBucketReferer,getBucketReferer:getBucketReferer,putBucketDomain:putBucketDomain,getBucketDomain:getBucketDomain,deleteBucketDomain:deleteBucketDomain,putBucketOrigin:putBucketOrigin,getBucketOrigin:getBucketOrigin,deleteBucketOrigin:deleteBucketOrigin,putBucketLogging:putBucketLogging,getBucketLogging:getBucketLogging,putBucketInventory:putBucketInventory,getBucketInventory:getBucketInventory,listBucketInventory:listBucketInventory,deleteBucketInventory:deleteBucketInventory,putBucketAccelerate:putBucketAccelerate,getBucketAccelerate:getBucketAccelerate,putBucketEncryption:putBucketEncryption,getBucketEncryption:getBucketEncryption,deleteBucketEncryption:deleteBucketEncryption,getObject:getObject,headObject:headObject,listObjectVersions:listObjectVersions,putObject:putObject,deleteObject:deleteObject,getObjectAcl:getObjectAcl,putObjectAcl:putObjectAcl,optionsObject:optionsObject,putObjectCopy:putObjectCopy,deleteMultipleObject:deleteMultipleObject,restoreObject:restoreObject,putObjectTagging:putObjectTagging,getObjectTagging:getObjectTagging,deleteObjectTagging:deleteObjectTagging,selectObjectContent:selectObjectContent,uploadPartCopy:uploadPartCopy,multipartInit:multipartInit,multipartUpload:multipartUpload$1,multipartComplete:multipartComplete,multipartList:multipartList,multipartListPart:multipartListPart,multipartAbort:multipartAbort,request:request,getObjectUrl:getObjectUrl,getAuth:getAuth};function warnOldApi(e,t,r){util_1.each(["Cors","Acl"],(function(n){if(e.slice(-n.length)===n){var o=e.slice(0,-n.length)+n.toUpperCase(),i=util_1.apiWrapper(e,t),s=!1;r[o]=function(){!s&&console.warn("warning: cos."+o+" has been deprecated. Please Use cos."+e+" instead."),s=!0,i.apply(this,arguments)}}}))}var init$1=function(e,t){t.transferToTaskMethod(API_MAP$1,"putObject"),util_1.each(API_MAP$1,(function(t,r){e.prototype[r]=util_1.apiWrapper(r,t),warnOldApi(r,t,e.prototype)}))},base={init:init$1},eachLimit=function(e,t,r,n){if(n=n||function(){},!e.length||0>=t)return n();var o=0,i=0,s=0;!function a(){if(o>=e.length)return n();for(;t>s&&e.length>i;)s+=1,r(e[(i+=1)-1],(function(t){t?(n(t),n=function(){}):(s-=1,e.length>(o+=1)?a():n())}))}()},retry=function(e,t,r){var n=function(o){t((function(t,i){t&&e>o?n(o+1):r(t,i)}))};1>e?r():n(1)},async={eachLimit:eachLimit,retry:retry},async_1=async,EventProxy=event.EventProxy;function sliceUploadFile(e,t){var r,n,o=this,i=new EventProxy,s=e.TaskId,a=e.Bucket,c=e.Region,u=e.Key,l=e.Body,d=e.ChunkSize||e.SliceSize||o.options.ChunkSize,p=e.AsyncLimit,h=e.StorageClass,f=e.ServerSideEncryption,m=e.onHashProgress;i.on("error",(function(e){if(o._isRunningTask(s))return t(e)})),i.on("upload_complete",(function(e){t(null,e)})),i.on("upload_slice_complete",(function(t){var l={};util_1.each(e.Headers,(function(e,t){var r=t.toLowerCase();0!==r.indexOf("x-cos-meta-")&&"pic-operations"!==r||(l[t]=e)})),uploadSliceComplete.call(o,{Bucket:a,Region:c,Key:u,UploadId:t.UploadId,SliceList:t.SliceList,Headers:l},(function(e,a){if(o._isRunningTask(s)){if(session.removeUsing(t.UploadId),e)return n(null,!0),i.emit("error",e);session.removeUploadId.call(o,t.UploadId),n({loaded:r,total:r},!0),i.emit("upload_complete",a)}}))})),i.on("get_upload_data_finish",(function(t){var h=session.getFileId(l,e.ChunkSize,a,u);h&&session.saveUploadId.call(o,h,t.UploadId,o.options.UploadIdCacheLimit),session.setUsing(t.UploadId),n(null,!0),uploadSliceList.call(o,{TaskId:s,Bucket:a,Region:c,Key:u,Body:l,FileSize:r,SliceSize:d,AsyncLimit:p,ServerSideEncryption:f,UploadData:t,onProgress:n},(function(e,t){if(o._isRunningTask(s))return e?(n(null,!0),i.emit("error",e)):void i.emit("upload_slice_complete",t)}))})),i.on("get_file_size_finish",(function(){if(n=util_1.throttleOnProgress.call(o,r,e.onProgress),e.UploadData.UploadId)i.emit("get_upload_data_finish",e.UploadData);else{var t=util_1.extend({TaskId:s,Bucket:a,Region:c,Key:u,Headers:e.Headers,StorageClass:h,Body:l,FileSize:r,SliceSize:d,onHashProgress:m},e);getUploadIdAndPartList.call(o,t,(function(t,r){if(o._isRunningTask(s)){if(t)return i.emit("error",t);e.UploadData.UploadId=r.UploadId,e.UploadData.PartList=r.PartList,i.emit("get_upload_data_finish",e.UploadData)}}))}})),r=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),util_1.each(e.Headers,(function(t,r){"content-length"===r.toLowerCase()&&delete e.Headers[r]})),function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,i=0;14>i&&o.options.MaxPartNumber<r/(n=1024*t[i]*1024);i++);e.ChunkSize=e.SliceSize=d=Math.max(d,n)}(),0===r?(e.Body="",e.ContentLength=0,e.SkipTask=!0,o.putObject(e,t)):i.emit("get_file_size_finish")}function getUploadIdAndPartList(e,t){var r=e.TaskId,n=e.Bucket,o=e.Region,i=e.Key,s=e.StorageClass,a=this,c={},u=e.FileSize,l=e.SliceSize,d=Math.ceil(u/l),p=0,h=util_1.throttleOnProgress.call(a,u,e.onHashProgress),f=function(t,r){var n=t.length;if(0===n)return r(null,!0);if(n>d)return r(null,!1);if(n>1&&Math.max(t[0].Size,t[1].Size)!==l)return r(null,!1);var o=function(i){if(n>i){var s=t[i];!function(t,r){var n=l*(t-1),o=Math.min(n+l,u),i=o-n;c[t]?r(null,{PartNumber:t,ETag:c[t],Size:i}):util_1.fileSlice(e.Body,n,o,!1,(function(e){util_1.getFileMd5(e,(function(e,n){if(e)return r(util_1.error(e));var o='"'+n+'"';c[t]=o,h({loaded:p+=i,total:u}),r(null,{PartNumber:t,ETag:o,Size:i})}))}))}(s.PartNumber,(function(e,t){t&&t.ETag===s.ETag&&t.Size===s.Size?o(i+1):r(null,!1)}))}else r(null,!0)};o(0)},m=new EventProxy;m.on("error",(function(e){if(a._isRunningTask(r))return t(e)})),m.on("upload_id_available",(function(e){var r={},n=[];util_1.each(e.PartList,(function(e){r[e.PartNumber]=e}));for(var o=1;d>=o;o++){var i=r[o];i?(i.PartNumber=o,i.Uploaded=!0):i={PartNumber:o,ETag:null,Uploaded:!1},n.push(i)}e.PartList=n,t(null,e)})),m.on("no_available_upload_id",(function(){if(a._isRunningTask(r)){var c=util_1.extend({Bucket:n,Region:o,Key:i,Headers:util_1.clone(e.Headers),Query:util_1.clone(e.Query),StorageClass:s,Body:e.Body},e);a.multipartInit(c,(function(e,n){if(a._isRunningTask(r)){if(e)return m.emit("error",e);var o=n.UploadId;if(!o)return t(util_1.error(Error("no such upload id")));m.emit("upload_id_available",{UploadId:o,PartList:[]})}}))}})),m.on("has_and_check_upload_id",(function(e){e=e.reverse(),async_1.eachLimit(e,1,(function(e,t){a._isRunningTask(r)&&(session.using[e]?t():wholeMultipartListPart.call(a,{Bucket:n,Region:o,Key:i,UploadId:e},(function(n,o){if(a._isRunningTask(r)){if(n)return session.removeUsing(e),m.emit("error",n);var i=o.PartList;i.forEach((function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""})),f(i,(function(n,o){if(a._isRunningTask(r))return n?m.emit("error",n):void(o?t({UploadId:e,PartList:i}):t())}))}})))}),(function(e){a._isRunningTask(r)&&(h(null,!0),e&&e.UploadId?m.emit("upload_id_available",e):m.emit("no_available_upload_id"))}))})),m.on("seek_local_avail_upload_id",(function(t){var s=session.getFileId(e.Body,e.ChunkSize,n,i),c=session.getUploadIdList.call(a,s);if(s&&c){var u=function(e){if(c.length>e){var s=c[e];if(!util_1.isInArray(t,s))return session.removeUploadId.call(a,s),void u(e+1);session.using[s]?u(e+1):wholeMultipartListPart.call(a,{Bucket:n,Region:o,Key:i,UploadId:s},(function(t,n){a._isRunningTask(r)&&(t?(session.removeUploadId.call(a,s),u(e+1)):m.emit("upload_id_available",{UploadId:s,PartList:n.PartList}))}))}else m.emit("has_and_check_upload_id",t)};u(0)}else m.emit("has_and_check_upload_id",t)})),m.on("get_remote_upload_id_list",(function(){wholeMultipartList.call(a,{Bucket:n,Region:o,Key:i},(function(t,o){if(a._isRunningTask(r)){if(t)return m.emit("error",t);var c=util_1.filter(o.UploadList,(function(e){return e.Key===i&&(!s||e.StorageClass.toUpperCase()===s.toUpperCase())})).reverse().map((function(e){return e.UploadId||e.UploadID}));if(c.length)m.emit("seek_local_avail_upload_id",c);else{var u,l=session.getFileId(e.Body,e.ChunkSize,n,i);l&&(u=session.getUploadIdList.call(a,l))&&util_1.each(u,(function(e){session.removeUploadId.call(a,e)})),m.emit("no_available_upload_id")}}}))})),m.emit("get_remote_upload_id_list")}function wholeMultipartList(e,t){var r=this,n=[],o={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key},i=function(){r.multipartList(o,(function(e,r){if(e)return t(e);n.push.apply(n,r.Upload||[]),"true"===r.IsTruncated?(o.KeyMarker=r.NextKeyMarker,o.UploadIdMarker=r.NextUploadIdMarker,i()):t(null,{UploadList:n})}))};i()}function wholeMultipartListPart(e,t){var r=this,n=[],o={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId},i=function(){r.multipartListPart(o,(function(e,r){if(e)return t(e);n.push.apply(n,r.Part||[]),"true"===r.IsTruncated?(o.PartNumberMarker=r.NextPartNumberMarker,i()):t(null,{PartList:n})}))};i()}function uploadSliceList(e,t){var r=this,n=e.TaskId,o=e.Bucket,i=e.Region,s=e.Key,a=e.UploadData,c=e.FileSize,u=e.SliceSize,l=Math.min(e.AsyncLimit||r.options.ChunkParallelLimit||1,256),d=e.Body,p=Math.ceil(c/u),h=0,f=e.ServerSideEncryption,m=util_1.filter(a.PartList,(function(e){return e.Uploaded&&(h+=p>e.PartNumber?u:c%u||u),!e.Uploaded})),y=e.onProgress;async_1.eachLimit(m,l,(function(e,t){if(r._isRunningTask(n)){var l=e.PartNumber,p=Math.min(c,e.PartNumber*u)-(e.PartNumber-1)*u,m=0;uploadSliceItem.call(r,{TaskId:n,Bucket:o,Region:i,Key:s,SliceSize:u,FileSize:c,PartNumber:l,ServerSideEncryption:f,Body:d,UploadData:a,onProgress:function(e){h+=e.loaded-m,m=e.loaded,y({loaded:h,total:c})}},(function(o,i){r._isRunningTask(n)&&(o||i.ETag||(o='get ETag error, please add "ETag" to CORS ExposeHeader setting.'),o?h-=m:(h+=p-m,e.ETag=i.ETag),y({loaded:h,total:c}),t(o||null,i))}))}}),(function(e){if(r._isRunningTask(n))return e?t(e):void t(null,{UploadId:a.UploadId,SliceList:a.PartList})}))}function uploadSliceItem(e,t){var r=this,n=e.TaskId,o=e.Bucket,i=e.Region,s=e.Key,a=e.FileSize,c=e.Body,u=1*e.PartNumber,l=e.SliceSize,d=e.ServerSideEncryption,p=e.UploadData,h=l*(u-1),f=l,m=h+l;m>a&&(f=(m=a)-h);var y=p.PartList[u-1];async_1.retry(r.options.ChunkRetryTimes+1,(function(t){r._isRunningTask(n)&&util_1.fileSlice(c,h,m,!0,(function(a){r.multipartUpload({TaskId:n,Bucket:o,Region:i,Key:s,ContentLength:f,PartNumber:u,UploadId:p.UploadId,ServerSideEncryption:d,Body:a,onProgress:e.onProgress},(function(e,o){if(r._isRunningTask(n))return e?t(e):(y.Uploaded=!0,t(null,o))}))}))}),(function(e,o){if(r._isRunningTask(n))return t(e,o)}))}function uploadSliceComplete(e,t){var r=e.Bucket,n=e.Region,o=e.Key,i=e.UploadId,s=this,a=this.options.ChunkRetryTimes+1,c=e.Headers,u=e.SliceList.map((function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}));async_1.retry(a,(function(e){s.multipartComplete({Bucket:r,Region:n,Key:o,UploadId:i,Parts:u,Headers:c},e)}),(function(e,r){t(e,r)}))}function abortUploadTask(e,t){var r=e.Bucket,n=e.Region,o=e.Key,i=e.UploadId,s=e.Level||"task",a=e.AsyncLimit,c=this,u=new EventProxy;if(u.on("error",(function(e){return t(e)})),u.on("get_abort_array",(function(i){abortUploadTaskArray.call(c,{Bucket:r,Region:n,Key:o,Headers:e.Headers,AsyncLimit:a,AbortArray:i},t)})),"bucket"===s)wholeMultipartList.call(c,{Bucket:r,Region:n},(function(e,r){if(e)return t(e);u.emit("get_abort_array",r.UploadList||[])}));else if("file"===s){if(!o)return t(util_1.error(Error("abort_upload_task_no_key")));wholeMultipartList.call(c,{Bucket:r,Region:n,Key:o},(function(e,r){if(e)return t(e);u.emit("get_abort_array",r.UploadList||[])}))}else{if("task"!==s)return t(util_1.error(Error("abort_unknown_level")));if(!i)return t(util_1.error(Error("abort_upload_task_no_id")));if(!o)return t(util_1.error(Error("abort_upload_task_no_key")));u.emit("get_abort_array",[{Key:o,UploadId:i}])}}function abortUploadTaskArray(e,t){var r=e.Bucket,n=e.Region,o=e.Key,i=e.AbortArray,s=e.AsyncLimit||1,a=this,c=0,u=Array(i.length);async_1.eachLimit(i,s,(function(t,i){var s=c;if(o&&o!==t.Key)return u[s]={error:{KeyNotMatch:!0}},void i(null);var l=t.UploadId||t.UploadID;a.multipartAbort({Bucket:r,Region:n,Key:t.Key,Headers:e.Headers,UploadId:l},(function(e){u[s]={error:e,task:{Bucket:r,Region:n,Key:t.Key,UploadId:l}},i(null)})),c++}),(function(e){if(e)return t(e);for(var r=[],n=[],o=0,i=u.length;i>o;o++){var s=u[o];s.task&&(s.error?n.push(s.task):r.push(s.task))}return t(null,{successList:r,errorList:n})}))}function uploadFiles(e,t){var r=this,n=void 0===e.SliceSize?r.options.SliceSize:e.SliceSize,o=0,i=0,s=util_1.throttleOnProgress.call(r,i,e.onProgress),a=e.files.length,c=e.onFileFinish,u=Array(a),l=function(e,r,n){s(null,!0),c&&c(e,r,n),u[n.Index]={options:n,error:e,data:r},0>=--a&&t&&t(null,{files:u})},d=[];util_1.each(e.files,(function(e,t){!function(){var r=e.Body,a=r.size||r.length||0,c={Index:t,TaskId:""};o+=a,util_1.each(e,(function(e,t){"object"!=typeof e&&"function"!=typeof e&&(c[t]=e)}));var u=e.onTaskReady;e.onTaskReady=function(e){c.TaskId=e,u&&u(e)};var p=0,h=e.onProgress;e.onProgress=function(e){i=i-p+e.loaded,p=e.loaded,h&&h(e),s({loaded:i,total:o})};var f=e.onFileFinish;d.push({api:a>n?"sliceUploadFile":"putObject",params:e,callback:function(e,t){f&&f(e,t),l&&l(e,t,c)}})}()})),r._addTasks(d)}function sliceCopyFile(e,t){var r=new EventProxy,n=this,o=e.Bucket,i=e.Region,s=e.Key,a=e.CopySource,c=a.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(c){var u=c[1],l=c[3],d=decodeURIComponent(c[4]),p=void 0===e.CopySliceSize?n.options.CopySliceSize:e.CopySliceSize;p=Math.max(0,p);var h,f,m=e.CopyChunkSize||this.options.CopyChunkSize,y=this.options.CopyChunkParallelLimit,g=0;r.on("copy_slice_complete",(function(r){util_1.each(e.Headers,(function(e,t){t.toLowerCase().indexOf("x-cos-meta-")}));var a=util_1.map(r.PartList,(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}));n.multipartComplete({Bucket:o,Region:i,Key:s,UploadId:r.UploadId,Parts:a},(function(e,r){if(e)return f(null,!0),t(e);f({loaded:h,total:h},!0),t(null,r)}))})),r.on("get_copy_data_finish",(function(e){async_1.eachLimit(e.PartList,y,(function(t,r){var c=t.end-t.start;copySliceItem.call(n,{Bucket:o,Region:i,Key:s,CopySource:a,UploadId:e.UploadId,PartNumber:t.PartNumber,CopySourceRange:t.CopySourceRange},(function(e,n){if(e)return r(e);f({loaded:g+=c,total:h}),t.ETag=n.ETag,r(e||null,n)}))}),(function(n){if(n)return f(null,!0),t(n);r.emit("copy_slice_complete",e)}))})),r.on("get_file_size_finish",(function(a){var c;if(function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],r=1048576,o=0;14>o&&n.options.MaxPartNumber<h/(r=1024*t[o]*1024);o++);e.ChunkSize=m=Math.max(m,r);for(var i=Math.ceil(h/m),s=[],a=1;i>=a;a++){var c=(a-1)*m,u=h>a*m?a*m-1:h-1;s.push({PartNumber:a,start:c,end:u,CopySourceRange:"bytes="+c+"-"+u})}e.PartList=s}(),(c="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:a)["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||a["x-cos-storage-class"],c=util_1.clearKey(c),"ARCHIVE"===a["x-cos-storage-class"]||"DEEP_ARCHIVE"===a["x-cos-storage-class"]){var u=a["x-cos-restore"];if(!u||'ongoing-request="true"'===u)return void t(util_1.error(Error("Unrestored archive object is not allowed to be copied")))}delete c["x-cos-copy-source"],delete c["x-cos-metadata-directive"],delete c["x-cos-copy-source-If-Modified-Since"],delete c["x-cos-copy-source-If-Unmodified-Since"],delete c["x-cos-copy-source-If-Match"],delete c["x-cos-copy-source-If-None-Match"],n.multipartInit({Bucket:o,Region:i,Key:s,Headers:c},(function(n,o){if(n)return t(n);e.UploadId=o.UploadId,r.emit("get_copy_data_finish",e)}))})),n.headObject({Bucket:u,Region:l,Key:d},(function(o,i){if(o)t(o.statusCode&&404===o.statusCode?util_1.error(o,{ErrorStatus:d+" Not Exist"}):o);else if(void 0!==(h=e.FileSize=i.headers["content-length"])&&h)if(f=util_1.throttleOnProgress.call(n,h,e.onProgress),h>p){var s=i.headers,a={"Cache-Control":s["cache-control"],"Content-Disposition":s["content-disposition"],"Content-Encoding":s["content-encoding"],"Content-Type":s["content-type"],Expires:s.expires,"x-cos-storage-class":s["x-cos-storage-class"]};util_1.each(s,(function(e,t){var r="x-cos-meta-";0===t.indexOf(r)&&t.length>11&&(a[t]=e)})),r.emit("get_file_size_finish",a)}else e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),n.putObjectCopy(e,(function(e,r){if(e)return f(null,!0),t(e);f({loaded:h,total:h},!0),t(e,r)}));else t(util_1.error(Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.')))}))}else t(util_1.error(Error("CopySource format error")))}function copySliceItem(e,t){var r=e.TaskId,n=e.Bucket,o=e.Region,i=e.Key,s=e.CopySource,a=e.UploadId,c=1*e.PartNumber,u=e.CopySourceRange,l=this;async_1.retry(this.options.ChunkRetryTimes+1,(function(e){l.uploadPartCopy({TaskId:r,Bucket:n,Region:o,Key:i,CopySource:s,UploadId:a,PartNumber:c,CopySourceRange:u},(function(t,r){e(t||null,r)}))}),(function(e,r){return t(e,r)}))}var API_MAP={sliceUploadFile:sliceUploadFile,abortUploadTask:abortUploadTask,uploadFiles:uploadFiles,sliceCopyFile:sliceCopyFile},init=function(e,t){t.transferToTaskMethod(API_MAP,"sliceUploadFile"),util_1.each(API_MAP,(function(t,r){e.prototype[r]=util_1.apiWrapper(r,t)}))},advance={init:init},defaultOptions={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50},COS=function(e){this.options=util_1.extend(util_1.clone(defaultOptions),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),event.init(this),task.init(this)};base.init(COS,task),advance.init(COS,task),COS.getAuthorization=util_1.getAuth,COS.version="1.2.8";var cos=COS,cosJsSdkV5=cos,CRM_TOKEN_KEY="CRM_TOKEN_KEY",$http,url,fileObj,partSize;function createFormData(e){var t=new FormData;return"[object Object]"===Object.prototype.toString.call(e)&&Object.keys(e).length>0&&Object.keys(e).forEach((function(r){return t.append(r,e[r])})),t}function handleGetUpToken(e,t,r,n){e=e.split("/")[1];var o=JSON.parse(localStorage.getItem(CRM_TOKEN_KEY)),i=o.klzz_ol_token,s=o.klzz_ol_uid,a=o.klzz_ol_time;return new Promise((function(o,c){$http.post("/train/v1/alioss/get_oss_config",{driver:n||"aly_oss",klzzOlTime:a,klzzOlToken:i,klzzOlUid:s,ext:e,name:t,type:r}).then((function(e){o(e)})).catch((function(e){c(e)}))}))}function handleAliSingle(e){var t=e.bucket,r=e.region,n=e.path;delete e.bucket,delete e.region,delete e.path;var o=createFormData(e),i="https://".concat(t,".").concat(r,".aliyuncs.com/"),s={headers:{contentType:"application/json;charset=UTF-8"}};return new Promise((function(e,t){$http.post(i,o,s).then((function(t){""===t&&e(i+n)})).catch((function(e){t(e)}))}))}function multipartUpload(e){return _multipartUpload.apply(this,arguments)}function _multipartUpload(){return(_multipartUpload=_asyncToGenerator(regenerator.mark((function e(t){var r,n;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,delete t.path,n=new client(t),e.next=5,n.multipartUpload(r,fileObj,{parallel:5,partSize:partSize});case 5:return e.abrupt("return",e.sent.res.requestUrls[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uploadAliYun(e,t){return _uploadAliYun.apply(this,arguments)}function _uploadAliYun(){return(_uploadAliYun=_asyncToGenerator(regenerator.mark((function e(t,r){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==r){e.next=6;break}return e.next=3,multipartUpload(t);case 3:url=e.sent,e.next=9;break;case 6:return e.next=8,handleAliSingle(t);case 8:url=e.sent;case 9:return e.abrupt("return",url);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uploadTecentYun(e,t){var r={TmpSecretId:e.secretId,TmpSecretKey:e.secretKey,XCosSecurityToken:e.token,ExpiredTime:e.expiredTime,StartTime:e.startTime},n=new cosJsSdkV5({Protocol:"https:",getAuthorization:function(e,t){t(r)}});return new Promise((function(t,r){n.putObject({Bucket:e.bucket,Region:e.region,Key:e.filePath,Body:fileObj},(function(e,n){e?r(JSON.stringify(e)):t(n)}))}))}function uploadFlow(e,t){return _uploadFlow.apply(this,arguments)}function _uploadFlow(){return(_uploadFlow=_asyncToGenerator(regenerator.mark((function e(t,r){var n,o,i,s,a,c,u,l,d,p,h,f,m,y,g;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($http=r,o=t.cloudType,i=t.sheetSize,fileObj=n=t.file,s=0,n){e.next=6;break}return e.abrupt("return");case 6:return i&&!isNaN(i)&&n.size>1024*i*1024&&(partSize=1024*i*1024,s=1),c=n.type,u=n.name,e.next=10,handleGetUpToken(c,u,s,o);case 10:if(d=(l=e.sent).data,p=l.message,0!==l.code){e.next=31;break}if("tencent_oss"!==o){e.next=25;break}return h=d.region,f=d.bucket,m=d.path,y=JSON.parse(d.ossToken),a={secretId:(g=y.credentials).tmpSecretId,secretKey:g.tmpSecretKey,token:g.sessionToken,expiredTime:y.expiredTime,bucket:f,region:h,filePath:m},e.next=22,uploadTecentYun(a);case 22:url=e.sent,e.next=29;break;case 25:return a=1===s?{accessKeyId:d.ossToken.accessKeyId,accessKeySecret:d.ossToken.accessKeySecret,bucket:d.bucket,region:d.region,stsToken:d.ossToken.securityToken,path:d.path}:{name:u,key:d.path,policy:d.webOssToken.policy,OSSAccessKeyId:d.webOssToken.accessid,success_action_status:"200",signature:d.webOssToken.signature,file:n,bucket:d.bucket,region:d.region,path:d.path},e.next=28,uploadAliYun(a,s);case 28:url=e.sent;case 29:e.next=32;break;case 31:return e.abrupt("return",p);case 32:return e.abrupt("return",{data:d,url:url});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}exports.uploadFlow=uploadFlow,Object.defineProperty(exports,"__esModule",{value:!0})}));
